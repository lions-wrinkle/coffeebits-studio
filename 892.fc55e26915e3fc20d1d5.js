"use strict";(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[892,998],{6998:(e,t,s)=>{s.r(t),s.d(t,{BasePage:()=>i});class i{constructor(e,t,s,i){this.walletConnect=e,this.algodClient=s,this.algoIndexer=i,this.holdings=t}}},6892:(e,t,s)=>{s.r(t),s.d(t,{Browse:()=>a});var i=s(6998),n=s(7304),o=s(5190);class a extends i.BasePage{constructor(...e){super(...arguments),this.collectionName=e[e.length-1],this.title="","caffeineCards"===this.collectionName?this.title="Caffeine Cards":"bathers"===this.collectionName&&(this.title="Bathers"),this.ui=document.createElement("div"),this.ui.innerHTML=`\n    <h1 class="mb-0">${this.title}</h1>\n    <div class="dark-text mb-4">Browse all ${this.title}</div>\n    <div class="row mb-3" id="filters"></div>\n    `,this.collection,this.bathersWithPacks,this.loadAll()}sleep(e){return new Promise((t=>setTimeout(t,e)))}async loadAll(){const e=document.createElement("p");e.textContent=`Loading ${this.title}...`,this.ui.append(e);const t=o.default.filter((e=>e.name===this.collectionName))[0];if(this.collection=new n.tf([t]),await this.collection.load(this.algoIndexer),"bathers"===this.collectionName){const{loadPacks:e}=await Promise.all([s.e(393),s.e(298)]).then(s.bind(s,5298));try{const t=await e();t&&t.length>0&&(this.bathersWithPacks=t.map((e=>e[0])))}catch(e){console.error(e)}}e.remove(),this.displayList()}displayList(){if(!this.collection.nfts.length){const e=document.createElement("div");return e.innerHTML='<div class="dark-text mb-5">No assets</div>',void this.ui.append(e)}const e=this.ui.querySelector("#filters");let t;"caffeineCards"===this.collectionName&&(t='<div class="col-6 col-md-3">\n        <select class="form-control custom-form-control" id="filter-type">\n          <option value="">Card type</option>\n          <option value="Body">Body</option>\n          <option value="Clothes">Clothes</option>\n          <option value="Cup">Cup</option>\n          <option value="Decoration">Decoration</option>\n          <option value="Mini Cup">Mini Cup</option>\n          <option value="Power">Power</option>\n          <option value="Room">Room</option>\n        </select>\n        <span id="filter-type-loading" hidden>Searching...</span>\n      </div>');let s="";"bathers"===this.collectionName&&(s='<div class="col-6 col-md-3 d-flex align-items-center">\n          <input type="checkbox" class="form-check-input" id="pack-checkbox" /> <label class="form-check-label ms-2" for="pack-checkbox">Unopened packs only</label>\n        </div>'),e.innerHTML=`\n    <div class="col-6 col-md-3">\n      <input type="search" class="form-control custom-form-control" placeholder="Name or asset ID" id="filter-search" style="max-width: 16rem;">\n    </div>\n      ${t||""}\n      ${s}\n    `,e.querySelector("#filter-search").addEventListener("keypress",this.search.bind(this),!1),e.querySelector("#pack-checkbox")?.addEventListener("change",this.filterPacks.bind(this),!1),t&&e.querySelector("#filter-type").addEventListener("change",this.filterType.bind(this),!1);const i=document.createElement("div");i.className="row row-cols-2 row-cols-md-3 row-cols-lg-4 gy-4 mb-5",this.ui.append(i);let n=new IntersectionObserver(this.loadVisibleNFTs.bind(this),{root:null,rootMargin:"0px",threshold:0}),o=0;for(const e of this.collection.nfts){const t=document.createElement("div");t.id=`nft-${o}`,t.className="col nft-item",t.dataset.i=o;let s="bathers"===this.collectionName?"placeholder-bather":"placeholder-card";if(t.innerHTML=`\n          <div class="list-item h-100 d-flex flex-column">\n              <div class="ratio ratio-1x1 ${s}">\n                <img src="" class="nft-img img-fluid" loading="lazy" hidden>\n              </div>\n              <div class="list-item-text flex-fill d-flex flex-column">\n                  <h4>${e.name}</h4>\n                  <div class="d-flex justify-content-between">\n                      <span class="asset-id">${e.assetId}</span>\n                      ${e.total}\n                  </div>\n                  <div class="mt-3 nft-properties">\n                  </div>\n                  <div class="flex-fill d-flex justify-content-between align-items-end mt-2">\n                        <div class="nft-special"></div>\n                        <div class="dropdown"></div>\n                  </div>\n              </div>\n          </div>\n      `,t.querySelector(".dropdown").innerHTML=`\n          <a href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">\n          <img src="assets/more.png" class="more">\n          </a>\n          <ul class="dropdown-menu">\n              <li><a class="dropdown-item" href="https://www.nftexplorer.app/asset/${e.assetId}" target="_blank">NFTExplorer</a></li>\n              <li><a class="dropdown-item" href="https://www.randgallery.com/algo-collection/?address=${e.assetId}" target="_blank">RandGallery</a></li>\n              <li><a class="dropdown-item" href="https://algoxnft.com/asset/${e.assetId}" target="_blank">ALGOxNFT</a></li>\n              <li><a class="dropdown-item" href="https://shufl.app/detail/${e.assetId}" target="_blank">Shufl</a></li>\n          </ul>\n    `,"bathers"===this.collectionName&&this.bathersWithPacks&&this.bathersWithPacks.includes(e.assetId)){const e=t.querySelector(".nft-special");e.dataset.bsTitle="The pack tied to this Bather has not been opened yet",e.dataset.bsToggle="tooltip",e.dataset.bsCustomClass="custom-tooltip",e.innerHTML='<img src="assets/pack-icon.png">',new window.bootstrap.Tooltip(e)}i.append(t),o++,n.observe(t)}}loadVisibleNFTs(e,t){e.forEach((e=>{if(!e.isIntersecting)return;const t=e.target,s=this.collection.nfts[t.dataset.i];s.loading||(s.load(this.algoIndexer,!1).then((()=>{const e=t.querySelector(".nft-img");if(e.src=s.imageUrl,e.hidden=!1,s.handleImageError(e),"caffeineCards"===this.collectionName){let e="";if(s.metadata.properties){for(const t in s.metadata.properties)e+=`<span class="custom-badge">${t}</span> `;e+="<br>"}let i="";if(s.metadata.require){let e=[];for(const t in s.metadata.require)e.push(`<span class="custom-badge light">${t}: ${s.metadata.require[t]}</span>`);i=`<span class="custom-badge dark">Require:</span> ${e.join(" ")}`}t.querySelector(".nft-properties").innerHTML=`${e} ${i}<br>`;const n=t.querySelector(".nft-special");n.innerHTML='&#128293; <span id="burn-count">...</span>',n.dataset.bsTitle="Number of card definitively burned",n.dataset.bsToggle="tooltip",n.dataset.bsCustomClass="custom-tooltip",new window.bootstrap.Tooltip(n),this.algodClient.accountAssetInformation(s.metadata.burn_address,s.assetId).do().then((e=>{n.innerHTML=`&#128293; <span id="burn-count">${e["asset-holding"].amount}</span>`}))}})),s.loading=!0,this.sleep(100))}))}search(e){if("Enter"!==e.key)return;const t=e.currentTarget.value;if(!t)return void this.ui.querySelectorAll(".nft-item").forEach((e=>{e.hidden=!1}));let s=t.split(" ");s=s.map((e=>e.trim().toLowerCase())),s=s.filter((e=>e));let i=0;for(const e of this.collection.nfts){let t=!1;e:for(const i of s){if(e.name.toLowerCase().includes(i)||e.assetId==i){t=!0;break}if(e.metadata&&e.metadata.properties)for(const s in e.metadata.properties)if(s.toLowerCase().includes(i)||e.metadata.properties[s].toLowerCase().includes(i)){t=!0;break e}}this.ui.querySelector(`#nft-${i}`).hidden=!t,i++}}async filterType(e){const t=this.ui.querySelector("#filter-type-loading");t.hidden=!1;const s=e?.currentTarget?.value;if(this.ui.querySelectorAll(".nft-item").forEach((e=>{e.hidden=!!s})),!s)return void(t.hidden=!0);let i=0;for(const e of this.collection.nfts){let t=!1;e.isLoaded||await e.load(this.algoIndexer),e.metadata?.properties?.[s]&&(t=!0);this.ui.querySelector(`#nft-${i}`).hidden=!t,i++}t.hidden=!0}filterPacks(e){const t=e.target?.checked;let s=0;for(const e of this.collection.nfts){const i=this.ui.querySelector(`#nft-${s}`);t?this.bathersWithPacks?.includes(e.assetId)?i.hidden=!t:i.hidden=t:i.hidden=!1,s++}}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTLENBQ25CLENBRUFyQyxZQUFZdUUsR0FDVixNQUFNQyxFQUFVRCxFQUFFeEMsUUFBUXlDLFFBRTFCLElBQUk5RCxFQUFJLEVBQ1IsSUFBSyxNQUFNQyxLQUFPekQsS0FBS1ksV0FBV3lCLEtBQU0sQ0FDdEMsTUFBTWtGLEVBQWN2SCxLQUFLUSxHQUFHZ0MsY0FBYyxRQUFRZ0IsS0FFOUM4RCxFQUNFdEgsS0FBS2Esa0JBQWtCbUQsU0FBU1AsRUFBSUssU0FDdEN5RCxFQUFZcEMsUUFBVW1DLEVBRXRCQyxFQUFZcEMsT0FBU21DLEVBR3ZCQyxFQUFZcEMsUUFBUyxFQUd2QjNCLEdBQ0YsQ0FDRixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZGlvLy4vc3JjL3BhZ2VzL2Jhc2UuanMiLCJ3ZWJwYWNrOi8vc3R1ZGlvLy4vc3JjL3BhZ2VzL2Jyb3dzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCBjbGFzcyBCYXNlUGFnZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcih3YWxsZXRDb25uZWN0LCBob2xkaW5ncywgYWxnb2RDbGllbnQsIGFsZ29JbmRleGVyKXtcblxuICAgICAgICB0aGlzLndhbGxldENvbm5lY3QgPSB3YWxsZXRDb25uZWN0O1xuICAgICAgICB0aGlzLmFsZ29kQ2xpZW50ID0gYWxnb2RDbGllbnQ7XG4gICAgICAgIHRoaXMuYWxnb0luZGV4ZXIgPSBhbGdvSW5kZXhlcjtcbiAgICAgICAgdGhpcy5ob2xkaW5ncyA9IGhvbGRpbmdzO1xuXG4gICAgICAgIFxuXG4gICAgfVxuXG59IiwiaW1wb3J0IHsgQmFzZVBhZ2UgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBORlRDb2xsZWN0aW9uIH0gZnJvbSBcImFsZ28tbmZ0LXV0aWxzXCI7XG5cbmltcG9ydCBjb2xsZWN0aW9ucyBmcm9tIFwiLi4vY29sbGVjdGlvbnMuanNcIjtcblxuZXhwb3J0IGNsYXNzIEJyb3dzZSBleHRlbmRzIEJhc2VQYWdlIHtcbiAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG5cbiAgICAvL3RoaXMuY29sbGVjdGlvbk5hbWUgPSBcImNhZmZlaW5lQ2FyZHNcIjtcbiAgICB0aGlzLmNvbGxlY3Rpb25OYW1lID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuXG4gICAgdGhpcy50aXRsZSA9IFwiXCI7XG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbk5hbWUgPT09IFwiY2FmZmVpbmVDYXJkc1wiKSB7XG4gICAgICB0aGlzLnRpdGxlID0gXCJDYWZmZWluZSBDYXJkc1wiO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb2xsZWN0aW9uTmFtZSA9PT0gXCJiYXRoZXJzXCIpIHtcbiAgICAgIHRoaXMudGl0bGUgPSBcIkJhdGhlcnNcIjtcbiAgICB9XG5cbiAgICB0aGlzLnVpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIHRoaXMudWkuaW5uZXJIVE1MID0gYFxuICAgIDxoMSBjbGFzcz1cIm1iLTBcIj4ke3RoaXMudGl0bGV9PC9oMT5cbiAgICA8ZGl2IGNsYXNzPVwiZGFyay10ZXh0IG1iLTRcIj5Ccm93c2UgYWxsICR7dGhpcy50aXRsZX08L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwicm93IG1iLTNcIiBpZD1cImZpbHRlcnNcIj48L2Rpdj5cbiAgICBgO1xuXG4gICAgdGhpcy5jb2xsZWN0aW9uO1xuXG4gICAgdGhpcy5iYXRoZXJzV2l0aFBhY2tzO1xuXG4gICAgdGhpcy5sb2FkQWxsKCk7XG4gIH1cblxuICBzbGVlcChkZWxheVRpbWUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXlUaW1lKSk7XG4gIH1cblxuICBhc3luYyBsb2FkQWxsKCkge1xuICAgIGNvbnN0IGxvYWRpbmdQID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgbG9hZGluZ1AudGV4dENvbnRlbnQgPSBgTG9hZGluZyAke3RoaXMudGl0bGV9Li4uYDtcbiAgICB0aGlzLnVpLmFwcGVuZChsb2FkaW5nUCk7XG5cbiAgICBjb25zdCBjYXJkQ29sbGVjdGlvbiA9IGNvbGxlY3Rpb25zLmZpbHRlcihcbiAgICAgIChjKSA9PiBjLm5hbWUgPT09IHRoaXMuY29sbGVjdGlvbk5hbWVcbiAgICApWzBdO1xuXG4gICAgdGhpcy5jb2xsZWN0aW9uID0gbmV3IE5GVENvbGxlY3Rpb24oW2NhcmRDb2xsZWN0aW9uXSk7XG4gICAgYXdhaXQgdGhpcy5jb2xsZWN0aW9uLmxvYWQodGhpcy5hbGdvSW5kZXhlcik7XG5cbiAgICAvL2xvYWQgcGFja3NcbiAgICBpZiAodGhpcy5jb2xsZWN0aW9uTmFtZSA9PT0gXCJiYXRoZXJzXCIpIHtcbiAgICAgIGNvbnN0IHsgbG9hZFBhY2tzIH0gPSBhd2FpdCBpbXBvcnQoXCIuL3BhY2tzLmpzXCIpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYWNrcyA9IGF3YWl0IGxvYWRQYWNrcygpO1xuXG4gICAgICAgIGlmIChwYWNrcyAmJiBwYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5iYXRoZXJzV2l0aFBhY2tzID0gcGFja3MubWFwKChwKSA9PiBwWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsb2FkaW5nUC5yZW1vdmUoKTtcblxuICAgIHRoaXMuZGlzcGxheUxpc3QoKTtcbiAgfVxuXG4gIGRpc3BsYXlMaXN0KCkge1xuICAgIGlmICghdGhpcy5jb2xsZWN0aW9uLm5mdHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBlbXB0eURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBlbXB0eURpdi5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cImRhcmstdGV4dCBtYi01XCI+Tm8gYXNzZXRzPC9kaXY+JztcblxuICAgICAgdGhpcy51aS5hcHBlbmQoZW1wdHlEaXYpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy9kaXNwbGF5IGZpbHRlclxuICAgIGNvbnN0IGZpbHRlckRpdiA9IHRoaXMudWkucXVlcnlTZWxlY3RvcihcIiNmaWx0ZXJzXCIpO1xuXG4gICAgbGV0IHR5cGVEcm9wZG93bjtcblxuICAgIGlmICh0aGlzLmNvbGxlY3Rpb25OYW1lID09PSBcImNhZmZlaW5lQ2FyZHNcIikge1xuICAgICAgdHlwZURyb3Bkb3duID0gYDxkaXYgY2xhc3M9XCJjb2wtNiBjb2wtbWQtM1wiPlxuICAgICAgICA8c2VsZWN0IGNsYXNzPVwiZm9ybS1jb250cm9sIGN1c3RvbS1mb3JtLWNvbnRyb2xcIiBpZD1cImZpbHRlci10eXBlXCI+XG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPkNhcmQgdHlwZTwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJCb2R5XCI+Qm9keTwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJDbG90aGVzXCI+Q2xvdGhlczwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJDdXBcIj5DdXA8L29wdGlvbj5cbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiRGVjb3JhdGlvblwiPkRlY29yYXRpb248L29wdGlvbj5cbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiTWluaSBDdXBcIj5NaW5pIEN1cDwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJQb3dlclwiPlBvd2VyPC9vcHRpb24+XG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlJvb21cIj5Sb29tPC9vcHRpb24+XG4gICAgICAgIDwvc2VsZWN0PlxuICAgICAgICA8c3BhbiBpZD1cImZpbHRlci10eXBlLWxvYWRpbmdcIiBoaWRkZW4+U2VhcmNoaW5nLi4uPC9zcGFuPlxuICAgICAgPC9kaXY+YDtcbiAgICB9XG5cbiAgICBsZXQgcGFja3NDaGVja2JveCA9IFwiXCI7XG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbk5hbWUgPT09IFwiYmF0aGVyc1wiKSB7XG4gICAgICBwYWNrc0NoZWNrYm94ID0gYDxkaXYgY2xhc3M9XCJjb2wtNiBjb2wtbWQtMyBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwiZm9ybS1jaGVjay1pbnB1dFwiIGlkPVwicGFjay1jaGVja2JveFwiIC8+IDxsYWJlbCBjbGFzcz1cImZvcm0tY2hlY2stbGFiZWwgbXMtMlwiIGZvcj1cInBhY2stY2hlY2tib3hcIj5Vbm9wZW5lZCBwYWNrcyBvbmx5PC9sYWJlbD5cbiAgICAgICAgPC9kaXY+YDtcbiAgICB9XG5cbiAgICBmaWx0ZXJEaXYuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgY2xhc3M9XCJjb2wtNiBjb2wtbWQtM1wiPlxuICAgICAgPGlucHV0IHR5cGU9XCJzZWFyY2hcIiBjbGFzcz1cImZvcm0tY29udHJvbCBjdXN0b20tZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJOYW1lIG9yIGFzc2V0IElEXCIgaWQ9XCJmaWx0ZXItc2VhcmNoXCIgc3R5bGU9XCJtYXgtd2lkdGg6IDE2cmVtO1wiPlxuICAgIDwvZGl2PlxuICAgICAgJHt0eXBlRHJvcGRvd24gPyB0eXBlRHJvcGRvd24gOiBcIlwifVxuICAgICAgJHtwYWNrc0NoZWNrYm94fVxuICAgIGA7XG5cbiAgICBmaWx0ZXJEaXZcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2ZpbHRlci1zZWFyY2hcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgdGhpcy5zZWFyY2guYmluZCh0aGlzKSwgZmFsc2UpO1xuXG4gICAgZmlsdGVyRGl2XG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNwYWNrLWNoZWNrYm94XCIpXG4gICAgICA/LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy5maWx0ZXJQYWNrcy5iaW5kKHRoaXMpLCBmYWxzZSk7XG5cbiAgICBpZiAodHlwZURyb3Bkb3duKSB7XG4gICAgICBmaWx0ZXJEaXZcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIjZmlsdGVyLXR5cGVcIilcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy5maWx0ZXJUeXBlLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0VmlldyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbGlzdFZpZXcuY2xhc3NOYW1lID0gXCJyb3cgcm93LWNvbHMtMiByb3ctY29scy1tZC0zIHJvdy1jb2xzLWxnLTQgZ3ktNCBtYi01XCI7XG4gICAgdGhpcy51aS5hcHBlbmQobGlzdFZpZXcpO1xuXG4gICAgLy9sb2FkIG9ubHkgd2hlbiBlbGVtZW50IGlzIHZpc2libGVcbiAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgIHJvb3Q6IG51bGwsIC8vYnJvd3NlciB2aWV3cG9ydFxuICAgICAgcm9vdE1hcmdpbjogXCIwcHhcIixcbiAgICAgIHRocmVzaG9sZDogMC4wLFxuICAgIH07XG5cbiAgICBsZXQgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICB0aGlzLmxvYWRWaXNpYmxlTkZUcy5iaW5kKHRoaXMpLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG5cbiAgICAvL2Rpc3BsYXkgbmZ0c1xuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IG5mdCBvZiB0aGlzLmNvbGxlY3Rpb24ubmZ0cykge1xuICAgICAgY29uc3QgbmZ0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIG5mdERpdi5pZCA9IGBuZnQtJHtpfWA7XG4gICAgICBuZnREaXYuY2xhc3NOYW1lID0gXCJjb2wgbmZ0LWl0ZW1cIjtcbiAgICAgIG5mdERpdi5kYXRhc2V0LmkgPSBpO1xuXG4gICAgICBsZXQgcGxhY2VIb2xkZXJDbGFzcyA9XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbk5hbWUgPT09IFwiYmF0aGVyc1wiXG4gICAgICAgICAgPyBcInBsYWNlaG9sZGVyLWJhdGhlclwiXG4gICAgICAgICAgOiBcInBsYWNlaG9sZGVyLWNhcmRcIjtcblxuICAgICAgbmZ0RGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibGlzdC1pdGVtIGgtMTAwIGQtZmxleCBmbGV4LWNvbHVtblwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmF0aW8gcmF0aW8tMXgxICR7cGxhY2VIb2xkZXJDbGFzc31cIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIlwiIGNsYXNzPVwibmZ0LWltZyBpbWctZmx1aWRcIiBsb2FkaW5nPVwibGF6eVwiIGhpZGRlbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LWl0ZW0tdGV4dCBmbGV4LWZpbGwgZC1mbGV4IGZsZXgtY29sdW1uXCI+XG4gICAgICAgICAgICAgICAgICA8aDQ+JHtuZnQubmFtZX08L2g0PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlblwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYXNzZXQtaWRcIj4ke25mdC5hc3NldElkfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAke25mdC50b3RhbH1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm10LTMgbmZ0LXByb3BlcnRpZXNcIj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtZmlsbCBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtZW5kIG10LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJuZnQtc3BlY2lhbFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyb3Bkb3duXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuXG4gICAgICAvL2FkZCBkcm9wZG93biB3aXRoIG9wdGlvbnNcbiAgICAgIGNvbnN0IGRyb3Bkb3duRGl2ID0gbmZ0RGl2LnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcGRvd25cIik7XG5cbiAgICAgIGRyb3Bkb3duRGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8YSBocmVmPVwiI1wiIHJvbGU9XCJidXR0b25cIiBkYXRhLWJzLXRvZ2dsZT1cImRyb3Bkb3duXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvbW9yZS5wbmdcIiBjbGFzcz1cIm1vcmVcIj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPlxuICAgICAgICAgICAgICA8bGk+PGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgaHJlZj1cImh0dHBzOi8vd3d3Lm5mdGV4cGxvcmVyLmFwcC9hc3NldC8ke25mdC5hc3NldElkfVwiIHRhcmdldD1cIl9ibGFua1wiPk5GVEV4cGxvcmVyPC9hPjwvbGk+XG4gICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiaHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz0ke25mdC5hc3NldElkfVwiIHRhcmdldD1cIl9ibGFua1wiPlJhbmRHYWxsZXJ5PC9hPjwvbGk+XG4gICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiaHR0cHM6Ly9hbGdveG5mdC5jb20vYXNzZXQvJHtuZnQuYXNzZXRJZH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj5BTEdPeE5GVDwvYT48L2xpPlxuICAgICAgICAgICAgICA8bGk+PGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgaHJlZj1cImh0dHBzOi8vc2h1ZmwuYXBwL2RldGFpbC8ke25mdC5hc3NldElkfVwiIHRhcmdldD1cIl9ibGFua1wiPlNodWZsPC9hPjwvbGk+XG4gICAgICAgICAgPC91bD5cbiAgICBgO1xuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbk5hbWUgPT09IFwiYmF0aGVyc1wiICYmXG4gICAgICAgIHRoaXMuYmF0aGVyc1dpdGhQYWNrcyAmJlxuICAgICAgICB0aGlzLmJhdGhlcnNXaXRoUGFja3MuaW5jbHVkZXMobmZ0LmFzc2V0SWQpXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgbmZ0U3BlY2lhbERpdiA9IG5mdERpdi5xdWVyeVNlbGVjdG9yKFwiLm5mdC1zcGVjaWFsXCIpO1xuICAgICAgICBuZnRTcGVjaWFsRGl2LmRhdGFzZXQuYnNUaXRsZSA9XG4gICAgICAgICAgXCJUaGUgcGFjayB0aWVkIHRvIHRoaXMgQmF0aGVyIGhhcyBub3QgYmVlbiBvcGVuZWQgeWV0XCI7XG4gICAgICAgIG5mdFNwZWNpYWxEaXYuZGF0YXNldC5ic1RvZ2dsZSA9IFwidG9vbHRpcFwiO1xuICAgICAgICBuZnRTcGVjaWFsRGl2LmRhdGFzZXQuYnNDdXN0b21DbGFzcyA9IFwiY3VzdG9tLXRvb2x0aXBcIjtcbiAgICAgICAgbmZ0U3BlY2lhbERpdi5pbm5lckhUTUwgPSAnPGltZyBzcmM9XCJhc3NldHMvcGFjay1pY29uLnBuZ1wiPic7XG5cbiAgICAgICAgbmV3IHdpbmRvdy5ib290c3RyYXAuVG9vbHRpcChuZnRTcGVjaWFsRGl2KTtcbiAgICAgIH1cblxuICAgICAgbGlzdFZpZXcuYXBwZW5kKG5mdERpdik7XG5cbiAgICAgIGkrKztcblxuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShuZnREaXYpO1xuXG4gICAgICAvKm5mdC5sb2FkKHRoaXMuYWxnb0luZGV4ZXIpLnRoZW4oKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhuZnREaXYpO1xuXG4gICAgICAgIGxldCBwcm9wZXJ0aWVzTmFtZXMgPSBcIlwiO1xuXG4gICAgICAgIGlmIChuZnQubWV0YWRhdGEucHJvcGVydGllcykge1xuICAgICAgICAgIGZvciAoY29uc3QgcHJvcGVydHlOYW1lIGluIG5mdC5tZXRhZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzTmFtZXMgKz0gYDxzcGFuIGNsYXNzPVwiY3VzdG9tLWJhZGdlXCI+JHtwcm9wZXJ0eU5hbWV9PC9zcGFuPiBgO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHByb3BlcnRpZXNOYW1lcyArPSBcIjxicj5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXF1aXJlID0gXCJcIjtcblxuICAgICAgICBpZiAobmZ0Lm1ldGFkYXRhLnJlcXVpcmUpIHtcbiAgICAgICAgICBsZXQgcmVxdWlyZUxpc3QgPSBbXTtcblxuICAgICAgICAgIGZvciAoY29uc3QgcmVxdWlyZUtleSBpbiBuZnQubWV0YWRhdGEucmVxdWlyZSkge1xuICAgICAgICAgICAgcmVxdWlyZUxpc3QucHVzaChcbiAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiY3VzdG9tLWJhZGdlIGxpZ2h0XCI+JHtyZXF1aXJlS2V5fTogJHtuZnQubWV0YWRhdGEucmVxdWlyZVtyZXF1aXJlS2V5XX08L3NwYW4+YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXF1aXJlID0gYDxzcGFuIGNsYXNzPVwiY3VzdG9tLWJhZGdlIGRhcmtcIj5SZXF1aXJlOjwvc3Bhbj4gJHtyZXF1aXJlTGlzdC5qb2luKFxuICAgICAgICAgICAgXCIgXCJcbiAgICAgICAgICApfWA7XG4gICAgICAgIH1cblxuICAgICAgICBuZnREaXYucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICBcIi5uZnQtcHJvcGVydGllc1wiXG4gICAgICAgICkuaW5uZXJIVE1MID0gYCR7cHJvcGVydGllc05hbWVzfSAke3JlcXVpcmV9PGJyPmA7XG5cbiAgICAgICAgLy9sb2FkIGltYWdlXG4gICAgICAgIGNvbnN0IGltYWdlID0gbmZ0RGl2LnF1ZXJ5U2VsZWN0b3IoXCIubmZ0LWltZ1wiKTtcbiAgICAgICAgaW1hZ2Uuc3JjID0gbmZ0LmltYWdlVXJsO1xuICAgICAgICBuZnQuaGFuZGxlSW1hZ2VFcnJvcihpbWFnZSk7XG5cbiAgICAgICAgLy9sb2FkIGJhbGFuY2UgZnJvbSBidXJuaW5nIGFkZHJlc3NcbiAgICAgICAgY29uc3QgYnVybkNvdW50U3BhbiA9IG5mdERpdi5xdWVyeVNlbGVjdG9yKFwiI2J1cm4tY291bnRcIik7XG4gICAgICAgIGJ1cm5Db3VudFNwYW4udGV4dENvbnRlbnQgPSBcIi4uLlwiO1xuXG4gICAgICAgIHRoaXMuYWxnb2RDbGllbnRcbiAgICAgICAgICAuYWNjb3VudEFzc2V0SW5mb3JtYXRpb24obmZ0Lm1ldGFkYXRhLmJ1cm5fYWRkcmVzcywgbmZ0LmFzc2V0SWQpXG4gICAgICAgICAgLmRvKClcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBidXJuQ291bnRTcGFuLnRleHRDb250ZW50ID0gYCR7cmVzdWx0W1wiYXNzZXQtaG9sZGluZ1wiXS5hbW91bnR9YDtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAvL2FkZCBkcm9wZG93biB3aXRoIG9wdGlvbnNcbiAgICAgICAgY29uc3QgZHJvcGRvd25EaXYgPSBuZnREaXYucXVlcnlTZWxlY3RvcihcIi5kcm9wZG93blwiKTtcblxuICAgICAgICBkcm9wZG93bkRpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8YSBocmVmPVwiI1wiIHJvbGU9XCJidXR0b25cIiBkYXRhLWJzLXRvZ2dsZT1cImRyb3Bkb3duXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCI+XG4gICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9tb3JlLnBuZ1wiIGNsYXNzPVwibW9yZVwiPlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPlxuICAgICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiaHR0cHM6Ly93d3cubmZ0ZXhwbG9yZXIuYXBwL2Fzc2V0LyR7bmZ0LmFzc2V0SWR9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+TkZURXhwbG9yZXI8L2E+PC9saT5cbiAgICAgICAgICAgICAgICA8bGk+PGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgaHJlZj1cImh0dHBzOi8vd3d3LnJhbmRnYWxsZXJ5LmNvbS9hbGdvLWNvbGxlY3Rpb24vP2FkZHJlc3M9JHtuZnQuYXNzZXRJZH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj5SYW5kR2FsbGVyeTwvYT48L2xpPlxuICAgICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiaHR0cHM6Ly9hbGdveG5mdC5jb20vYXNzZXQvJHtuZnQuYXNzZXRJZH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj5BTEdPeE5GVDwvYT48L2xpPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgIGA7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zbGVlcCgxMDApOyovXG4gICAgfVxuICB9XG5cbiAgbG9hZFZpc2libGVORlRzKGVudHJpZXMsIG9ic2VydmVyKSB7XG4gICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgaWYgKCFlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5mdERpdiA9IGVudHJ5LnRhcmdldDtcbiAgICAgIGNvbnN0IG5mdCA9IHRoaXMuY29sbGVjdGlvbi5uZnRzW25mdERpdi5kYXRhc2V0LmldO1xuXG4gICAgICBpZiAobmZ0LmxvYWRpbmcpIHtcbiAgICAgICAgLy9sb2FkaW5nIGhhdmUgYWxyZWFkeSBzdGFydGVkXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy9jb25zdCB1c2VQZXJhID0gdGhpcy5jb2xsZWN0aW9uTmFtZSA9PT0gXCJiYXRoZXJzXCIgPyB0cnVlIDogZmFsc2U7XG4gICAgICBjb25zdCB1c2VQZXJhID0gZmFsc2U7XG5cbiAgICAgIG5mdC5sb2FkKHRoaXMuYWxnb0luZGV4ZXIsIHVzZVBlcmEpLnRoZW4oKCkgPT4ge1xuICAgICAgICAvL2xvYWQgaW1hZ2VcbiAgICAgICAgY29uc3QgaW1hZ2UgPSBuZnREaXYucXVlcnlTZWxlY3RvcihcIi5uZnQtaW1nXCIpO1xuICAgICAgICBpbWFnZS5zcmMgPSBuZnQuaW1hZ2VVcmw7XG4gICAgICAgIGltYWdlLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICBuZnQuaGFuZGxlSW1hZ2VFcnJvcihpbWFnZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbk5hbWUgPT09IFwiY2FmZmVpbmVDYXJkc1wiKSB7XG4gICAgICAgICAgLy9kaXNwbGF5IHByb3BlcnRpZXNcbiAgICAgICAgICBsZXQgcHJvcGVydGllc05hbWVzID0gXCJcIjtcblxuICAgICAgICAgIGlmIChuZnQubWV0YWRhdGEucHJvcGVydGllcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wZXJ0eU5hbWUgaW4gbmZ0Lm1ldGFkYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgcHJvcGVydGllc05hbWVzICs9IGA8c3BhbiBjbGFzcz1cImN1c3RvbS1iYWRnZVwiPiR7cHJvcGVydHlOYW1lfTwvc3Bhbj4gYDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJvcGVydGllc05hbWVzICs9IFwiPGJyPlwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCByZXF1aXJlID0gXCJcIjtcblxuICAgICAgICAgIGlmIChuZnQubWV0YWRhdGEucmVxdWlyZSkge1xuICAgICAgICAgICAgbGV0IHJlcXVpcmVMaXN0ID0gW107XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVxdWlyZUtleSBpbiBuZnQubWV0YWRhdGEucmVxdWlyZSkge1xuICAgICAgICAgICAgICByZXF1aXJlTGlzdC5wdXNoKFxuICAgICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz1cImN1c3RvbS1iYWRnZSBsaWdodFwiPiR7cmVxdWlyZUtleX06ICR7bmZ0Lm1ldGFkYXRhLnJlcXVpcmVbcmVxdWlyZUtleV19PC9zcGFuPmBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVxdWlyZSA9IGA8c3BhbiBjbGFzcz1cImN1c3RvbS1iYWRnZSBkYXJrXCI+UmVxdWlyZTo8L3NwYW4+ICR7cmVxdWlyZUxpc3Quam9pbihcbiAgICAgICAgICAgICAgXCIgXCJcbiAgICAgICAgICAgICl9YDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZnREaXYucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIFwiLm5mdC1wcm9wZXJ0aWVzXCJcbiAgICAgICAgICApLmlubmVySFRNTCA9IGAke3Byb3BlcnRpZXNOYW1lc30gJHtyZXF1aXJlfTxicj5gO1xuXG4gICAgICAgICAgLy9sb2FkIGJhbGFuY2UgZnJvbSBidXJuaW5nIGFkZHJlc3NcbiAgICAgICAgICBjb25zdCBuZnRTcGVjaWFsRGl2ID0gbmZ0RGl2LnF1ZXJ5U2VsZWN0b3IoXCIubmZ0LXNwZWNpYWxcIik7XG4gICAgICAgICAgbmZ0U3BlY2lhbERpdi5pbm5lckhUTUwgPVxuICAgICAgICAgICAgJyYjMTI4MjkzOyA8c3BhbiBpZD1cImJ1cm4tY291bnRcIj4uLi48L3NwYW4+JztcblxuICAgICAgICAgIC8vYWRkIHRvb2x0aXBcbiAgICAgICAgICBuZnRTcGVjaWFsRGl2LmRhdGFzZXQuYnNUaXRsZSA9IFwiTnVtYmVyIG9mIGNhcmQgZGVmaW5pdGl2ZWx5IGJ1cm5lZFwiO1xuICAgICAgICAgIG5mdFNwZWNpYWxEaXYuZGF0YXNldC5ic1RvZ2dsZSA9IFwidG9vbHRpcFwiO1xuICAgICAgICAgIG5mdFNwZWNpYWxEaXYuZGF0YXNldC5ic0N1c3RvbUNsYXNzID0gXCJjdXN0b20tdG9vbHRpcFwiO1xuICAgICAgICAgIG5ldyB3aW5kb3cuYm9vdHN0cmFwLlRvb2x0aXAobmZ0U3BlY2lhbERpdik7XG5cbiAgICAgICAgICB0aGlzLmFsZ29kQ2xpZW50XG4gICAgICAgICAgICAuYWNjb3VudEFzc2V0SW5mb3JtYXRpb24obmZ0Lm1ldGFkYXRhLmJ1cm5fYWRkcmVzcywgbmZ0LmFzc2V0SWQpXG4gICAgICAgICAgICAuZG8oKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICBuZnRTcGVjaWFsRGl2LmlubmVySFRNTCA9IGAmIzEyODI5MzsgPHNwYW4gaWQ9XCJidXJuLWNvdW50XCI+JHtyZXN1bHRbXCJhc3NldC1ob2xkaW5nXCJdLmFtb3VudH08L3NwYW4+YDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgbmZ0LmxvYWRpbmcgPSB0cnVlO1xuXG4gICAgICB0aGlzLnNsZWVwKDEwMCk7XG4gICAgfSk7XG4gIH1cblxuICBzZWFyY2goZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ICE9PSBcIkVudGVyXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZWFyY2hTZW50ZW5jZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWU7XG5cbiAgICBpZiAoIXNlYXJjaFNlbnRlbmNlKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IHRoaXMudWkucXVlcnlTZWxlY3RvckFsbChcIi5uZnQtaXRlbVwiKTtcbiAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgaXRlbS5oaWRkZW4gPSBmYWxzZTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHNlYXJjaFRlcm1zID0gc2VhcmNoU2VudGVuY2Uuc3BsaXQoXCIgXCIpO1xuICAgIHNlYXJjaFRlcm1zID0gc2VhcmNoVGVybXMubWFwKCh3KSA9PiB3LnRyaW0oKS50b0xvd2VyQ2FzZSgpKTtcbiAgICBzZWFyY2hUZXJtcyA9IHNlYXJjaFRlcm1zLmZpbHRlcigodykgPT4gdyk7XG5cbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChjb25zdCBuZnQgb2YgdGhpcy5jb2xsZWN0aW9uLm5mdHMpIHtcbiAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICB0ZXJtTG9vcDogZm9yIChjb25zdCB0ZXJtIG9mIHNlYXJjaFRlcm1zKSB7XG4gICAgICAgIGlmIChuZnQubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pIHx8IG5mdC5hc3NldElkID09IHRlcm0pIHtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmZ0Lm1ldGFkYXRhICYmIG5mdC5tZXRhZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmZ0Lm1ldGFkYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAga2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybSkgfHxcbiAgICAgICAgICAgICAgbmZ0Lm1ldGFkYXRhLnByb3BlcnRpZXNba2V5XS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhayB0ZXJtTG9vcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgaXRlbUVsZW1lbnQgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoYCNuZnQtJHtpfWApO1xuICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgIGl0ZW1FbGVtZW50LmhpZGRlbiA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbUVsZW1lbnQuaGlkZGVuID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaSsrO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZpbHRlclR5cGUoZXZlbnQpIHtcbiAgICBjb25zdCBsb2FkaW5nID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2ZpbHRlci10eXBlLWxvYWRpbmdcIik7XG4gICAgbG9hZGluZy5oaWRkZW4gPSBmYWxzZTtcblxuICAgIGNvbnN0IHR5cGUgPSBldmVudD8uY3VycmVudFRhcmdldD8udmFsdWU7XG5cbiAgICBjb25zdCBpdGVtcyA9IHRoaXMudWkucXVlcnlTZWxlY3RvckFsbChcIi5uZnQtaXRlbVwiKTtcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgaXRlbS5oaWRkZW4gPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW0uaGlkZGVuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICghdHlwZSkge1xuICAgICAgbG9hZGluZy5oaWRkZW4gPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IG5mdCBvZiB0aGlzLmNvbGxlY3Rpb24ubmZ0cykge1xuICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG5cbiAgICAgIGlmICghbmZ0LmlzTG9hZGVkKSB7XG4gICAgICAgIGF3YWl0IG5mdC5sb2FkKHRoaXMuYWxnb0luZGV4ZXIpO1xuICAgICAgfVxuXG4gICAgICBpZiAobmZ0Lm1ldGFkYXRhPy5wcm9wZXJ0aWVzPy5bdHlwZV0pIHtcbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpdGVtRWxlbWVudCA9IHRoaXMudWkucXVlcnlTZWxlY3RvcihgI25mdC0ke2l9YCk7XG4gICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgaXRlbUVsZW1lbnQuaGlkZGVuID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtRWxlbWVudC5oaWRkZW4gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpKys7XG4gICAgfVxuXG4gICAgbG9hZGluZy5oaWRkZW4gPSB0cnVlO1xuICB9XG5cbiAgZmlsdGVyUGFja3MoZSkge1xuICAgIGNvbnN0IGNoZWNrZWQgPSBlLnRhcmdldD8uY2hlY2tlZDtcblxuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IG5mdCBvZiB0aGlzLmNvbGxlY3Rpb24ubmZ0cykge1xuICAgICAgY29uc3QgaXRlbUVsZW1lbnQgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoYCNuZnQtJHtpfWApO1xuXG4gICAgICBpZiAoY2hlY2tlZCl7XG4gICAgICAgIGlmICh0aGlzLmJhdGhlcnNXaXRoUGFja3M/LmluY2x1ZGVzKG5mdC5hc3NldElkKSkge1xuICAgICAgICAgIGl0ZW1FbGVtZW50LmhpZGRlbiA9ICFjaGVja2VkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1FbGVtZW50LmhpZGRlbiA9IGNoZWNrZWQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW1FbGVtZW50LmhpZGRlbiA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpKys7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZVBhZ2UiLCJjb25zdHJ1Y3RvciIsIndhbGxldENvbm5lY3QiLCJob2xkaW5ncyIsImFsZ29kQ2xpZW50IiwiYWxnb0luZGV4ZXIiLCJ0aGlzIiwiQnJvd3NlIiwiYXJncyIsInN1cGVyIiwiYXJndW1lbnRzIiwiY29sbGVjdGlvbk5hbWUiLCJsZW5ndGgiLCJ0aXRsZSIsInVpIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiY29sbGVjdGlvbiIsImJhdGhlcnNXaXRoUGFja3MiLCJsb2FkQWxsIiwic2xlZXAiLCJkZWxheVRpbWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJhc3luYyIsImxvYWRpbmdQIiwidGV4dENvbnRlbnQiLCJhcHBlbmQiLCJjYXJkQ29sbGVjdGlvbiIsImMiLCJuYW1lIiwibG9hZCIsImxvYWRQYWNrcyIsInBhY2tzIiwibWFwIiwicCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsInJlbW92ZSIsImRpc3BsYXlMaXN0IiwibmZ0cyIsImVtcHR5RGl2IiwiZmlsdGVyRGl2IiwicXVlcnlTZWxlY3RvciIsInR5cGVEcm9wZG93biIsInBhY2tzQ2hlY2tib3giLCJhZGRFdmVudExpc3RlbmVyIiwic2VhcmNoIiwiYmluZCIsImZpbHRlclBhY2tzIiwiZmlsdGVyVHlwZSIsImxpc3RWaWV3IiwiY2xhc3NOYW1lIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImxvYWRWaXNpYmxlTkZUcyIsInJvb3QiLCJyb290TWFyZ2luIiwidGhyZXNob2xkIiwiaSIsIm5mdCIsIm5mdERpdiIsImlkIiwiZGF0YXNldCIsInBsYWNlSG9sZGVyQ2xhc3MiLCJhc3NldElkIiwidG90YWwiLCJpbmNsdWRlcyIsIm5mdFNwZWNpYWxEaXYiLCJic1RpdGxlIiwiYnNUb2dnbGUiLCJic0N1c3RvbUNsYXNzIiwid2luZG93IiwiYm9vdHN0cmFwIiwiVG9vbHRpcCIsIm9ic2VydmUiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJ0YXJnZXQiLCJsb2FkaW5nIiwidGhlbiIsImltYWdlIiwic3JjIiwiaW1hZ2VVcmwiLCJoaWRkZW4iLCJoYW5kbGVJbWFnZUVycm9yIiwicHJvcGVydGllc05hbWVzIiwibWV0YWRhdGEiLCJwcm9wZXJ0aWVzIiwicHJvcGVydHlOYW1lIiwicmVxdWlyZSIsInJlcXVpcmVMaXN0IiwicmVxdWlyZUtleSIsInB1c2giLCJqb2luIiwiYWNjb3VudEFzc2V0SW5mb3JtYXRpb24iLCJidXJuX2FkZHJlc3MiLCJkbyIsInJlc3VsdCIsImFtb3VudCIsImV2ZW50Iiwia2V5Iiwic2VhcmNoU2VudGVuY2UiLCJjdXJyZW50VGFyZ2V0IiwidmFsdWUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXRlbSIsInNlYXJjaFRlcm1zIiwic3BsaXQiLCJ3IiwidHJpbSIsInRvTG93ZXJDYXNlIiwiZmlsdGVyIiwiZm91bmQiLCJ0ZXJtTG9vcCIsInRlcm0iLCJ0eXBlIiwiaXNMb2FkZWQiLCJlIiwiY2hlY2tlZCIsIml0ZW1FbGVtZW50Il0sInNvdXJjZVJvb3QiOiIifQ==