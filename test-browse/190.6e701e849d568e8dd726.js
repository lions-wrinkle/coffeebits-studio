"use strict";(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[190,998],{6998:(t,e,s)=>{s.r(e),s.d(e,{BasePage:()=>a});class a{constructor(t,e,s,a){this.walletConnect=t,this.algodClient=s,this.algoIndexer=a,this.holdings=e}}},4190:(t,e,s)=>{s.r(e),s.d(e,{Cards:()=>l});var a=s(6998),i=s(7304),n=s(5190);class l extends a.BasePage{constructor(){super(...arguments),this.collectionName="bathers",this.title="","caffeineCards"===this.collectionName?this.title="Caffeine Cards":"bathers"===this.collectionName&&(this.title="Bathers"),this.ui=document.createElement("div"),this.ui.innerHTML=`\n    <h1>${this.title}</h1>\n    <p class="dark-text">Browse all ${this.title}</p>\n    `,this.collection,this.bathersWithPacks,this.loadAllCards()}sleep(t){return new Promise((e=>setTimeout(e,t)))}async loadAllCards(){const t=document.createElement("p");t.textContent=`Loading ${this.title}...`,this.ui.append(t);const e=n.Z.filter((t=>t.name===this.collectionName))[0];if(this.collection=new i.tf([e]),await this.collection.load(this.algoIndexer),"bathers"===this.collectionName){const{loadPacks:t}=await Promise.all([s.e(393),s.e(298)]).then(s.bind(s,5298));try{const e=await t(this.holdings);e&&e.claimablePacks.length>0&&(this.bathersWithPacks=e.claimablePacks.map((t=>t[0])))}catch(t){console.error(t)}}t.remove(),this.displayList()}displayList(){if(!this.collection.nfts.length){const t=document.createElement("div");return t.innerHTML='<div class="dark-text mb-5">No assets</div>',void this.ui.append(t)}const t=document.createElement("div");t.className="row row-cols-2 row-cols-md-3 row-cols-lg-4 gy-4 mb-5",this.ui.append(t);let e=new IntersectionObserver(this.loadVisibleNFTs.bind(this),{root:null,rootMargin:"0px",threshold:0}),s=0;for(const a of this.collection.nfts){const i=document.createElement("div");if(i.id=`nft-${a.assetId}`,i.className="col",i.dataset.i=s,i.innerHTML=`\n          <div class="list-item h-100 d-flex flex-column">\n              <div class="ratio ratio-1x1 placeholder-card">\n                <img src="assets/default-card.png" class="nft-img img-fluid" loading="lazy">\n              </div>\n              <div class="list-item-text flex-fill d-flex flex-column">\n                  <h4>${a.name}</h4>\n                  <div class="d-flex justify-content-between">\n                      <span class="asset-id">${a.assetId}</span>\n                      ${a.total}\n                  </div>\n                  <div class="mt-3 nft-properties">\n                  </div>\n                  <div class="flex-fill d-flex justify-content-between align-items-end mt-2">\n                        <div class="nft-special"></div>\n                        <div class="dropdown"></div>\n                  </div>\n              </div>\n          </div>\n      `,i.querySelector(".dropdown").innerHTML=`\n          <a href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">\n          <img src="assets/more.png" class="more">\n          </a>\n          <ul class="dropdown-menu">\n              <li><a class="dropdown-item" href="https://www.nftexplorer.app/asset/${a.assetId}" target="_blank">NFTExplorer</a></li>\n              <li><a class="dropdown-item" href="https://www.randgallery.com/algo-collection/?address=${a.assetId}" target="_blank">RandGallery</a></li>\n              <li><a class="dropdown-item" href="https://algoxnft.com/asset/${a.assetId}" target="_blank">ALGOxNFT</a></li>\n          </ul>\n    `,"bathers"===this.collectionName&&this.bathersWithPacks&&this.bathersWithPacks.includes(a.assetId)){const t=i.querySelector(".nft-special");t.dataset.bsTitle="The pack tied to this Bather has not been opened yet",t.dataset.bsToggle="tooltip",t.dataset.bsCustomClass="custom-tooltip",t.innerHTML='<img src="assets/pack-icon.png">',new window.bootstrap.Tooltip(t)}t.append(i),s++,e.observe(i)}}loadVisibleNFTs(t,e){t.forEach((t=>{if(!t.isIntersecting)return;const e=t.target,s=this.collection.nfts[e.dataset.i];s.loading||(s.load(this.algoIndexer).then((()=>{const t=e.querySelector(".nft-img");if(t.src=s.imageUrl,s.handleImageError(t),"caffeineCards"===this.collectionName){let t="";if(s.metadata.properties){for(const e in s.metadata.properties)t+=`<span class="custom-badge">${e}</span> `;t+="<br>"}let a="";if(s.metadata.require){let t=[];for(const e in s.metadata.require)t.push(`<span class="custom-badge light">${e}: ${s.metadata.require[e]}</span>`);a=`<span class="custom-badge dark">Require:</span> ${t.join(" ")}`}e.querySelector(".nft-properties").innerHTML=`${t} ${a}<br>`;const i=e.querySelector(".nft-special");i.innerHTML='&#128293; <span id="burn-count">...</span>',i.dataset.bsTitle="Number of card definitively burned",i.dataset.bsToggle="tooltip",i.dataset.bsCustomClass="custom-tooltip",new window.bootstrap.Tooltip(i),this.algodClient.accountAssetInformation(s.metadata.burn_address,s.assetId).do().then((t=>{i.innerHTML=`&#128293; <span id="burn-count">${t["asset-holding"].amount}</span>`}))}})),s.loading=!0,this.sleep(100))}))}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QnpELEtBQUtGLFlBQ0Z1Rix3QkFBd0JwQyxFQUFJNEIsU0FBU1MsYUFBY3JDLEVBQUlHLFNBQ3ZEbUMsS0FDQWhCLE1BQU01QyxJQUNMOEIsRUFBY2hELFVBQVksbUNBQW1Da0IsRUFBTyxpQkFBaUI2RCxlQUFlLEdBRTFHLEtBS0Z2QyxFQUFJcUIsU0FBVSxFQUVkdEUsS0FBS2EsTUFBTSxLQUFJLEdBRW5CLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkaW8vLi9zcmMvcGFnZXMvYmFzZS5qcyIsIndlYnBhY2s6Ly9zdHVkaW8vLi9zcmMvcGFnZXMvY2FyZHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5leHBvcnQgY2xhc3MgQmFzZVBhZ2Uge1xuXG4gICAgY29uc3RydWN0b3Iod2FsbGV0Q29ubmVjdCwgaG9sZGluZ3MsIGFsZ29kQ2xpZW50LCBhbGdvSW5kZXhlcil7XG5cbiAgICAgICAgdGhpcy53YWxsZXRDb25uZWN0ID0gd2FsbGV0Q29ubmVjdDtcbiAgICAgICAgdGhpcy5hbGdvZENsaWVudCA9IGFsZ29kQ2xpZW50O1xuICAgICAgICB0aGlzLmFsZ29JbmRleGVyID0gYWxnb0luZGV4ZXI7XG4gICAgICAgIHRoaXMuaG9sZGluZ3MgPSBob2xkaW5ncztcblxuICAgICAgICBcblxuICAgIH1cblxufSIsImltcG9ydCB7IEJhc2VQYWdlIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgTkZUQ29sbGVjdGlvbiB9IGZyb20gXCJhbGdvLW5mdC11dGlsc1wiO1xuXG5pbXBvcnQgY29sbGVjdGlvbnMgZnJvbSBcIi4uL2NvbGxlY3Rpb25zLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDYXJkcyBleHRlbmRzIEJhc2VQYWdlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcblxuICAgIC8vdGhpcy5jb2xsZWN0aW9uTmFtZSA9IFwiY2FmZmVpbmVDYXJkc1wiO1xuICAgIHRoaXMuY29sbGVjdGlvbk5hbWUgPSBcImJhdGhlcnNcIjtcblxuICAgIHRoaXMudGl0bGUgPSBcIlwiO1xuICAgIGlmICh0aGlzLmNvbGxlY3Rpb25OYW1lID09PSBcImNhZmZlaW5lQ2FyZHNcIikge1xuICAgICAgdGhpcy50aXRsZSA9IFwiQ2FmZmVpbmUgQ2FyZHNcIjtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29sbGVjdGlvbk5hbWUgPT09IFwiYmF0aGVyc1wiKSB7XG4gICAgICB0aGlzLnRpdGxlID0gXCJCYXRoZXJzXCI7XG4gICAgfVxuXG4gICAgdGhpcy51aSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICB0aGlzLnVpLmlubmVySFRNTCA9IGBcbiAgICA8aDE+JHt0aGlzLnRpdGxlfTwvaDE+XG4gICAgPHAgY2xhc3M9XCJkYXJrLXRleHRcIj5Ccm93c2UgYWxsICR7dGhpcy50aXRsZX08L3A+XG4gICAgYDtcblxuICAgIHRoaXMuY29sbGVjdGlvbjtcblxuICAgIHRoaXMuYmF0aGVyc1dpdGhQYWNrcztcblxuICAgIHRoaXMubG9hZEFsbENhcmRzKCk7XG4gIH1cblxuICBzbGVlcChkZWxheVRpbWUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXlUaW1lKSk7XG4gIH1cblxuICBhc3luYyBsb2FkQWxsQ2FyZHMoKSB7XG4gICAgY29uc3QgbG9hZGluZ1AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBsb2FkaW5nUC50ZXh0Q29udGVudCA9IGBMb2FkaW5nICR7dGhpcy50aXRsZX0uLi5gO1xuICAgIHRoaXMudWkuYXBwZW5kKGxvYWRpbmdQKTtcblxuICAgIGNvbnN0IGNhcmRDb2xsZWN0aW9uID0gY29sbGVjdGlvbnMuZmlsdGVyKFxuICAgICAgKGMpID0+IGMubmFtZSA9PT0gdGhpcy5jb2xsZWN0aW9uTmFtZVxuICAgIClbMF07XG5cbiAgICB0aGlzLmNvbGxlY3Rpb24gPSBuZXcgTkZUQ29sbGVjdGlvbihbY2FyZENvbGxlY3Rpb25dKTtcbiAgICBhd2FpdCB0aGlzLmNvbGxlY3Rpb24ubG9hZCh0aGlzLmFsZ29JbmRleGVyKTtcblxuICAgIC8vbG9hZCBwYWNrc1xuICAgIGlmICh0aGlzLmNvbGxlY3Rpb25OYW1lID09PSBcImJhdGhlcnNcIikge1xuICAgICAgY29uc3QgeyBsb2FkUGFja3MgfSA9IGF3YWl0IGltcG9ydChcIi4vcGFja3MuanNcIik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxvYWRQYWNrcyh0aGlzLmhvbGRpbmdzKTtcblxuICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5jbGFpbWFibGVQYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5iYXRoZXJzV2l0aFBhY2tzID0gcmVzdWx0LmNsYWltYWJsZVBhY2tzLm1hcCgocCkgPT4gcFswXSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbG9hZGluZ1AucmVtb3ZlKCk7XG5cbiAgICB0aGlzLmRpc3BsYXlMaXN0KCk7XG4gIH1cblxuICBkaXNwbGF5TGlzdCgpIHtcbiAgICBpZiAoIXRoaXMuY29sbGVjdGlvbi5uZnRzLmxlbmd0aCkge1xuICAgICAgY29uc3QgZW1wdHlEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZW1wdHlEaXYuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJkYXJrLXRleHQgbWItNVwiPk5vIGFzc2V0czwvZGl2Pic7XG5cbiAgICAgIHRoaXMudWkuYXBwZW5kKGVtcHR5RGl2KTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGxpc3RWaWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBsaXN0Vmlldy5jbGFzc05hbWUgPSBcInJvdyByb3ctY29scy0yIHJvdy1jb2xzLW1kLTMgcm93LWNvbHMtbGctNCBneS00IG1iLTVcIjtcbiAgICB0aGlzLnVpLmFwcGVuZChsaXN0Vmlldyk7XG5cbiAgICAvL2xvYWQgb25seSB3aGVuIGVsZW1lbnQgaXMgdmlzaWJsZVxuICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgcm9vdDogbnVsbCwgLy9icm93c2VyIHZpZXdwb3J0XG4gICAgICByb290TWFyZ2luOiBcIjBweFwiLFxuICAgICAgdGhyZXNob2xkOiAwLjAsXG4gICAgfTtcblxuICAgIGxldCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIHRoaXMubG9hZFZpc2libGVORlRzLmJpbmQodGhpcyksXG4gICAgICBvcHRpb25zXG4gICAgKTtcblxuICAgIC8vZGlzcGxheSBuZnRzXG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoY29uc3QgbmZ0IG9mIHRoaXMuY29sbGVjdGlvbi5uZnRzKSB7XG4gICAgICBjb25zdCBuZnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgbmZ0RGl2LmlkID0gYG5mdC0ke25mdC5hc3NldElkfWA7XG4gICAgICBuZnREaXYuY2xhc3NOYW1lID0gXCJjb2xcIjtcbiAgICAgIG5mdERpdi5kYXRhc2V0LmkgPSBpO1xuXG4gICAgICBuZnREaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LWl0ZW0gaC0xMDAgZC1mbGV4IGZsZXgtY29sdW1uXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyYXRpbyByYXRpby0xeDEgcGxhY2Vob2xkZXItY2FyZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2RlZmF1bHQtY2FyZC5wbmdcIiBjbGFzcz1cIm5mdC1pbWcgaW1nLWZsdWlkXCIgbG9hZGluZz1cImxhenlcIj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LWl0ZW0tdGV4dCBmbGV4LWZpbGwgZC1mbGV4IGZsZXgtY29sdW1uXCI+XG4gICAgICAgICAgICAgICAgICA8aDQ+JHtuZnQubmFtZX08L2g0PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlblwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYXNzZXQtaWRcIj4ke25mdC5hc3NldElkfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAke25mdC50b3RhbH1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm10LTMgbmZ0LXByb3BlcnRpZXNcIj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtZmlsbCBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtZW5kIG10LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJuZnQtc3BlY2lhbFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyb3Bkb3duXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuXG4gICAgICAvL2FkZCBkcm9wZG93biB3aXRoIG9wdGlvbnNcbiAgICAgIGNvbnN0IGRyb3Bkb3duRGl2ID0gbmZ0RGl2LnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcGRvd25cIik7XG5cbiAgICAgIGRyb3Bkb3duRGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8YSBocmVmPVwiI1wiIHJvbGU9XCJidXR0b25cIiBkYXRhLWJzLXRvZ2dsZT1cImRyb3Bkb3duXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvbW9yZS5wbmdcIiBjbGFzcz1cIm1vcmVcIj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPlxuICAgICAgICAgICAgICA8bGk+PGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgaHJlZj1cImh0dHBzOi8vd3d3Lm5mdGV4cGxvcmVyLmFwcC9hc3NldC8ke25mdC5hc3NldElkfVwiIHRhcmdldD1cIl9ibGFua1wiPk5GVEV4cGxvcmVyPC9hPjwvbGk+XG4gICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiaHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz0ke25mdC5hc3NldElkfVwiIHRhcmdldD1cIl9ibGFua1wiPlJhbmRHYWxsZXJ5PC9hPjwvbGk+XG4gICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiaHR0cHM6Ly9hbGdveG5mdC5jb20vYXNzZXQvJHtuZnQuYXNzZXRJZH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj5BTEdPeE5GVDwvYT48L2xpPlxuICAgICAgICAgIDwvdWw+XG4gICAgYDtcblxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25OYW1lID09PSBcImJhdGhlcnNcIiAmJlxuICAgICAgICB0aGlzLmJhdGhlcnNXaXRoUGFja3MgJiZcbiAgICAgICAgdGhpcy5iYXRoZXJzV2l0aFBhY2tzLmluY2x1ZGVzKG5mdC5hc3NldElkKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IG5mdFNwZWNpYWxEaXYgPSBuZnREaXYucXVlcnlTZWxlY3RvcihcIi5uZnQtc3BlY2lhbFwiKTtcbiAgICAgICAgbmZ0U3BlY2lhbERpdi5kYXRhc2V0LmJzVGl0bGUgPVxuICAgICAgICAgIFwiVGhlIHBhY2sgdGllZCB0byB0aGlzIEJhdGhlciBoYXMgbm90IGJlZW4gb3BlbmVkIHlldFwiO1xuICAgICAgICBuZnRTcGVjaWFsRGl2LmRhdGFzZXQuYnNUb2dnbGUgPSBcInRvb2x0aXBcIjtcbiAgICAgICAgbmZ0U3BlY2lhbERpdi5kYXRhc2V0LmJzQ3VzdG9tQ2xhc3MgPSBcImN1c3RvbS10b29sdGlwXCI7XG4gICAgICAgIG5mdFNwZWNpYWxEaXYuaW5uZXJIVE1MID0gJzxpbWcgc3JjPVwiYXNzZXRzL3BhY2staWNvbi5wbmdcIj4nO1xuXG4gICAgICAgIG5ldyB3aW5kb3cuYm9vdHN0cmFwLlRvb2x0aXAobmZ0U3BlY2lhbERpdik7XG4gICAgICB9XG5cbiAgICAgIGxpc3RWaWV3LmFwcGVuZChuZnREaXYpO1xuXG4gICAgICBpKys7XG5cbiAgICAgIG9ic2VydmVyLm9ic2VydmUobmZ0RGl2KTtcblxuICAgICAgLypuZnQubG9hZCh0aGlzLmFsZ29JbmRleGVyKS50aGVuKCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2cobmZ0RGl2KTtcblxuICAgICAgICBsZXQgcHJvcGVydGllc05hbWVzID0gXCJcIjtcblxuICAgICAgICBpZiAobmZ0Lm1ldGFkYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHByb3BlcnR5TmFtZSBpbiBuZnQubWV0YWRhdGEucHJvcGVydGllcykge1xuICAgICAgICAgICAgcHJvcGVydGllc05hbWVzICs9IGA8c3BhbiBjbGFzcz1cImN1c3RvbS1iYWRnZVwiPiR7cHJvcGVydHlOYW1lfTwvc3Bhbj4gYDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwcm9wZXJ0aWVzTmFtZXMgKz0gXCI8YnI+XCI7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVxdWlyZSA9IFwiXCI7XG5cbiAgICAgICAgaWYgKG5mdC5tZXRhZGF0YS5yZXF1aXJlKSB7XG4gICAgICAgICAgbGV0IHJlcXVpcmVMaXN0ID0gW107XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IHJlcXVpcmVLZXkgaW4gbmZ0Lm1ldGFkYXRhLnJlcXVpcmUpIHtcbiAgICAgICAgICAgIHJlcXVpcmVMaXN0LnB1c2goXG4gICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz1cImN1c3RvbS1iYWRnZSBsaWdodFwiPiR7cmVxdWlyZUtleX06ICR7bmZ0Lm1ldGFkYXRhLnJlcXVpcmVbcmVxdWlyZUtleV19PC9zcGFuPmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVxdWlyZSA9IGA8c3BhbiBjbGFzcz1cImN1c3RvbS1iYWRnZSBkYXJrXCI+UmVxdWlyZTo8L3NwYW4+ICR7cmVxdWlyZUxpc3Quam9pbihcbiAgICAgICAgICAgIFwiIFwiXG4gICAgICAgICAgKX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgbmZ0RGl2LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgXCIubmZ0LXByb3BlcnRpZXNcIlxuICAgICAgICApLmlubmVySFRNTCA9IGAke3Byb3BlcnRpZXNOYW1lc30gJHtyZXF1aXJlfTxicj5gO1xuXG4gICAgICAgIC8vbG9hZCBpbWFnZVxuICAgICAgICBjb25zdCBpbWFnZSA9IG5mdERpdi5xdWVyeVNlbGVjdG9yKFwiLm5mdC1pbWdcIik7XG4gICAgICAgIGltYWdlLnNyYyA9IG5mdC5pbWFnZVVybDtcbiAgICAgICAgbmZ0LmhhbmRsZUltYWdlRXJyb3IoaW1hZ2UpO1xuXG4gICAgICAgIC8vbG9hZCBiYWxhbmNlIGZyb20gYnVybmluZyBhZGRyZXNzXG4gICAgICAgIGNvbnN0IGJ1cm5Db3VudFNwYW4gPSBuZnREaXYucXVlcnlTZWxlY3RvcihcIiNidXJuLWNvdW50XCIpO1xuICAgICAgICBidXJuQ291bnRTcGFuLnRleHRDb250ZW50ID0gXCIuLi5cIjtcblxuICAgICAgICB0aGlzLmFsZ29kQ2xpZW50XG4gICAgICAgICAgLmFjY291bnRBc3NldEluZm9ybWF0aW9uKG5mdC5tZXRhZGF0YS5idXJuX2FkZHJlc3MsIG5mdC5hc3NldElkKVxuICAgICAgICAgIC5kbygpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgYnVybkNvdW50U3Bhbi50ZXh0Q29udGVudCA9IGAke3Jlc3VsdFtcImFzc2V0LWhvbGRpbmdcIl0uYW1vdW50fWA7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgLy9hZGQgZHJvcGRvd24gd2l0aCBvcHRpb25zXG4gICAgICAgIGNvbnN0IGRyb3Bkb3duRGl2ID0gbmZ0RGl2LnF1ZXJ5U2VsZWN0b3IoXCIuZHJvcGRvd25cIik7XG5cbiAgICAgICAgZHJvcGRvd25EaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiByb2xlPVwiYnV0dG9uXCIgZGF0YS1icy10b2dnbGU9XCJkcm9wZG93blwiIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiPlxuICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvbW9yZS5wbmdcIiBjbGFzcz1cIm1vcmVcIj5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIj5cbiAgICAgICAgICAgICAgICA8bGk+PGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgaHJlZj1cImh0dHBzOi8vd3d3Lm5mdGV4cGxvcmVyLmFwcC9hc3NldC8ke25mdC5hc3NldElkfVwiIHRhcmdldD1cIl9ibGFua1wiPk5GVEV4cGxvcmVyPC9hPjwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPjxhIGNsYXNzPVwiZHJvcGRvd24taXRlbVwiIGhyZWY9XCJodHRwczovL3d3dy5yYW5kZ2FsbGVyeS5jb20vYWxnby1jb2xsZWN0aW9uLz9hZGRyZXNzPSR7bmZ0LmFzc2V0SWR9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+UmFuZEdhbGxlcnk8L2E+PC9saT5cbiAgICAgICAgICAgICAgICA8bGk+PGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgaHJlZj1cImh0dHBzOi8vYWxnb3huZnQuY29tL2Fzc2V0LyR7bmZ0LmFzc2V0SWR9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+QUxHT3hORlQ8L2E+PC9saT5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICBgO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2xlZXAoMTAwKTsqL1xuICAgIH1cbiAgfVxuXG4gIGxvYWRWaXNpYmxlTkZUcyhlbnRyaWVzLCBvYnNlcnZlcikge1xuICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgIGlmICghZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuZnREaXYgPSBlbnRyeS50YXJnZXQ7XG4gICAgICBjb25zdCBuZnQgPSB0aGlzLmNvbGxlY3Rpb24ubmZ0c1tuZnREaXYuZGF0YXNldC5pXTtcblxuICAgICAgaWYgKG5mdC5sb2FkaW5nKSB7XG4gICAgICAgIC8vbG9hZGluZyBoYXZlIGFscmVhZHkgc3RhcnRlZFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG5mdC5sb2FkKHRoaXMuYWxnb0luZGV4ZXIpLnRoZW4oKCkgPT4ge1xuICAgICAgICAvL2xvYWQgaW1hZ2VcbiAgICAgICAgY29uc3QgaW1hZ2UgPSBuZnREaXYucXVlcnlTZWxlY3RvcihcIi5uZnQtaW1nXCIpO1xuICAgICAgICBpbWFnZS5zcmMgPSBuZnQuaW1hZ2VVcmw7XG4gICAgICAgIG5mdC5oYW5kbGVJbWFnZUVycm9yKGltYWdlKTtcblxuICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9uTmFtZSA9PT0gXCJjYWZmZWluZUNhcmRzXCIpIHtcbiAgICAgICAgICAvL2Rpc3BsYXkgcHJvcGVydGllc1xuICAgICAgICAgIGxldCBwcm9wZXJ0aWVzTmFtZXMgPSBcIlwiO1xuXG4gICAgICAgICAgaWYgKG5mdC5tZXRhZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHByb3BlcnR5TmFtZSBpbiBuZnQubWV0YWRhdGEucHJvcGVydGllcykge1xuICAgICAgICAgICAgICBwcm9wZXJ0aWVzTmFtZXMgKz0gYDxzcGFuIGNsYXNzPVwiY3VzdG9tLWJhZGdlXCI+JHtwcm9wZXJ0eU5hbWV9PC9zcGFuPiBgO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcm9wZXJ0aWVzTmFtZXMgKz0gXCI8YnI+XCI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IHJlcXVpcmUgPSBcIlwiO1xuXG4gICAgICAgICAgaWYgKG5mdC5tZXRhZGF0YS5yZXF1aXJlKSB7XG4gICAgICAgICAgICBsZXQgcmVxdWlyZUxpc3QgPSBbXTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCByZXF1aXJlS2V5IGluIG5mdC5tZXRhZGF0YS5yZXF1aXJlKSB7XG4gICAgICAgICAgICAgIHJlcXVpcmVMaXN0LnB1c2goXG4gICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiY3VzdG9tLWJhZGdlIGxpZ2h0XCI+JHtyZXF1aXJlS2V5fTogJHtuZnQubWV0YWRhdGEucmVxdWlyZVtyZXF1aXJlS2V5XX08L3NwYW4+YFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXF1aXJlID0gYDxzcGFuIGNsYXNzPVwiY3VzdG9tLWJhZGdlIGRhcmtcIj5SZXF1aXJlOjwvc3Bhbj4gJHtyZXF1aXJlTGlzdC5qb2luKFxuICAgICAgICAgICAgICBcIiBcIlxuICAgICAgICAgICAgKX1gO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG5mdERpdi5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgXCIubmZ0LXByb3BlcnRpZXNcIlxuICAgICAgICAgICkuaW5uZXJIVE1MID0gYCR7cHJvcGVydGllc05hbWVzfSAke3JlcXVpcmV9PGJyPmA7XG5cbiAgICAgICAgICAvL2xvYWQgYmFsYW5jZSBmcm9tIGJ1cm5pbmcgYWRkcmVzc1xuICAgICAgICAgIGNvbnN0IG5mdFNwZWNpYWxEaXYgPSBuZnREaXYucXVlcnlTZWxlY3RvcihcIi5uZnQtc3BlY2lhbFwiKTtcbiAgICAgICAgICBuZnRTcGVjaWFsRGl2LmlubmVySFRNTCA9XG4gICAgICAgICAgICAnJiMxMjgyOTM7IDxzcGFuIGlkPVwiYnVybi1jb3VudFwiPi4uLjwvc3Bhbj4nO1xuXG4gICAgICAgICAgLy9hZGQgdG9vbHRpcFxuICAgICAgICAgIG5mdFNwZWNpYWxEaXYuZGF0YXNldC5ic1RpdGxlID0gXCJOdW1iZXIgb2YgY2FyZCBkZWZpbml0aXZlbHkgYnVybmVkXCI7XG4gICAgICAgICAgbmZ0U3BlY2lhbERpdi5kYXRhc2V0LmJzVG9nZ2xlID0gXCJ0b29sdGlwXCI7XG4gICAgICAgICAgbmZ0U3BlY2lhbERpdi5kYXRhc2V0LmJzQ3VzdG9tQ2xhc3MgPSBcImN1c3RvbS10b29sdGlwXCI7XG4gICAgICAgICAgbmV3IHdpbmRvdy5ib290c3RyYXAuVG9vbHRpcChuZnRTcGVjaWFsRGl2KTtcblxuICAgICAgICAgIHRoaXMuYWxnb2RDbGllbnRcbiAgICAgICAgICAgIC5hY2NvdW50QXNzZXRJbmZvcm1hdGlvbihuZnQubWV0YWRhdGEuYnVybl9hZGRyZXNzLCBuZnQuYXNzZXRJZClcbiAgICAgICAgICAgIC5kbygpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgIG5mdFNwZWNpYWxEaXYuaW5uZXJIVE1MID0gYCYjMTI4MjkzOyA8c3BhbiBpZD1cImJ1cm4tY291bnRcIj4ke3Jlc3VsdFtcImFzc2V0LWhvbGRpbmdcIl0uYW1vdW50fTwvc3Bhbj5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBcbiAgICAgIH0pO1xuXG4gICAgICBuZnQubG9hZGluZyA9IHRydWU7XG5cbiAgICAgIHRoaXMuc2xlZXAoMTAwKTtcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VQYWdlIiwiY29uc3RydWN0b3IiLCJ3YWxsZXRDb25uZWN0IiwiaG9sZGluZ3MiLCJhbGdvZENsaWVudCIsImFsZ29JbmRleGVyIiwidGhpcyIsIkNhcmRzIiwic3VwZXIiLCJhcmd1bWVudHMiLCJjb2xsZWN0aW9uTmFtZSIsInRpdGxlIiwidWkiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJjb2xsZWN0aW9uIiwiYmF0aGVyc1dpdGhQYWNrcyIsImxvYWRBbGxDYXJkcyIsInNsZWVwIiwiZGVsYXlUaW1lIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiYXN5bmMiLCJsb2FkaW5nUCIsInRleHRDb250ZW50IiwiYXBwZW5kIiwiY2FyZENvbGxlY3Rpb24iLCJjIiwibmFtZSIsImxvYWQiLCJsb2FkUGFja3MiLCJyZXN1bHQiLCJjbGFpbWFibGVQYWNrcyIsImxlbmd0aCIsIm1hcCIsInAiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJyZW1vdmUiLCJkaXNwbGF5TGlzdCIsIm5mdHMiLCJlbXB0eURpdiIsImxpc3RWaWV3IiwiY2xhc3NOYW1lIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImxvYWRWaXNpYmxlTkZUcyIsImJpbmQiLCJyb290Iiwicm9vdE1hcmdpbiIsInRocmVzaG9sZCIsImkiLCJuZnQiLCJuZnREaXYiLCJpZCIsImFzc2V0SWQiLCJkYXRhc2V0IiwidG90YWwiLCJxdWVyeVNlbGVjdG9yIiwiaW5jbHVkZXMiLCJuZnRTcGVjaWFsRGl2IiwiYnNUaXRsZSIsImJzVG9nZ2xlIiwiYnNDdXN0b21DbGFzcyIsIndpbmRvdyIsImJvb3RzdHJhcCIsIlRvb2x0aXAiLCJvYnNlcnZlIiwiZW50cmllcyIsImZvckVhY2giLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwidGFyZ2V0IiwibG9hZGluZyIsInRoZW4iLCJpbWFnZSIsInNyYyIsImltYWdlVXJsIiwiaGFuZGxlSW1hZ2VFcnJvciIsInByb3BlcnRpZXNOYW1lcyIsIm1ldGFkYXRhIiwicHJvcGVydGllcyIsInByb3BlcnR5TmFtZSIsInJlcXVpcmUiLCJyZXF1aXJlTGlzdCIsInJlcXVpcmVLZXkiLCJwdXNoIiwiam9pbiIsImFjY291bnRBc3NldEluZm9ybWF0aW9uIiwiYnVybl9hZGRyZXNzIiwiZG8iLCJhbW91bnQiXSwic291cmNlUm9vdCI6IiJ9