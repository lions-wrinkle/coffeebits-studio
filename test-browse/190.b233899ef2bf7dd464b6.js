"use strict";(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[190,998],{6998:(t,e,s)=>{s.r(e),s.d(e,{BasePage:()=>a});class a{constructor(t,e,s,a){this.walletConnect=t,this.algodClient=s,this.algoIndexer=a,this.holdings=e}}},4190:(t,e,s)=>{s.r(e),s.d(e,{Cards:()=>l});var a=s(6998),n=s(7304),i=s(5190);class l extends a.BasePage{constructor(){super(...arguments),this.collectionName="bathers",this.title="","caffeineCards"===this.collectionName?this.title="Caffeine Cards":"bathers"===this.collectionName&&(this.title="Bathers"),this.ui=document.createElement("div"),this.ui.innerHTML=`\n    <h1>${this.title}</h1>\n    <p class="dark-text">Browse all ${this.title}</p>\n    `,this.collection,this.bathersWithPacks,this.loadAllCards()}sleep(t){return new Promise((e=>setTimeout(e,t)))}async loadAllCards(){const t=document.createElement("p");t.textContent=`Loading ${this.title}...`,this.ui.append(t);const e=i.Z.filter((t=>t.name===this.collectionName))[0];if(this.collection=new n.tf([e]),await this.collection.load(this.algoIndexer),"bathers"===this.collectionName){const{loadPacks:t}=await Promise.all([s.e(393),s.e(298)]).then(s.bind(s,5298));try{const e=await t();e&&e.length>0&&(this.bathersWithPacks=e.map((t=>t[0])))}catch(t){console.error(t)}}t.remove(),this.displayList()}displayList(){if(!this.collection.nfts.length){const t=document.createElement("div");return t.innerHTML='<div class="dark-text mb-5">No assets</div>',void this.ui.append(t)}const t=document.createElement("div");t.className="row row-cols-2 row-cols-md-3 row-cols-lg-4 gy-4 mb-5",this.ui.append(t);let e=new IntersectionObserver(this.loadVisibleNFTs.bind(this),{root:null,rootMargin:"0px",threshold:0}),s=0;for(const a of this.collection.nfts){const n=document.createElement("div");if(n.id=`nft-${a.assetId}`,n.className="col",n.dataset.i=s,n.innerHTML=`\n          <div class="list-item h-100 d-flex flex-column">\n              <div class="ratio ratio-1x1 placeholder-card">\n                <img src="assets/default-card.png" class="nft-img img-fluid" loading="lazy">\n              </div>\n              <div class="list-item-text flex-fill d-flex flex-column">\n                  <h4>${a.name}</h4>\n                  <div class="d-flex justify-content-between">\n                      <span class="asset-id">${a.assetId}</span>\n                      ${a.total}\n                  </div>\n                  <div class="mt-3 nft-properties">\n                  </div>\n                  <div class="flex-fill d-flex justify-content-between align-items-end mt-2">\n                        <div class="nft-special"></div>\n                        <div class="dropdown"></div>\n                  </div>\n              </div>\n          </div>\n      `,n.querySelector(".dropdown").innerHTML=`\n          <a href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">\n          <img src="assets/more.png" class="more">\n          </a>\n          <ul class="dropdown-menu">\n              <li><a class="dropdown-item" href="https://www.nftexplorer.app/asset/${a.assetId}" target="_blank">NFTExplorer</a></li>\n              <li><a class="dropdown-item" href="https://www.randgallery.com/algo-collection/?address=${a.assetId}" target="_blank">RandGallery</a></li>\n              <li><a class="dropdown-item" href="https://algoxnft.com/asset/${a.assetId}" target="_blank">ALGOxNFT</a></li>\n          </ul>\n    `,"bathers"===this.collectionName&&this.bathersWithPacks&&this.bathersWithPacks.includes(a.assetId)){const t=n.querySelector(".nft-special");t.dataset.bsTitle="The pack tied to this Bather has not been opened yet",t.dataset.bsToggle="tooltip",t.dataset.bsCustomClass="custom-tooltip",t.innerHTML='<img src="assets/pack-icon.png">',new window.bootstrap.Tooltip(t)}t.append(n),s++,e.observe(n)}}loadVisibleNFTs(t,e){t.forEach((t=>{if(!t.isIntersecting)return;const e=t.target,s=this.collection.nfts[e.dataset.i];s.loading||(s.load(this.algoIndexer).then((()=>{const t=e.querySelector(".nft-img");if(t.src=s.imageUrl,s.handleImageError(t),"caffeineCards"===this.collectionName){let t="";if(s.metadata.properties){for(const e in s.metadata.properties)t+=`<span class="custom-badge">${e}</span> `;t+="<br>"}let a="";if(s.metadata.require){let t=[];for(const e in s.metadata.require)t.push(`<span class="custom-badge light">${e}: ${s.metadata.require[e]}</span>`);a=`<span class="custom-badge dark">Require:</span> ${t.join(" ")}`}e.querySelector(".nft-properties").innerHTML=`${t} ${a}<br>`;const n=e.querySelector(".nft-special");n.innerHTML='&#128293; <span id="burn-count">...</span>',n.dataset.bsTitle="Number of card definitively burned",n.dataset.bsToggle="tooltip",n.dataset.bsCustomClass="custom-tooltip",new window.bootstrap.Tooltip(n),this.algodClient.accountAssetInformation(s.metadata.burn_address,s.assetId).do().then((t=>{n.innerHTML=`&#128293; <span id="burn-count">${t["asset-holding"].amount}</span>`}))}})),s.loading=!0,this.sleep(100))}))}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJNEIsU0FBU1MsYUFBY3JDLEVBQUlHLFNBQ3ZEbUMsS0FDQWhCLE1BQU1pQixJQUNML0IsRUFBYy9DLFVBQVksbUNBQW1DOEUsRUFBTyxpQkFBaUJDLGVBQWUsR0FFMUcsS0FLRnhDLEVBQUlxQixTQUFVLEVBRWRyRSxLQUFLYSxNQUFNLEtBQUksR0FFbkIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3N0dWRpby8uL3NyYy9wYWdlcy9iYXNlLmpzIiwid2VicGFjazovL3N0dWRpby8uL3NyYy9wYWdlcy9jYXJkcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCBjbGFzcyBCYXNlUGFnZSB7XG5cbiAgICBjb25zdHJ1Y3Rvcih3YWxsZXRDb25uZWN0LCBob2xkaW5ncywgYWxnb2RDbGllbnQsIGFsZ29JbmRleGVyKXtcblxuICAgICAgICB0aGlzLndhbGxldENvbm5lY3QgPSB3YWxsZXRDb25uZWN0O1xuICAgICAgICB0aGlzLmFsZ29kQ2xpZW50ID0gYWxnb2RDbGllbnQ7XG4gICAgICAgIHRoaXMuYWxnb0luZGV4ZXIgPSBhbGdvSW5kZXhlcjtcbiAgICAgICAgdGhpcy5ob2xkaW5ncyA9IGhvbGRpbmdzO1xuXG4gICAgICAgIFxuXG4gICAgfVxuXG59IiwiaW1wb3J0IHsgQmFzZVBhZ2UgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBORlRDb2xsZWN0aW9uIH0gZnJvbSBcImFsZ28tbmZ0LXV0aWxzXCI7XG5cbmltcG9ydCBjb2xsZWN0aW9ucyBmcm9tIFwiLi4vY29sbGVjdGlvbnMuanNcIjtcblxuZXhwb3J0IGNsYXNzIENhcmRzIGV4dGVuZHMgQmFzZVBhZ2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuXG4gICAgLy90aGlzLmNvbGxlY3Rpb25OYW1lID0gXCJjYWZmZWluZUNhcmRzXCI7XG4gICAgdGhpcy5jb2xsZWN0aW9uTmFtZSA9IFwiYmF0aGVyc1wiO1xuXG4gICAgdGhpcy50aXRsZSA9IFwiXCI7XG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbk5hbWUgPT09IFwiY2FmZmVpbmVDYXJkc1wiKSB7XG4gICAgICB0aGlzLnRpdGxlID0gXCJDYWZmZWluZSBDYXJkc1wiO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb2xsZWN0aW9uTmFtZSA9PT0gXCJiYXRoZXJzXCIpIHtcbiAgICAgIHRoaXMudGl0bGUgPSBcIkJhdGhlcnNcIjtcbiAgICB9XG5cbiAgICB0aGlzLnVpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIHRoaXMudWkuaW5uZXJIVE1MID0gYFxuICAgIDxoMT4ke3RoaXMudGl0bGV9PC9oMT5cbiAgICA8cCBjbGFzcz1cImRhcmstdGV4dFwiPkJyb3dzZSBhbGwgJHt0aGlzLnRpdGxlfTwvcD5cbiAgICBgO1xuXG4gICAgdGhpcy5jb2xsZWN0aW9uO1xuXG4gICAgdGhpcy5iYXRoZXJzV2l0aFBhY2tzO1xuXG4gICAgdGhpcy5sb2FkQWxsQ2FyZHMoKTtcbiAgfVxuXG4gIHNsZWVwKGRlbGF5VGltZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheVRpbWUpKTtcbiAgfVxuXG4gIGFzeW5jIGxvYWRBbGxDYXJkcygpIHtcbiAgICBjb25zdCBsb2FkaW5nUCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGxvYWRpbmdQLnRleHRDb250ZW50ID0gYExvYWRpbmcgJHt0aGlzLnRpdGxlfS4uLmA7XG4gICAgdGhpcy51aS5hcHBlbmQobG9hZGluZ1ApO1xuXG4gICAgY29uc3QgY2FyZENvbGxlY3Rpb24gPSBjb2xsZWN0aW9ucy5maWx0ZXIoXG4gICAgICAoYykgPT4gYy5uYW1lID09PSB0aGlzLmNvbGxlY3Rpb25OYW1lXG4gICAgKVswXTtcblxuICAgIHRoaXMuY29sbGVjdGlvbiA9IG5ldyBORlRDb2xsZWN0aW9uKFtjYXJkQ29sbGVjdGlvbl0pO1xuICAgIGF3YWl0IHRoaXMuY29sbGVjdGlvbi5sb2FkKHRoaXMuYWxnb0luZGV4ZXIpO1xuXG4gICAgLy9sb2FkIHBhY2tzXG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbk5hbWUgPT09IFwiYmF0aGVyc1wiKSB7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgbG9hZFBhY2tzIH0gPSBhd2FpdCBpbXBvcnQoXCIuL3BhY2tzLmpzXCIpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYWNrcyA9IGF3YWl0IGxvYWRQYWNrcygpO1xuXG4gICAgICAgIGlmIChwYWNrcyAmJiBwYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5iYXRoZXJzV2l0aFBhY2tzID0gcGFja3MubWFwKChwKSA9PiBwWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsb2FkaW5nUC5yZW1vdmUoKTtcblxuICAgIHRoaXMuZGlzcGxheUxpc3QoKTtcbiAgfVxuXG4gIGRpc3BsYXlMaXN0KCkge1xuICAgIGlmICghdGhpcy5jb2xsZWN0aW9uLm5mdHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBlbXB0eURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBlbXB0eURpdi5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cImRhcmstdGV4dCBtYi01XCI+Tm8gYXNzZXRzPC9kaXY+JztcblxuICAgICAgdGhpcy51aS5hcHBlbmQoZW1wdHlEaXYpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbGlzdFZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGxpc3RWaWV3LmNsYXNzTmFtZSA9IFwicm93IHJvdy1jb2xzLTIgcm93LWNvbHMtbWQtMyByb3ctY29scy1sZy00IGd5LTQgbWItNVwiO1xuICAgIHRoaXMudWkuYXBwZW5kKGxpc3RWaWV3KTtcblxuICAgIC8vbG9hZCBvbmx5IHdoZW4gZWxlbWVudCBpcyB2aXNpYmxlXG4gICAgbGV0IG9wdGlvbnMgPSB7XG4gICAgICByb290OiBudWxsLCAvL2Jyb3dzZXIgdmlld3BvcnRcbiAgICAgIHJvb3RNYXJnaW46IFwiMHB4XCIsXG4gICAgICB0aHJlc2hvbGQ6IDAuMCxcbiAgICB9O1xuXG4gICAgbGV0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgdGhpcy5sb2FkVmlzaWJsZU5GVHMuYmluZCh0aGlzKSxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuXG4gICAgLy9kaXNwbGF5IG5mdHNcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChjb25zdCBuZnQgb2YgdGhpcy5jb2xsZWN0aW9uLm5mdHMpIHtcbiAgICAgIGNvbnN0IG5mdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBuZnREaXYuaWQgPSBgbmZ0LSR7bmZ0LmFzc2V0SWR9YDtcbiAgICAgIG5mdERpdi5jbGFzc05hbWUgPSBcImNvbFwiO1xuICAgICAgbmZ0RGl2LmRhdGFzZXQuaSA9IGk7XG5cbiAgICAgIG5mdERpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImxpc3QtaXRlbSBoLTEwMCBkLWZsZXggZmxleC1jb2x1bW5cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJhdGlvIHJhdGlvLTF4MSBwbGFjZWhvbGRlci1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvZGVmYXVsdC1jYXJkLnBuZ1wiIGNsYXNzPVwibmZ0LWltZyBpbWctZmx1aWRcIiBsb2FkaW5nPVwibGF6eVwiPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxpc3QtaXRlbS10ZXh0IGZsZXgtZmlsbCBkLWZsZXggZmxleC1jb2x1bW5cIj5cbiAgICAgICAgICAgICAgICAgIDxoND4ke25mdC5uYW1lfTwvaDQ+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IGp1c3RpZnktY29udGVudC1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJhc3NldC1pZFwiPiR7bmZ0LmFzc2V0SWR9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICR7bmZ0LnRvdGFsfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibXQtMyBuZnQtcHJvcGVydGllc1wiPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC1maWxsIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBhbGlnbi1pdGVtcy1lbmQgbXQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5mdC1zcGVjaWFsXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJvcGRvd25cIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG5cbiAgICAgIC8vYWRkIGRyb3Bkb3duIHdpdGggb3B0aW9uc1xuICAgICAgY29uc3QgZHJvcGRvd25EaXYgPSBuZnREaXYucXVlcnlTZWxlY3RvcihcIi5kcm9wZG93blwiKTtcblxuICAgICAgZHJvcGRvd25EaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxhIGhyZWY9XCIjXCIgcm9sZT1cImJ1dHRvblwiIGRhdGEtYnMtdG9nZ2xlPVwiZHJvcGRvd25cIiBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIj5cbiAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9tb3JlLnBuZ1wiIGNsYXNzPVwibW9yZVwiPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCI+XG4gICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiaHR0cHM6Ly93d3cubmZ0ZXhwbG9yZXIuYXBwL2Fzc2V0LyR7bmZ0LmFzc2V0SWR9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+TkZURXhwbG9yZXI8L2E+PC9saT5cbiAgICAgICAgICAgICAgPGxpPjxhIGNsYXNzPVwiZHJvcGRvd24taXRlbVwiIGhyZWY9XCJodHRwczovL3d3dy5yYW5kZ2FsbGVyeS5jb20vYWxnby1jb2xsZWN0aW9uLz9hZGRyZXNzPSR7bmZ0LmFzc2V0SWR9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+UmFuZEdhbGxlcnk8L2E+PC9saT5cbiAgICAgICAgICAgICAgPGxpPjxhIGNsYXNzPVwiZHJvcGRvd24taXRlbVwiIGhyZWY9XCJodHRwczovL2FsZ294bmZ0LmNvbS9hc3NldC8ke25mdC5hc3NldElkfVwiIHRhcmdldD1cIl9ibGFua1wiPkFMR094TkZUPC9hPjwvbGk+XG4gICAgICAgICAgPC91bD5cbiAgICBgO1xuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbk5hbWUgPT09IFwiYmF0aGVyc1wiICYmXG4gICAgICAgIHRoaXMuYmF0aGVyc1dpdGhQYWNrcyAmJlxuICAgICAgICB0aGlzLmJhdGhlcnNXaXRoUGFja3MuaW5jbHVkZXMobmZ0LmFzc2V0SWQpXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgbmZ0U3BlY2lhbERpdiA9IG5mdERpdi5xdWVyeVNlbGVjdG9yKFwiLm5mdC1zcGVjaWFsXCIpO1xuICAgICAgICBuZnRTcGVjaWFsRGl2LmRhdGFzZXQuYnNUaXRsZSA9XG4gICAgICAgICAgXCJUaGUgcGFjayB0aWVkIHRvIHRoaXMgQmF0aGVyIGhhcyBub3QgYmVlbiBvcGVuZWQgeWV0XCI7XG4gICAgICAgIG5mdFNwZWNpYWxEaXYuZGF0YXNldC5ic1RvZ2dsZSA9IFwidG9vbHRpcFwiO1xuICAgICAgICBuZnRTcGVjaWFsRGl2LmRhdGFzZXQuYnNDdXN0b21DbGFzcyA9IFwiY3VzdG9tLXRvb2x0aXBcIjtcbiAgICAgICAgbmZ0U3BlY2lhbERpdi5pbm5lckhUTUwgPSAnPGltZyBzcmM9XCJhc3NldHMvcGFjay1pY29uLnBuZ1wiPic7XG5cbiAgICAgICAgbmV3IHdpbmRvdy5ib290c3RyYXAuVG9vbHRpcChuZnRTcGVjaWFsRGl2KTtcbiAgICAgIH1cblxuICAgICAgbGlzdFZpZXcuYXBwZW5kKG5mdERpdik7XG5cbiAgICAgIGkrKztcblxuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShuZnREaXYpO1xuXG4gICAgICAvKm5mdC5sb2FkKHRoaXMuYWxnb0luZGV4ZXIpLnRoZW4oKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhuZnREaXYpO1xuXG4gICAgICAgIGxldCBwcm9wZXJ0aWVzTmFtZXMgPSBcIlwiO1xuXG4gICAgICAgIGlmIChuZnQubWV0YWRhdGEucHJvcGVydGllcykge1xuICAgICAgICAgIGZvciAoY29uc3QgcHJvcGVydHlOYW1lIGluIG5mdC5tZXRhZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzTmFtZXMgKz0gYDxzcGFuIGNsYXNzPVwiY3VzdG9tLWJhZGdlXCI+JHtwcm9wZXJ0eU5hbWV9PC9zcGFuPiBgO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHByb3BlcnRpZXNOYW1lcyArPSBcIjxicj5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXF1aXJlID0gXCJcIjtcblxuICAgICAgICBpZiAobmZ0Lm1ldGFkYXRhLnJlcXVpcmUpIHtcbiAgICAgICAgICBsZXQgcmVxdWlyZUxpc3QgPSBbXTtcblxuICAgICAgICAgIGZvciAoY29uc3QgcmVxdWlyZUtleSBpbiBuZnQubWV0YWRhdGEucmVxdWlyZSkge1xuICAgICAgICAgICAgcmVxdWlyZUxpc3QucHVzaChcbiAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwiY3VzdG9tLWJhZGdlIGxpZ2h0XCI+JHtyZXF1aXJlS2V5fTogJHtuZnQubWV0YWRhdGEucmVxdWlyZVtyZXF1aXJlS2V5XX08L3NwYW4+YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXF1aXJlID0gYDxzcGFuIGNsYXNzPVwiY3VzdG9tLWJhZGdlIGRhcmtcIj5SZXF1aXJlOjwvc3Bhbj4gJHtyZXF1aXJlTGlzdC5qb2luKFxuICAgICAgICAgICAgXCIgXCJcbiAgICAgICAgICApfWA7XG4gICAgICAgIH1cblxuICAgICAgICBuZnREaXYucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICBcIi5uZnQtcHJvcGVydGllc1wiXG4gICAgICAgICkuaW5uZXJIVE1MID0gYCR7cHJvcGVydGllc05hbWVzfSAke3JlcXVpcmV9PGJyPmA7XG5cbiAgICAgICAgLy9sb2FkIGltYWdlXG4gICAgICAgIGNvbnN0IGltYWdlID0gbmZ0RGl2LnF1ZXJ5U2VsZWN0b3IoXCIubmZ0LWltZ1wiKTtcbiAgICAgICAgaW1hZ2Uuc3JjID0gbmZ0LmltYWdlVXJsO1xuICAgICAgICBuZnQuaGFuZGxlSW1hZ2VFcnJvcihpbWFnZSk7XG5cbiAgICAgICAgLy9sb2FkIGJhbGFuY2UgZnJvbSBidXJuaW5nIGFkZHJlc3NcbiAgICAgICAgY29uc3QgYnVybkNvdW50U3BhbiA9IG5mdERpdi5xdWVyeVNlbGVjdG9yKFwiI2J1cm4tY291bnRcIik7XG4gICAgICAgIGJ1cm5Db3VudFNwYW4udGV4dENvbnRlbnQgPSBcIi4uLlwiO1xuXG4gICAgICAgIHRoaXMuYWxnb2RDbGllbnRcbiAgICAgICAgICAuYWNjb3VudEFzc2V0SW5mb3JtYXRpb24obmZ0Lm1ldGFkYXRhLmJ1cm5fYWRkcmVzcywgbmZ0LmFzc2V0SWQpXG4gICAgICAgICAgLmRvKClcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBidXJuQ291bnRTcGFuLnRleHRDb250ZW50ID0gYCR7cmVzdWx0W1wiYXNzZXQtaG9sZGluZ1wiXS5hbW91bnR9YDtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAvL2FkZCBkcm9wZG93biB3aXRoIG9wdGlvbnNcbiAgICAgICAgY29uc3QgZHJvcGRvd25EaXYgPSBuZnREaXYucXVlcnlTZWxlY3RvcihcIi5kcm9wZG93blwiKTtcblxuICAgICAgICBkcm9wZG93bkRpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8YSBocmVmPVwiI1wiIHJvbGU9XCJidXR0b25cIiBkYXRhLWJzLXRvZ2dsZT1cImRyb3Bkb3duXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCI+XG4gICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9tb3JlLnBuZ1wiIGNsYXNzPVwibW9yZVwiPlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPlxuICAgICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiaHR0cHM6Ly93d3cubmZ0ZXhwbG9yZXIuYXBwL2Fzc2V0LyR7bmZ0LmFzc2V0SWR9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+TkZURXhwbG9yZXI8L2E+PC9saT5cbiAgICAgICAgICAgICAgICA8bGk+PGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgaHJlZj1cImh0dHBzOi8vd3d3LnJhbmRnYWxsZXJ5LmNvbS9hbGdvLWNvbGxlY3Rpb24vP2FkZHJlc3M9JHtuZnQuYXNzZXRJZH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj5SYW5kR2FsbGVyeTwvYT48L2xpPlxuICAgICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiaHR0cHM6Ly9hbGdveG5mdC5jb20vYXNzZXQvJHtuZnQuYXNzZXRJZH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj5BTEdPeE5GVDwvYT48L2xpPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgIGA7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zbGVlcCgxMDApOyovXG4gICAgfVxuICB9XG5cbiAgbG9hZFZpc2libGVORlRzKGVudHJpZXMsIG9ic2VydmVyKSB7XG4gICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgaWYgKCFlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5mdERpdiA9IGVudHJ5LnRhcmdldDtcbiAgICAgIGNvbnN0IG5mdCA9IHRoaXMuY29sbGVjdGlvbi5uZnRzW25mdERpdi5kYXRhc2V0LmldO1xuXG4gICAgICBpZiAobmZ0LmxvYWRpbmcpIHtcbiAgICAgICAgLy9sb2FkaW5nIGhhdmUgYWxyZWFkeSBzdGFydGVkXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbmZ0LmxvYWQodGhpcy5hbGdvSW5kZXhlcikudGhlbigoKSA9PiB7XG4gICAgICAgIC8vbG9hZCBpbWFnZVxuICAgICAgICBjb25zdCBpbWFnZSA9IG5mdERpdi5xdWVyeVNlbGVjdG9yKFwiLm5mdC1pbWdcIik7XG4gICAgICAgIGltYWdlLnNyYyA9IG5mdC5pbWFnZVVybDtcbiAgICAgICAgbmZ0LmhhbmRsZUltYWdlRXJyb3IoaW1hZ2UpO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25OYW1lID09PSBcImNhZmZlaW5lQ2FyZHNcIikge1xuICAgICAgICAgIC8vZGlzcGxheSBwcm9wZXJ0aWVzXG4gICAgICAgICAgbGV0IHByb3BlcnRpZXNOYW1lcyA9IFwiXCI7XG5cbiAgICAgICAgICBpZiAobmZ0Lm1ldGFkYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvcGVydHlOYW1lIGluIG5mdC5tZXRhZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgIHByb3BlcnRpZXNOYW1lcyArPSBgPHNwYW4gY2xhc3M9XCJjdXN0b20tYmFkZ2VcIj4ke3Byb3BlcnR5TmFtZX08L3NwYW4+IGA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByb3BlcnRpZXNOYW1lcyArPSBcIjxicj5cIjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgcmVxdWlyZSA9IFwiXCI7XG5cbiAgICAgICAgICBpZiAobmZ0Lm1ldGFkYXRhLnJlcXVpcmUpIHtcbiAgICAgICAgICAgIGxldCByZXF1aXJlTGlzdCA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlcXVpcmVLZXkgaW4gbmZ0Lm1ldGFkYXRhLnJlcXVpcmUpIHtcbiAgICAgICAgICAgICAgcmVxdWlyZUxpc3QucHVzaChcbiAgICAgICAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJjdXN0b20tYmFkZ2UgbGlnaHRcIj4ke3JlcXVpcmVLZXl9OiAke25mdC5tZXRhZGF0YS5yZXF1aXJlW3JlcXVpcmVLZXldfTwvc3Bhbj5gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlcXVpcmUgPSBgPHNwYW4gY2xhc3M9XCJjdXN0b20tYmFkZ2UgZGFya1wiPlJlcXVpcmU6PC9zcGFuPiAke3JlcXVpcmVMaXN0LmpvaW4oXG4gICAgICAgICAgICAgIFwiIFwiXG4gICAgICAgICAgICApfWA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmZ0RGl2LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICBcIi5uZnQtcHJvcGVydGllc1wiXG4gICAgICAgICAgKS5pbm5lckhUTUwgPSBgJHtwcm9wZXJ0aWVzTmFtZXN9ICR7cmVxdWlyZX08YnI+YDtcblxuICAgICAgICAgIC8vbG9hZCBiYWxhbmNlIGZyb20gYnVybmluZyBhZGRyZXNzXG4gICAgICAgICAgY29uc3QgbmZ0U3BlY2lhbERpdiA9IG5mdERpdi5xdWVyeVNlbGVjdG9yKFwiLm5mdC1zcGVjaWFsXCIpO1xuICAgICAgICAgIG5mdFNwZWNpYWxEaXYuaW5uZXJIVE1MID1cbiAgICAgICAgICAgICcmIzEyODI5MzsgPHNwYW4gaWQ9XCJidXJuLWNvdW50XCI+Li4uPC9zcGFuPic7XG5cbiAgICAgICAgICAvL2FkZCB0b29sdGlwXG4gICAgICAgICAgbmZ0U3BlY2lhbERpdi5kYXRhc2V0LmJzVGl0bGUgPSBcIk51bWJlciBvZiBjYXJkIGRlZmluaXRpdmVseSBidXJuZWRcIjtcbiAgICAgICAgICBuZnRTcGVjaWFsRGl2LmRhdGFzZXQuYnNUb2dnbGUgPSBcInRvb2x0aXBcIjtcbiAgICAgICAgICBuZnRTcGVjaWFsRGl2LmRhdGFzZXQuYnNDdXN0b21DbGFzcyA9IFwiY3VzdG9tLXRvb2x0aXBcIjtcbiAgICAgICAgICBuZXcgd2luZG93LmJvb3RzdHJhcC5Ub29sdGlwKG5mdFNwZWNpYWxEaXYpO1xuXG4gICAgICAgICAgdGhpcy5hbGdvZENsaWVudFxuICAgICAgICAgICAgLmFjY291bnRBc3NldEluZm9ybWF0aW9uKG5mdC5tZXRhZGF0YS5idXJuX2FkZHJlc3MsIG5mdC5hc3NldElkKVxuICAgICAgICAgICAgLmRvKClcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgbmZ0U3BlY2lhbERpdi5pbm5lckhUTUwgPSBgJiMxMjgyOTM7IDxzcGFuIGlkPVwiYnVybi1jb3VudFwiPiR7cmVzdWx0W1wiYXNzZXQtaG9sZGluZ1wiXS5hbW91bnR9PC9zcGFuPmA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIFxuICAgICAgfSk7XG5cbiAgICAgIG5mdC5sb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgdGhpcy5zbGVlcCgxMDApO1xuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZVBhZ2UiLCJjb25zdHJ1Y3RvciIsIndhbGxldENvbm5lY3QiLCJob2xkaW5ncyIsImFsZ29kQ2xpZW50IiwiYWxnb0luZGV4ZXIiLCJ0aGlzIiwiQ2FyZHMiLCJzdXBlciIsImFyZ3VtZW50cyIsImNvbGxlY3Rpb25OYW1lIiwidGl0bGUiLCJ1aSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImNvbGxlY3Rpb24iLCJiYXRoZXJzV2l0aFBhY2tzIiwibG9hZEFsbENhcmRzIiwic2xlZXAiLCJkZWxheVRpbWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJhc3luYyIsImxvYWRpbmdQIiwidGV4dENvbnRlbnQiLCJhcHBlbmQiLCJjYXJkQ29sbGVjdGlvbiIsImMiLCJuYW1lIiwibG9hZCIsImxvYWRQYWNrcyIsInBhY2tzIiwibGVuZ3RoIiwibWFwIiwicCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsInJlbW92ZSIsImRpc3BsYXlMaXN0IiwibmZ0cyIsImVtcHR5RGl2IiwibGlzdFZpZXciLCJjbGFzc05hbWUiLCJvYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwibG9hZFZpc2libGVORlRzIiwiYmluZCIsInJvb3QiLCJyb290TWFyZ2luIiwidGhyZXNob2xkIiwiaSIsIm5mdCIsIm5mdERpdiIsImlkIiwiYXNzZXRJZCIsImRhdGFzZXQiLCJ0b3RhbCIsInF1ZXJ5U2VsZWN0b3IiLCJpbmNsdWRlcyIsIm5mdFNwZWNpYWxEaXYiLCJic1RpdGxlIiwiYnNUb2dnbGUiLCJic0N1c3RvbUNsYXNzIiwid2luZG93IiwiYm9vdHN0cmFwIiwiVG9vbHRpcCIsIm9ic2VydmUiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJ0YXJnZXQiLCJsb2FkaW5nIiwidGhlbiIsImltYWdlIiwic3JjIiwiaW1hZ2VVcmwiLCJoYW5kbGVJbWFnZUVycm9yIiwicHJvcGVydGllc05hbWVzIiwibWV0YWRhdGEiLCJwcm9wZXJ0aWVzIiwicHJvcGVydHlOYW1lIiwicmVxdWlyZSIsInJlcXVpcmVMaXN0IiwicmVxdWlyZUtleSIsInB1c2giLCJqb2luIiwiYWNjb3VudEFzc2V0SW5mb3JtYXRpb24iLCJidXJuX2FkZHJlc3MiLCJkbyIsInJlc3VsdCIsImFtb3VudCJdLCJzb3VyY2VSb290IjoiIn0=