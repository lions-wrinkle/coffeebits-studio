/*! For license information please see 501.main.js.LICENSE.txt */
(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[501],{5229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readAbr=void 0;var n=r(5350),i=r(2087),o=["off","fade","pen pressure","pen tilt","stylus wheel","initial direction","direction","initial rotation","rotation"];function a(e){return{control:o[e.bVTy],steps:e.fStp,jitter:n.parsePercent(e.jitter),minimum:n.parsePercent(e["Mnm "])}}function s(e){var t={size:n.parseUnitsToNumber(e.Dmtr,"Pixels"),angle:n.parseAngle(e.Angl),roundness:n.parsePercent(e.Rndn),spacingOn:e.Intr,spacing:n.parsePercent(e.Spcn),flipX:e.flipX,flipY:e.flipY};return e["Nm  "]&&(t.name=e["Nm  "]),e.Hrdn&&(t.hardness=n.parsePercent(e.Hrdn)),e.sampledData&&(t.sampledData=e.sampledData),t}t.readAbr=function(e,t){var r;void 0===t&&(t={});var o=i.createReader(e.buffer,e.byteOffset,e.byteLength),l=i.readInt16(o),u=[],d=[],c=[];if(1===l||2===l)throw new Error("Unsupported ABR version ("+l+")");if(6!==l&&7!==l&&9!==l&&10!==l)throw new Error("Unsupported ABR version ("+l+")");var f=i.readInt16(o);if(1!==f&&2!==f)throw new Error("Unsupported ABR minor version");for(;o.offset<o.view.byteLength;){i.checkSignature(o,"8BIM");var p=i.readSignature(o),h=i.readUint32(o),g=o.offset+h;switch(p){case"samp":for(;o.offset<g;){for(var v=i.readUint32(o);3&v;)v++;var y=o.offset+v,w=i.readPascalString(o,1);i.skipBytes(o,1===f?10:264);var m=i.readInt32(o),b=i.readInt32(o),S=i.readInt32(o)-m,k=i.readInt32(o)-b;if(k<=0||S<=0)throw new Error("Invalid bounds");var U=i.readInt16(o),I=i.readUint8(o),C=new Uint8Array(k*S);if(8===U)if(0===I)C.set(i.readBytes(o,C.byteLength));else{if(1!==I)throw new Error("Invalid compression");i.readDataRLE(o,{width:k,height:S,data:C},k,S,1,[0],!1)}else{if(16!==U)throw new Error("Invalid depth");if(0!==I)throw 1===I?new Error("not implemented (16bit RLE)"):new Error("Invalid compression");for(var B=0;B<C.byteLength;B++)C[B]=i.readUint16(o)>>8}u.push({id:w,bounds:{x:b,y:m,w:k,h:S},alpha:C}),o.offset=y}break;case"desc":for(var P=0,A=(O=n.readVersionAndDescriptor(o)).Brsh;P<A.length;P++){var E=A[P],D={name:E["Nm  "],shape:s(E.Brsh),spacing:n.parsePercent(E.Spcn),wetEdges:E.Wtdg,noise:E.Nose,useBrushSize:E.useBrushSize};null!=E.interpretation&&(D.interpretation=E.interpretation),null!=E.protectTexture&&(D.protectTexture=E.protectTexture),E.useTipDynamics&&(D.shapeDynamics={tiltScale:n.parsePercent(E.tiltScale),sizeDynamics:a(E.szVr),angleDynamics:a(E.angleDynamics),roundnessDynamics:a(E.roundnessDynamics),flipX:E.flipX,flipY:E.flipY,brushProjection:E.brushProjection,minimumDiameter:n.parsePercent(E.minimumDiameter),minimumRoundness:n.parsePercent(E.minimumRoundness)}),E.useScatter&&(D.scatter={count:E["Cnt "],bothAxes:E.bothAxes,countDynamics:a(E.countDynamics),scatterDynamics:a(E.scatterDynamics)}),E.useTexture&&E.Txtr&&(D.texture={id:E.Txtr.Idnt,name:E.Txtr["Nm  "],blendMode:n.BlnM.decode(E.textureBlendMode),depth:n.parsePercent(E.textureDepth),depthMinimum:n.parsePercent(E.minimumDepth),depthDynamics:a(E.textureDepthDynamics),scale:n.parsePercent(E.textureScale),invert:E.InvT,brightness:E.textureBrightness,contrast:E.textureContrast});var M=E.dualBrush;M&&M.useDualBrush&&(D.dualBrush={flip:M.Flip,shape:s(M.Brsh),blendMode:n.BlnM.decode(M.BlnM),useScatter:M.useScatter,spacing:n.parsePercent(M.Spcn),count:M["Cnt "],bothAxes:M.bothAxes,countDynamics:a(M.countDynamics),scatterDynamics:a(M.scatterDynamics)}),E.useColorDynamics&&(D.colorDynamics={foregroundBackground:a(E.clVr),hue:n.parsePercent(E["H   "]),saturation:n.parsePercent(E.Strt),brightness:n.parsePercent(E.Brgh),purity:n.parsePercent(E.purity),perTip:E.colorDynamicsPerTip}),E.usePaintDynamics&&(D.transfer={flowDynamics:a(E.prVr),opacityDynamics:a(E.opVr),wetnessDynamics:a(E.wtVr),mixDynamics:a(E.mxVr)}),E.useBrushPose&&(D.brushPose={overrideAngle:E.overridePoseAngle,overrideTiltX:E.overridePoseTiltX,overrideTiltY:E.overridePoseTiltY,overridePressure:E.overridePosePressure,pressure:n.parsePercent(E.brushPosePressure),tiltX:E.brushPoseTiltX,tiltY:E.brushPoseTiltY,angle:E.brushPoseAngle});var F=E.toolOptions;F&&(D.toolOptions={brushPreset:F.brushPreset,flow:F.flow,smooth:F.Smoo,mode:n.BlnM.decode(F["Md  "]),opacity:F.Opct,smoothing:F.smoothing,smoothingValue:F.smoothingValue,smoothingRadiusMode:F.smoothingRadiusMode,smoothingCatchup:F.smoothingCatchup,smoothingCatchupAtEnd:F.smoothingCatchupAtEnd,smoothingZoomCompensation:F.smoothingZoomCompensation,pressureSmoothing:F.pressureSmoothing,usePressureOverridesSize:F.usePressureOverridesSize,usePressureOverridesOpacity:F.usePressureOverridesOpacity,useLegacy:F.useLegacy}),d.push(D)}break;case"patt":o.offset<g&&(c.push(i.readPattern(o)),o.offset=g);break;case"phry":var O=n.readVersionAndDescriptor(o);t.logMissingFeatures&&(null===(r=O.hierarchy)||void 0===r?void 0:r.length)&&console.log("unhandled phry section",O);break;default:throw new Error("Invalid brush type: "+p)}for(;h%4;)o.offset++,h++}return{samples:u,patterns:c,brushes:d}}},9258:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasMultiEffects=t.readVectorMask=t.booleanOperations=t.readBezierKnot=t.infoHandlersMap=t.infoHandlers=void 0;var i=r(1755),o=r(5294),a=r(8110),s=r(2087),l=r(766),u=r(5350),d=r(2383),c=r(6201);function f(e,r,n,i){var o={key:e,has:r,read:n,write:i};t.infoHandlers.push(o),t.infoHandlersMap[o.key]=o}function p(e,r){t.infoHandlersMap[e]=t.infoHandlersMap[r]}function h(e){return function(t){return void 0!==t[e]}}function g(e){if(s.readUint32(e))throw new Error("Resource size above 4 GB limit at "+e.offset.toString(16));return s.readUint32(e)}function v(e,t){l.writeUint32(e,0),l.writeUint32(e,t)}function y(e,t,r){var n=s.readFixedPointPath32(e)*r,i=s.readFixedPointPath32(e)*t,o=s.readFixedPointPath32(e)*r,a=s.readFixedPointPath32(e)*t,l=s.readFixedPointPath32(e)*r;return[i,n,a,o,s.readFixedPointPath32(e)*t,l]}function w(e,t,r,n){l.writeFixedPointPath32(e,t[1]/n),l.writeFixedPointPath32(e,t[0]/r),l.writeFixedPointPath32(e,t[3]/n),l.writeFixedPointPath32(e,t[2]/r),l.writeFixedPointPath32(e,t[5]/n),l.writeFixedPointPath32(e,t[4]/r)}function m(e,r,n,i,o){for(var a=e.offset+o,l=r.paths,u=void 0;a-e.offset>=26;){var d=s.readUint16(e);switch(d){case 0:case 3:s.readUint16(e);var c=s.readInt16(e);s.readUint16(e),s.skipBytes(e,18),u={open:3===d,operation:-1===c?"combine":t.booleanOperations[c],knots:[]},l.push(u);break;case 1:case 2:case 4:case 5:u.knots.push({linked:1===d||4===d,points:y(e,n,i)});break;case 6:s.skipBytes(e,24);break;case 7:var f=s.readFixedPointPath32(e),p=s.readFixedPointPath32(e),h=s.readFixedPointPath32(e),g=s.readFixedPointPath32(e),v=s.readFixedPointPath32(e);s.skipBytes(e,4),r.clipboard={top:f,left:p,bottom:h,right:g,resolution:v};break;case 8:r.fillStartsWithAllPixels=!!s.readUint16(e),s.skipBytes(e,22);break;default:throw new Error("Invalid vmsk section")}}return l}t.infoHandlers=[],t.infoHandlersMap={},f("TySh",h("text"),(function(e,t,r){if(1!==s.readInt16(e))throw new Error("Invalid TySh version");for(var i=[],o=0;o<6;o++)i.push(s.readFloat64(e));if(50!==s.readInt16(e))throw new Error("Invalid TySh text version");var a=u.readVersionAndDescriptor(e);if(1!==s.readInt16(e))throw new Error("Invalid TySh warp version");var l=u.readVersionAndDescriptor(e);if(t.text={transform:i,left:s.readFloat32(e),top:s.readFloat32(e),right:s.readFloat32(e),bottom:s.readFloat32(e),text:a["Txt "].replace(/\r/g,"\n"),index:a.TextIndex||0,gridding:u.textGridding.decode(a.textGridding),antiAlias:u.Annt.decode(a.AntA),orientation:u.Ornt.decode(a.Ornt),warp:{style:u.warpStyle.decode(l.warpStyle),value:l.warpValue||0,perspective:l.warpPerspective||0,perspectiveOther:l.warpPerspectiveOther||0,rotate:u.Ornt.decode(l.warpRotate)}},a.EngineData){var f=c.decodeEngineData(d.parseEngineData(a.EngineData));t.text=n(n({},t.text),f)}s.skipBytes(e,r())}),(function(e,t){var r=t.text,n=r.warp||{},i=r.transform||[1,0,0,1,0,0],o={"Txt ":(r.text||"").replace(/\r?\n/g,"\r"),textGridding:u.textGridding.encode(r.gridding),Ornt:u.Ornt.encode(r.orientation),AntA:u.Annt.encode(r.antiAlias),TextIndex:r.index||0,EngineData:d.serializeEngineData(c.encodeEngineData(r))};l.writeInt16(e,1);for(var a=0;a<6;a++)l.writeFloat64(e,i[a]);l.writeInt16(e,50),u.writeVersionAndDescriptor(e,"","TxLr",o),l.writeInt16(e,1),u.writeVersionAndDescriptor(e,"","warp",U(n)),l.writeFloat32(e,r.left),l.writeFloat32(e,r.top),l.writeFloat32(e,r.right),l.writeFloat32(e,r.bottom)})),f("SoCo",(function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&"color"===e.vectorFill.type}),(function(e,t){var r=u.readVersionAndDescriptor(e);t.vectorFill=J(r)}),(function(e,t){var r=te(t.vectorFill).descriptor;u.writeVersionAndDescriptor(e,"","null",r)})),f("GdFl",(function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&("solid"===e.vectorFill.type||"noise"===e.vectorFill.type)}),(function(e,t,r){var n=u.readVersionAndDescriptor(e);t.vectorFill=J(n),s.skipBytes(e,r())}),(function(e,t){var r=te(t.vectorFill).descriptor;u.writeVersionAndDescriptor(e,"","null",r)})),f("PtFl",(function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&"pattern"===e.vectorFill.type}),(function(e,t){var r=u.readVersionAndDescriptor(e);t.vectorFill=J(r)}),(function(e,t){var r=te(t.vectorFill).descriptor;u.writeVersionAndDescriptor(e,"","null",r)})),f("vscg",(function(e){return void 0!==e.vectorFill&&void 0!==e.vectorStroke}),(function(e,t,r){s.readSignature(e);var n=u.readVersionAndDescriptor(e);t.vectorFill=J(n),s.skipBytes(e,r())}),(function(e,t){var r=te(t.vectorFill),n=r.descriptor,i=r.key;l.writeSignature(e,i),u.writeVersionAndDescriptor(e,"","null",n)})),t.readBezierKnot=y,t.booleanOperations=["exclude","combine","subtract","intersect"],t.readVectorMask=m,f("vmsk",h("vectorMask"),(function(e,t,r,n){var i=n.width,o=n.height;if(3!==s.readUint32(e))throw new Error("Invalid vmsk version");t.vectorMask={paths:[]};var a=t.vectorMask,l=s.readUint32(e);a.invert=0!=(1&l),a.notLink=0!=(2&l),a.disable=0!=(4&l),m(e,a,i,o,r()),s.skipBytes(e,r())}),(function(e,r,n){var i=n.width,o=n.height,a=r.vectorMask,s=(a.invert?1:0)|(a.notLink?2:0)|(a.disable?4:0);l.writeUint32(e,3),l.writeUint32(e,s),l.writeUint16(e,6),l.writeZeros(e,24);var u=a.clipboard;u&&(l.writeUint16(e,7),l.writeFixedPointPath32(e,u.top),l.writeFixedPointPath32(e,u.left),l.writeFixedPointPath32(e,u.bottom),l.writeFixedPointPath32(e,u.right),l.writeFixedPointPath32(e,u.resolution),l.writeZeros(e,4)),void 0!==a.fillStartsWithAllPixels&&(l.writeUint16(e,8),l.writeUint16(e,a.fillStartsWithAllPixels?1:0),l.writeZeros(e,22));for(var d=0,c=a.paths;d<c.length;d++){var f=c[d];l.writeUint16(e,f.open?3:0),l.writeUint16(e,f.knots.length),l.writeUint16(e,Math.abs(t.booleanOperations.indexOf(f.operation))),l.writeUint16(e,1),l.writeZeros(e,18);for(var p=f.open?4:1,h=f.open?5:2,g=0,v=f.knots;g<v.length;g++){var y=v[g],m=y.linked,b=y.points;l.writeUint16(e,m?p:h),w(e,b,i,o)}}})),p("vsms","vmsk"),f("vogk",h("vectorOrigination"),(function(e,t,r){if(1!==s.readInt32(e))throw new Error("Invalid vogk version");var n=u.readVersionAndDescriptor(e);t.vectorOrigination={keyDescriptorList:[]};for(var i=0,o=n.keyDescriptorList;i<o.length;i++){var a=o[i],l={};null!=a.keyShapeInvalidated&&(l.keyShapeInvalidated=a.keyShapeInvalidated),null!=a.keyOriginType&&(l.keyOriginType=a.keyOriginType),null!=a.keyOriginResolution&&(l.keyOriginResolution=a.keyOriginResolution),a.keyOriginShapeBBox&&(l.keyOriginShapeBoundingBox={top:u.parseUnits(a.keyOriginShapeBBox["Top "]),left:u.parseUnits(a.keyOriginShapeBBox.Left),bottom:u.parseUnits(a.keyOriginShapeBBox.Btom),right:u.parseUnits(a.keyOriginShapeBBox.Rght)});var d=a.keyOriginRRectRadii;d&&(l.keyOriginRRectRadii={topRight:u.parseUnits(d.topRight),topLeft:u.parseUnits(d.topLeft),bottomLeft:u.parseUnits(d.bottomLeft),bottomRight:u.parseUnits(d.bottomRight)});var c=a.keyOriginBoxCorners;c&&(l.keyOriginBoxCorners=[{x:c.rectangleCornerA.Hrzn,y:c.rectangleCornerA.Vrtc},{x:c.rectangleCornerB.Hrzn,y:c.rectangleCornerB.Vrtc},{x:c.rectangleCornerC.Hrzn,y:c.rectangleCornerC.Vrtc},{x:c.rectangleCornerD.Hrzn,y:c.rectangleCornerD.Vrtc}]);var f=a.Trnf;f&&(l.transform=[f.xx,f.xy,f.xy,f.yy,f.tx,f.ty]),t.vectorOrigination.keyDescriptorList.push(l)}s.skipBytes(e,r())}),(function(e,t){for(var r=t.vectorOrigination,n={keyDescriptorList:[]},i=0;i<r.keyDescriptorList.length;i++){var o=r.keyDescriptorList[i];if(o.keyShapeInvalidated)n.keyDescriptorList.push({keyShapeInvalidated:!0,keyOriginIndex:i});else{n.keyDescriptorList.push({});var a=n.keyDescriptorList[n.keyDescriptorList.length-1];null!=o.keyOriginType&&(a.keyOriginType=o.keyOriginType),null!=o.keyOriginResolution&&(a.keyOriginResolution=o.keyOriginResolution);var s=o.keyOriginRRectRadii;s&&(a.keyOriginRRectRadii={unitValueQuadVersion:1,topRight:u.unitsValue(s.topRight,"topRight"),topLeft:u.unitsValue(s.topLeft,"topLeft"),bottomLeft:u.unitsValue(s.bottomLeft,"bottomLeft"),bottomRight:u.unitsValue(s.bottomRight,"bottomRight")});var d=o.keyOriginShapeBoundingBox;d&&(a.keyOriginShapeBBox={unitValueQuadVersion:1,"Top ":u.unitsValue(d.top,"top"),Left:u.unitsValue(d.left,"left"),Btom:u.unitsValue(d.bottom,"bottom"),Rght:u.unitsValue(d.right,"right")});var c=o.keyOriginBoxCorners;c&&4===c.length&&(a.keyOriginBoxCorners={rectangleCornerA:{Hrzn:c[0].x,Vrtc:c[0].y},rectangleCornerB:{Hrzn:c[1].x,Vrtc:c[1].y},rectangleCornerC:{Hrzn:c[2].x,Vrtc:c[2].y},rectangleCornerD:{Hrzn:c[3].x,Vrtc:c[3].y}});var f=o.transform;f&&6===f.length&&(a.Trnf={xx:f[0],xy:f[1],yx:f[2],yy:f[3],tx:f[4],ty:f[5]}),a.keyOriginIndex=i}}l.writeInt32(e,1),u.writeVersionAndDescriptor(e,"","null",n)})),f("lmfx",(function(e){return void 0!==e.effects&&X(e.effects)}),(function(e,t,r,n,i){if(0!==s.readUint32(e))throw new Error("Invalid lmfx version");var o=u.readVersionAndDescriptor(e);t.effects=W(o,!!i.logMissingFeatures),s.skipBytes(e,r())}),(function(e,t,r,n){var i=K(t.effects,!!n.logMissingFeatures,!0);l.writeUint32(e,0),u.writeVersionAndDescriptor(e,"","null",i)})),f("lrFX",h("effects"),(function(e,t,r){t.effects||(t.effects=o.readEffects(e)),s.skipBytes(e,r())}),(function(e,t){o.writeEffects(e,t.effects)})),f("luni",h("name"),(function(e,t,r){t.name=s.readUnicodeString(e),s.skipBytes(e,r())}),(function(e,t){l.writeUnicodeString(e,t.name)})),f("lnsr",h("nameSource"),(function(e,t){return t.nameSource=s.readSignature(e)}),(function(e,t){return l.writeSignature(e,t.nameSource)})),f("lyid",h("id"),(function(e,t){return t.id=s.readUint32(e)}),(function(e,t,r,n){for(var i=t.id;-1!==n.layerIds.indexOf(i);)i+=100;l.writeUint32(e,i),n.layerIds.push(i)})),f("lsct",h("sectionDivider"),(function(e,t,r){t.sectionDivider={type:s.readUint32(e)},r()&&(s.checkSignature(e,"8BIM"),t.sectionDivider.key=s.readSignature(e)),r()&&(t.sectionDivider.subType=s.readUint32(e))}),(function(e,t){l.writeUint32(e,t.sectionDivider.type),t.sectionDivider.key&&(l.writeSignature(e,"8BIM"),l.writeSignature(e,t.sectionDivider.key),void 0!==t.sectionDivider.subType&&l.writeUint32(e,t.sectionDivider.subType))})),p("lsdk","lsct"),f("clbl",h("blendClippendElements"),(function(e,t){t.blendClippendElements=!!s.readUint8(e),s.skipBytes(e,3)}),(function(e,t){l.writeUint8(e,t.blendClippendElements?1:0),l.writeZeros(e,3)})),f("infx",h("blendInteriorElements"),(function(e,t){t.blendInteriorElements=!!s.readUint8(e),s.skipBytes(e,3)}),(function(e,t){l.writeUint8(e,t.blendInteriorElements?1:0),l.writeZeros(e,3)})),f("knko",h("knockout"),(function(e,t){t.knockout=!!s.readUint8(e),s.skipBytes(e,3)}),(function(e,t){l.writeUint8(e,t.knockout?1:0),l.writeZeros(e,3)})),f("lspf",h("protected"),(function(e,t){var r=s.readUint32(e);t.protected={transparency:0!=(1&r),composite:0!=(2&r),position:0!=(4&r)},8&r&&(t.protected.artboards=!0)}),(function(e,t){var r=(t.protected.transparency?1:0)|(t.protected.composite?2:0)|(t.protected.position?4:0)|(t.protected.artboards?8:0);l.writeUint32(e,r)})),f("lclr",h("layerColor"),(function(e,t){var r=s.readUint16(e);s.skipBytes(e,6),t.layerColor=a.layerColors[r]}),(function(e,t){var r=a.layerColors.indexOf(t.layerColor);l.writeUint16(e,-1===r?0:r),l.writeZeros(e,6)})),f("shmd",h("timestamp"),(function(e,t,r,n,i){for(var o=s.readUint32(e),a=function(r){s.checkSignature(e,"8BIM");var n=s.readSignature(e);s.readUint8(e),s.skipBytes(e,3),s.readSection(e,1,(function(r){if("cust"===n)void 0!==(o=u.readVersionAndDescriptor(e)).layerTime&&(t.timestamp=o.layerTime);else if("mlst"===n){var o=u.readVersionAndDescriptor(e);i.logDevFeatures&&console.log("mlst",o)}else if("mdyn"===n){var a=s.readUint16(e),l=s.readUint8(e),d=s.readUint8(e),c=0!=(1&d),f=0!=(2&d),p=0!=(4&d);i.logDevFeatures&&console.log("mdyn","unknown:",a,"propagate:",l,"flags:",d,{unifyLayerPosition:c,unifyLayerStyle:f,unifyLayerVisibility:p})}else i.logDevFeatures&&console.log("Unhandled metadata",n);s.skipBytes(e,r())}))},l=0;l<o;l++)a();s.skipBytes(e,r())}),(function(e,t){var r={layerTime:t.timestamp};l.writeUint32(e,1),l.writeSignature(e,"8BIM"),l.writeSignature(e,"cust"),l.writeUint8(e,0),l.writeZeros(e,3),l.writeSection(e,2,(function(){return u.writeVersionAndDescriptor(e,"","metadata",r)}),!0)})),f("vstk",h("vectorStroke"),(function(e,t,r){var n=u.readVersionAndDescriptor(e);t.vectorStroke={strokeEnabled:n.strokeEnabled,fillEnabled:n.fillEnabled,lineWidth:u.parseUnits(n.strokeStyleLineWidth),lineDashOffset:u.parseUnits(n.strokeStyleLineDashOffset),miterLimit:n.strokeStyleMiterLimit,lineCapType:u.strokeStyleLineCapType.decode(n.strokeStyleLineCapType),lineJoinType:u.strokeStyleLineJoinType.decode(n.strokeStyleLineJoinType),lineAlignment:u.strokeStyleLineAlignment.decode(n.strokeStyleLineAlignment),scaleLock:n.strokeStyleScaleLock,strokeAdjust:n.strokeStyleStrokeAdjust,lineDashSet:n.strokeStyleLineDashSet.map(u.parseUnits),blendMode:u.BlnM.decode(n.strokeStyleBlendMode),opacity:u.parsePercent(n.strokeStyleOpacity),content:J(n.strokeStyleContent),resolution:n.strokeStyleResolution},s.skipBytes(e,r())}),(function(e,t){var r,n,i,o=t.vectorStroke,a={strokeStyleVersion:2,strokeEnabled:!!o.strokeEnabled,fillEnabled:!!o.fillEnabled,strokeStyleLineWidth:o.lineWidth||{value:3,units:"Points"},strokeStyleLineDashOffset:o.lineDashOffset||{value:0,units:"Points"},strokeStyleMiterLimit:null!==(r=o.miterLimit)&&void 0!==r?r:100,strokeStyleLineCapType:u.strokeStyleLineCapType.encode(o.lineCapType),strokeStyleLineJoinType:u.strokeStyleLineJoinType.encode(o.lineJoinType),strokeStyleLineAlignment:u.strokeStyleLineAlignment.encode(o.lineAlignment),strokeStyleScaleLock:!!o.scaleLock,strokeStyleStrokeAdjust:!!o.strokeAdjust,strokeStyleLineDashSet:o.lineDashSet||[],strokeStyleBlendMode:u.BlnM.encode(o.blendMode),strokeStyleOpacity:u.unitsPercent(null!==(n=o.opacity)&&void 0!==n?n:1),strokeStyleContent:te(o.content||{type:"color",color:{r:0,g:0,b:0}}).descriptor,strokeStyleResolution:null!==(i=o.resolution)&&void 0!==i?i:72};u.writeVersionAndDescriptor(e,"","strokeStyle",a)})),f("artb",h("artboard"),(function(e,t,r){var n=u.readVersionAndDescriptor(e),i=n.artboardRect;t.artboard={rect:{top:i["Top "],left:i.Left,bottom:i.Btom,right:i.Rght},guideIndices:n.guideIndeces,presetName:n.artboardPresetName,color:re(n["Clr "]),backgroundType:n.artboardBackgroundType},s.skipBytes(e,r())}),(function(e,t){var r,n=t.artboard,i=n.rect,o={artboardRect:{"Top ":i.top,Left:i.left,Btom:i.bottom,Rght:i.right},guideIndeces:n.guideIndices||[],artboardPresetName:n.presetName||"","Clr ":ne(n.color),artboardBackgroundType:null!==(r=n.backgroundType)&&void 0!==r?r:1};u.writeVersionAndDescriptor(e,"","artboard",o)})),f("sn2P",h("usingAlignedRendering"),(function(e,t){return t.usingAlignedRendering=!!s.readUint32(e)}),(function(e,t){return l.writeUint32(e,t.usingAlignedRendering?1:0)}));var b=["unknown","vector","raster","image stack"];function S(e){var t,r,n,i,o,a,s={style:u.warpStyle.decode(e.warpStyle),value:e.warpValue||0,perspective:e.warpPerspective||0,perspectiveOther:e.warpPerspectiveOther||0,rotate:u.Ornt.decode(e.warpRotate),bounds:e.bounds&&{top:u.parseUnitsOrNumber(e.bounds["Top "]),left:u.parseUnitsOrNumber(e.bounds.Left),bottom:u.parseUnitsOrNumber(e.bounds.Btom),right:u.parseUnitsOrNumber(e.bounds.Rght)},uOrder:e.uOrder,vOrder:e.vOrder};null==e.deformNumRows&&null==e.deformNumCols||(s.deformNumRows=e.deformNumRows,s.deformNumCols=e.deformNumCols);var l=e.customEnvelopeWarp;if(l){s.customEnvelopeWarp={meshPoints:[]};for(var d=(null===(t=l.meshPoints.find((function(e){return"Hrzn"===e.type})))||void 0===t?void 0:t.values)||[],c=(null===(r=l.meshPoints.find((function(e){return"Vrtc"===e.type})))||void 0===r?void 0:r.values)||[],f=0;f<d.length;f++)s.customEnvelopeWarp.meshPoints.push({x:d[f],y:c[f]});(l.quiltSliceX||l.quiltSliceY)&&(s.customEnvelopeWarp.quiltSliceX=(null===(i=null===(n=l.quiltSliceX)||void 0===n?void 0:n[0])||void 0===i?void 0:i.values)||[],s.customEnvelopeWarp.quiltSliceY=(null===(a=null===(o=l.quiltSliceY)||void 0===o?void 0:o[0])||void 0===a?void 0:a.values)||[])}return s}function k(e){var t,r;return null!=e.deformNumCols||null!=e.deformNumRows||(null===(t=e.customEnvelopeWarp)||void 0===t?void 0:t.quiltSliceX)||(null===(r=e.customEnvelopeWarp)||void 0===r?void 0:r.quiltSliceY)}function U(e){var t=e.bounds,r={warpStyle:u.warpStyle.encode(e.style),warpValue:e.value||0,warpPerspective:e.perspective||0,warpPerspectiveOther:e.perspectiveOther||0,warpRotate:u.Ornt.encode(e.rotate),bounds:{"Top ":u.unitsValue(t&&t.top||{units:"Pixels",value:0},"bounds.top"),Left:u.unitsValue(t&&t.left||{units:"Pixels",value:0},"bounds.left"),Btom:u.unitsValue(t&&t.bottom||{units:"Pixels",value:0},"bounds.bottom"),Rght:u.unitsValue(t&&t.right||{units:"Pixels",value:0},"bounds.right")},uOrder:e.uOrder||0,vOrder:e.vOrder||0},n=k(e);n&&((o=r).deformNumRows=e.deformNumRows||0,o.deformNumCols=e.deformNumCols||0);var i=e.customEnvelopeWarp;if(i){var o,a=i.meshPoints||[];n?(o=r).customEnvelopeWarp={quiltSliceX:[{type:"quiltSliceX",values:i.quiltSliceX||[]}],quiltSliceY:[{type:"quiltSliceY",values:i.quiltSliceY||[]}],meshPoints:[{type:"Hrzn",values:a.map((function(e){return e.x}))},{type:"Vrtc",values:a.map((function(e){return e.y}))}]}:r.customEnvelopeWarp={meshPoints:[{type:"Hrzn",values:a.map((function(e){return e.x}))},{type:"Vrtc",values:a.map((function(e){return e.y}))}]}}return r}function I(e){return{top:s.readInt32(e),left:s.readInt32(e),bottom:s.readInt32(e),right:s.readInt32(e)}}function C(e,t){l.writeInt32(e,t.top),l.writeInt32(e,t.left),l.writeInt32(e,t.bottom),l.writeInt32(e,t.right)}function B(e){return function(t){return!!t.adjustment&&t.adjustment.type===e}}function P(e){return{shadowInput:s.readInt16(e),highlightInput:s.readInt16(e),shadowOutput:s.readInt16(e),highlightOutput:s.readInt16(e),midtoneInput:s.readInt16(e)/100}}function A(e,t){l.writeInt16(e,t.shadowInput),l.writeInt16(e,t.highlightInput),l.writeInt16(e,t.shadowOutput),l.writeInt16(e,t.highlightOutput),l.writeInt16(e,Math.round(100*t.midtoneInput))}function E(e){for(var t=s.readUint16(e),r=[],n=0;n<t;n++){var i=s.readInt16(e),o=s.readInt16(e);r.push({input:o,output:i})}return r}function D(e,t){l.writeUint16(e,t.length);for(var r=0,n=t;r<n.length;r++){var i=n[r];l.writeUint16(e,i.output),l.writeUint16(e,i.input)}}function M(e){return{a:s.readInt16(e),b:s.readInt16(e),c:s.readInt16(e),d:s.readInt16(e),hue:s.readInt16(e),saturation:s.readInt16(e),lightness:s.readInt16(e)}}function F(e,t){var r=t||{};l.writeInt16(e,r.a||0),l.writeInt16(e,r.b||0),l.writeInt16(e,r.c||0),l.writeInt16(e,r.d||0),l.writeInt16(e,r.hue||0),l.writeInt16(e,r.saturation||0),l.writeInt16(e,r.lightness||0)}function O(e){return{cyanRed:s.readInt16(e),magentaGreen:s.readInt16(e),yellowBlue:s.readInt16(e)}}function x(e,t){l.writeInt16(e,t.cyanRed||0),l.writeInt16(e,t.magentaGreen||0),l.writeInt16(e,t.yellowBlue||0)}function L(e){var t=s.readInt16(e),r=s.readInt16(e),n=s.readInt16(e);return s.skipBytes(e,2),{red:t,green:r,blue:n,constant:s.readInt16(e)}}function R(e,t){var r=t||{};l.writeInt16(e,r.red),l.writeInt16(e,r.green),l.writeInt16(e,r.blue),l.writeZeros(e,2),l.writeInt16(e,r.constant)}f("PlLd",h("placedLayer"),(function(e,t,r){if("plcL"!==s.readSignature(e))throw new Error("Invalid PlLd signature");if(3!==s.readInt32(e))throw new Error("Invalid PlLd version");var n=s.readPascalString(e,1);s.readInt32(e),s.readInt32(e),s.readInt32(e);var i=s.readInt32(e);if(!b[i])throw new Error("Invalid PlLd type");for(var o=[],a=0;a<8;a++)o.push(s.readFloat64(e));var l=s.readInt32(e);if(0!==l)throw new Error("Invalid Warp version "+l);var d=u.readVersionAndDescriptor(e);t.placedLayer=t.placedLayer||{id:n,type:b[i],transform:o,warp:S(d)},s.skipBytes(e,r())}),(function(e,t){var r=t.placedLayer;if(l.writeSignature(e,"plcL"),l.writeInt32(e,3),l.writePascalString(e,r.id,1),l.writeInt32(e,1),l.writeInt32(e,1),l.writeInt32(e,16),-1===b.indexOf(r.type))throw new Error("Invalid placedLayer type");l.writeInt32(e,b.indexOf(r.type));for(var n=0;n<8;n++)l.writeFloat64(e,r.transform[n]);l.writeInt32(e,0);var i=r.warp&&k(r.warp)?"quiltWarp":"warp";u.writeVersionAndDescriptor(e,"",i,U(r.warp||{}),i)})),f("SoLd",h("placedLayer"),(function(e,t,r){if("soLD"!==s.readSignature(e))throw new Error("Invalid SoLd type");if(4!==s.readInt32(e))throw new Error("Invalid SoLd version");var n=u.readVersionAndDescriptor(e);t.placedLayer={id:n.Idnt,placed:n.placed,type:b[n.Type],transform:n.Trnf,width:n["Sz  "].Wdth,height:n["Sz  "].Hght,resolution:u.parseUnits(n.Rslt),warp:S(n.quiltWarp||n.warp)},n.nonAffineTransform&&n.nonAffineTransform.some((function(e,t){return e!==n.Trnf[t]}))&&(t.placedLayer.nonAffineTransform=n.nonAffineTransform),n.Crop&&(t.placedLayer.crop=n.Crop),n.comp&&(t.placedLayer.comp=n.comp),n.compInfo&&(t.placedLayer.compInfo=n.compInfo),s.skipBytes(e,r())}),(function(e,t){var r,i;l.writeSignature(e,"soLD"),l.writeInt32(e,4);var o=t.placedLayer,a=n(n({Idnt:o.id,placed:null!==(r=o.placed)&&void 0!==r?r:o.id,PgNm:1,totalPages:1},o.crop?{Crop:o.crop}:{}),{frameStep:{numerator:0,denominator:600},duration:{numerator:0,denominator:600},frameCount:1,Annt:16,Type:b.indexOf(o.type),Trnf:o.transform,nonAffineTransform:null!==(i=o.nonAffineTransform)&&void 0!==i?i:o.transform,quiltWarp:{},warp:U(o.warp||{}),"Sz  ":{Wdth:o.width||0,Hght:o.height||0},Rslt:o.resolution?u.unitsValue(o.resolution,"resolution"):{units:"Density",value:72}});if(o.warp&&k(o.warp)){var s=U(o.warp);a.quiltWarp=s,a.warp={warpStyle:"warpStyle.warpNone",warpValue:s.warpValue,warpPerspective:s.warpPerspective,warpPerspectiveOther:s.warpPerspectiveOther,warpRotate:s.warpRotate,bounds:s.bounds,uOrder:s.uOrder,vOrder:s.vOrder}}else delete a.quiltWarp;o.comp&&(a.comp=o.comp),o.compInfo&&(a.compInfo=o.compInfo),u.writeVersionAndDescriptor(e,"","null",a,a.quiltWarp?"quiltWarp":"warp")})),f("fxrp",h("referencePoint"),(function(e,t){t.referencePoint={x:s.readFloat64(e),y:s.readFloat64(e)}}),(function(e,t){l.writeFloat64(e,t.referencePoint.x),l.writeFloat64(e,t.referencePoint.y)})),a.MOCK_HANDLERS?f("Patt",(function(e){return void 0!==e._Patt}),(function(e,t,r){t._Patt=s.readBytes(e,r())}),(function(e,t){return!1})):f("Patt",(function(e){return!e}),(function(e,t,r){r()&&s.skipBytes(e,r())}),(function(e,t){})),f("Anno",(function(e){return void 0!==e.annotations}),(function(e,t,r){var n=s.readUint16(e),i=s.readUint16(e);if(2!==n||1!==i)throw new Error("Invalid Anno version");for(var o=s.readUint32(e),a=[],l=0;l<o;l++){s.readUint32(e);var u=s.readSignature(e),d=!!s.readUint8(e);s.readUint8(e),s.readUint16(e);var c=I(e),f=I(e),p=s.readColor(e),h=s.readPascalString(e,2),g=s.readPascalString(e,2),v=s.readPascalString(e,2);s.readUint32(e),s.readSignature(e);var y=s.readUint32(e),w=void 0;if("txtA"===u)y>=2&&65279===s.readUint16(e)?w=s.readUnicodeStringWithLength(e,(y-2)/2):(e.offset-=2,w=s.readAsciiString(e,y)),w=w.replace(/\r/g,"\n");else{if("sndA"!==u)throw new Error("Unknown annotation type");w=s.readBytes(e,y)}a.push({type:"txtA"===u?"text":"sound",open:d,iconLocation:c,popupLocation:f,color:p,author:h,name:g,date:v,data:w})}t.annotations=a,s.skipBytes(e,r())}),(function(e,t){var r=t.annotations;l.writeUint16(e,2),l.writeUint16(e,1),l.writeUint32(e,r.length);for(var n=0,i=r;n<i.length;n++){var o=i[n],a="sound"===o.type;if(a&&!(o.data instanceof Uint8Array))throw new Error("Sound annotation data should be Uint8Array");if(!a&&"string"!=typeof o.data)throw new Error("Text annotation data should be string");var s=e.offset;l.writeUint32(e,0),l.writeSignature(e,a?"sndA":"txtA"),l.writeUint8(e,o.open?1:0),l.writeUint8(e,28),l.writeUint16(e,1),C(e,o.iconLocation),C(e,o.popupLocation),l.writeColor(e,o.color),l.writePascalString(e,o.author||"",2),l.writePascalString(e,o.name||"",2),l.writePascalString(e,o.date||"",2);var u=e.offset;l.writeUint32(e,0),l.writeSignature(e,a?"sndM":"txtC"),l.writeUint32(e,0);var d=e.offset;if(a)l.writeBytes(e,o.data);else{l.writeUint16(e,65279);for(var c=o.data.replace(/\n/g,"\r"),f=0;f<c.length;f++)l.writeUint16(e,c.charCodeAt(f))}e.view.setUint32(s,e.offset-s,!1),e.view.setUint32(u,e.offset-u,!1),e.view.setUint32(d-4,e.offset-d,!1)}})),f("lnk2",(function(e){return!!e.linkedFiles&&e.linkedFiles.length>0}),(function(e,t,r,n,i){var o=t;for(o.linkedFiles=[];r()>8;){var a=g(e),l=e.offset,d=s.readSignature(e),c=s.readInt32(e),f=s.readPascalString(e,1),p=s.readUnicodeString(e),h=s.readSignature(e).trim(),v=s.readSignature(e).trim(),y=g(e),w=s.readUint8(e)?u.readVersionAndDescriptor(e):void 0,m=("liFE"===d&&u.readVersionAndDescriptor(e),{id:f,name:p,data:void 0});if(h&&(m.type=h),v&&(m.creator=v),w&&(m.descriptor=w),"liFE"===d&&c>3){var b=s.readInt32(e),S=s.readUint8(e),k=s.readUint8(e),U=s.readUint8(e),I=s.readUint8(e),C=s.readFloat64(e),B=Math.floor(C),P=1e3*(C-B);m.time=new Date(b,S,k,U,I,B,P)}var A="liFE"===d?g(e):0;for("liFA"===d&&s.skipBytes(e,8),"liFD"===d&&(m.data=s.readBytes(e,y)),c>=5&&(m.childDocumentID=s.readUnicodeString(e)),c>=6&&(m.assetModTime=s.readFloat64(e)),c>=7&&(m.assetLockedState=s.readUint8(e)),"liFE"===d&&(m.data=s.readBytes(e,A)),i.skipLinkedFilesData&&(m.data=void 0),o.linkedFiles.push(m);a%4;)a++;e.offset=l+a}s.skipBytes(e,r())}),(function(e,t){for(var r=0,n=t.linkedFiles;r<n.length;r++){var i=n[r],o=2;null!=i.assetLockedState?o=7:null!=i.assetModTime?o=6:null!=i.childDocumentID&&(o=5),l.writeUint32(e,0),l.writeUint32(e,0);var a=e.offset;if(l.writeSignature(e,i.data?"liFD":"liFA"),l.writeInt32(e,o),l.writePascalString(e,i.id||"",1),l.writeUnicodeStringWithPadding(e,i.name||""),l.writeSignature(e,i.type?(i.type+"    ").substring(0,4):"    "),l.writeSignature(e,i.creator?(i.creator+"    ").substring(0,4):"\0\0\0\0"),v(e,i.data?i.data.byteLength:0),i.descriptor&&i.descriptor.compInfo){var s={compInfo:i.descriptor.compInfo};l.writeUint8(e,1),u.writeVersionAndDescriptor(e,"","null",s)}else l.writeUint8(e,0);i.data?l.writeBytes(e,i.data):v(e,0),o>=5&&l.writeUnicodeStringWithPadding(e,i.childDocumentID||""),o>=6&&l.writeFloat64(e,i.assetModTime||0),o>=7&&l.writeUint8(e,i.assetLockedState||0);var d=e.offset-a;for(e.view.setUint32(a-4,d,!1);d%4;)d++,l.writeUint8(e,0)}})),p("lnkD","lnk2"),p("lnk3","lnk2"),f("lnkE",(function(e){return void 0!==e._lnkE}),(function(e,t,r,n,i){i.logMissingFeatures&&r()&&console.log("Non-empty lnkE layer info ("+r()+" bytes)"),a.MOCK_HANDLERS&&(t._lnkE=s.readBytes(e,r()))}),(function(e,t){return a.MOCK_HANDLERS&&l.writeBytes(e,t._lnkE)})),f("pths",h("pathList"),(function(e,t){u.readVersionAndDescriptor(e),t.pathList=[]}),(function(e,t){u.writeVersionAndDescriptor(e,"","pathsDataClass",{pathList:[]})})),f("lyvr",h("version"),(function(e,t){return t.version=s.readUint32(e)}),(function(e,t){return l.writeUint32(e,t.version)})),f("brit",B("brightness/contrast"),(function(e,t,r){t.adjustment||(t.adjustment={type:"brightness/contrast",brightness:s.readInt16(e),contrast:s.readInt16(e),meanValue:s.readInt16(e),labColorOnly:!!s.readUint8(e),useLegacy:!0}),s.skipBytes(e,r())}),(function(e,t){var r,n=t.adjustment;l.writeInt16(e,n.brightness||0),l.writeInt16(e,n.contrast||0),l.writeInt16(e,null!==(r=n.meanValue)&&void 0!==r?r:127),l.writeUint8(e,n.labColorOnly?1:0),l.writeZeros(e,1)})),f("levl",B("levels"),(function(e,t,r){if(2!==s.readUint16(e))throw new Error("Invalid levl version");t.adjustment=n(n({},t.adjustment),{type:"levels",rgb:P(e),red:P(e),green:P(e),blue:P(e)}),s.skipBytes(e,r())}),(function(e,t){var r=t.adjustment,n={shadowInput:0,highlightInput:255,shadowOutput:0,highlightOutput:255,midtoneInput:1};l.writeUint16(e,2),A(e,r.rgb||n),A(e,r.red||n),A(e,r.blue||n),A(e,r.green||n);for(var i=0;i<59;i++)A(e,n)})),f("curv",B("curves"),(function(e,t,r){if(s.readUint8(e),1!==s.readUint16(e))throw new Error("Invalid curv version");s.readUint16(e);var i=s.readUint16(e),o={type:"curves"};1&i&&(o.rgb=E(e)),2&i&&(o.red=E(e)),4&i&&(o.green=E(e)),8&i&&(o.blue=E(e)),t.adjustment=n(n({},t.adjustment),o),s.skipBytes(e,r())}),(function(e,t){var r=t.adjustment,n=r.rgb,i=r.red,o=r.green,a=r.blue,s=0,u=0;n&&n.length&&(s|=1,u++),i&&i.length&&(s|=2,u++),o&&o.length&&(s|=4,u++),a&&a.length&&(s|=8,u++),l.writeUint8(e,0),l.writeUint16(e,1),l.writeUint16(e,0),l.writeUint16(e,s),n&&n.length&&D(e,n),i&&i.length&&D(e,i),o&&o.length&&D(e,o),a&&a.length&&D(e,a),l.writeSignature(e,"Crv "),l.writeUint16(e,4),l.writeUint16(e,0),l.writeUint16(e,u),n&&n.length&&(l.writeUint16(e,0),D(e,n)),i&&i.length&&(l.writeUint16(e,1),D(e,i)),o&&o.length&&(l.writeUint16(e,2),D(e,o)),a&&a.length&&(l.writeUint16(e,3),D(e,a)),l.writeZeros(e,2)})),f("expA",B("exposure"),(function(e,t,r){if(1!==s.readUint16(e))throw new Error("Invalid expA version");t.adjustment=n(n({},t.adjustment),{type:"exposure",exposure:s.readFloat32(e),offset:s.readFloat32(e),gamma:s.readFloat32(e)}),s.skipBytes(e,r())}),(function(e,t){var r=t.adjustment;l.writeUint16(e,1),l.writeFloat32(e,r.exposure),l.writeFloat32(e,r.offset),l.writeFloat32(e,r.gamma),l.writeZeros(e,2)})),f("vibA",B("vibrance"),(function(e,t,r){var n=u.readVersionAndDescriptor(e);t.adjustment={type:"vibrance"},void 0!==n.vibrance&&(t.adjustment.vibrance=n.vibrance),void 0!==n.Strt&&(t.adjustment.saturation=n.Strt),s.skipBytes(e,r())}),(function(e,t){var r=t.adjustment,n={};void 0!==r.vibrance&&(n.vibrance=r.vibrance),void 0!==r.saturation&&(n.Strt=r.saturation),u.writeVersionAndDescriptor(e,"","null",n)})),f("hue2",B("hue/saturation"),(function(e,t,r){if(2!==s.readUint16(e))throw new Error("Invalid hue2 version");t.adjustment=n(n({},t.adjustment),{type:"hue/saturation",master:M(e),reds:M(e),yellows:M(e),greens:M(e),cyans:M(e),blues:M(e),magentas:M(e)}),s.skipBytes(e,r())}),(function(e,t){var r=t.adjustment;l.writeUint16(e,2),F(e,r.master),F(e,r.reds),F(e,r.yellows),F(e,r.greens),F(e,r.cyans),F(e,r.blues),F(e,r.magentas)})),f("blnc",B("color balance"),(function(e,t,r){t.adjustment={type:"color balance",shadows:O(e),midtones:O(e),highlights:O(e),preserveLuminosity:!!s.readUint8(e)},s.skipBytes(e,r())}),(function(e,t){var r=t.adjustment;x(e,r.shadows||{}),x(e,r.midtones||{}),x(e,r.highlights||{}),l.writeUint8(e,r.preserveLuminosity?1:0),l.writeZeros(e,1)})),f("blwh",B("black & white"),(function(e,t,r){var n=u.readVersionAndDescriptor(e);t.adjustment={type:"black & white",reds:n["Rd  "],yellows:n.Yllw,greens:n["Grn "],cyans:n["Cyn "],blues:n["Bl  "],magentas:n.Mgnt,useTint:!!n.useTint,presetKind:n.bwPresetKind,presetFileName:n.blackAndWhitePresetFileName},void 0!==n.tintColor&&(t.adjustment.tintColor=re(n.tintColor)),s.skipBytes(e,r())}),(function(e,t){var r=t.adjustment,n={"Rd  ":r.reds||0,Yllw:r.yellows||0,"Grn ":r.greens||0,"Cyn ":r.cyans||0,"Bl  ":r.blues||0,Mgnt:r.magentas||0,useTint:!!r.useTint,tintColor:ne(r.tintColor),bwPresetKind:r.presetKind||0,blackAndWhitePresetFileName:r.presetFileName||""};u.writeVersionAndDescriptor(e,"","null",n)})),f("phfl",B("photo filter"),(function(e,t,r){var n,i=s.readUint16(e);if(2!==i&&3!==i)throw new Error("Invalid phfl version");n=2===i?s.readColor(e):{l:s.readInt32(e)/100,a:s.readInt32(e)/100,b:s.readInt32(e)/100},t.adjustment={type:"photo filter",color:n,density:s.readUint32(e)/100,preserveLuminosity:!!s.readUint8(e)},s.skipBytes(e,r())}),(function(e,t){var r=t.adjustment;l.writeUint16(e,2),l.writeColor(e,r.color||{l:0,a:0,b:0}),l.writeUint32(e,100*(r.density||0)),l.writeUint8(e,r.preserveLuminosity?1:0),l.writeZeros(e,3)})),f("mixr",B("channel mixer"),(function(e,t,r){if(1!==s.readUint16(e))throw new Error("Invalid mixr version");var i=t.adjustment=n(n({},t.adjustment),{type:"channel mixer",monochrome:!!s.readUint16(e)});i.monochrome||(i.red=L(e),i.green=L(e),i.blue=L(e)),i.gray=L(e),s.skipBytes(e,r())}),(function(e,t){var r=t.adjustment;l.writeUint16(e,1),l.writeUint16(e,r.monochrome?1:0),r.monochrome?(R(e,r.gray),l.writeZeros(e,30)):(R(e,r.red),R(e,r.green),R(e,r.blue),R(e,r.gray))}));var T=a.createEnum("colorLookupType","3DLUT",{"3dlut":"3DLUT",abstractProfile:"abstractProfile",deviceLinkProfile:"deviceLinkProfile"}),N=a.createEnum("LUTFormatType","look",{look:"LUTFormatLOOK",cube:"LUTFormatCUBE","3dl":"LUTFormat3DL"}),V=a.createEnum("colorLookupOrder","rgb",{rgb:"rgbOrder",bgr:"bgrOrder"});f("clrL",B("color lookup"),(function(e,t,r){if(1!==s.readUint16(e))throw new Error("Invalid clrL version");var n=u.readVersionAndDescriptor(e);t.adjustment={type:"color lookup"};var i=t.adjustment;void 0!==n.lookupType&&(i.lookupType=T.decode(n.lookupType)),void 0!==n["Nm  "]&&(i.name=n["Nm  "]),void 0!==n.Dthr&&(i.dither=n.Dthr),void 0!==n.profile&&(i.profile=n.profile),void 0!==n.LUTFormat&&(i.lutFormat=N.decode(n.LUTFormat)),void 0!==n.dataOrder&&(i.dataOrder=V.decode(n.dataOrder)),void 0!==n.tableOrder&&(i.tableOrder=V.decode(n.tableOrder)),void 0!==n.LUT3DFileData&&(i.lut3DFileData=n.LUT3DFileData),void 0!==n.LUT3DFileName&&(i.lut3DFileName=n.LUT3DFileName),s.skipBytes(e,r())}),(function(e,t){var r=t.adjustment,n={};void 0!==r.lookupType&&(n.lookupType=T.encode(r.lookupType)),void 0!==r.name&&(n["Nm  "]=r.name),void 0!==r.dither&&(n.Dthr=r.dither),void 0!==r.profile&&(n.profile=r.profile),void 0!==r.lutFormat&&(n.LUTFormat=N.encode(r.lutFormat)),void 0!==r.dataOrder&&(n.dataOrder=V.encode(r.dataOrder)),void 0!==r.tableOrder&&(n.tableOrder=V.encode(r.tableOrder)),void 0!==r.lut3DFileData&&(n.LUT3DFileData=r.lut3DFileData),void 0!==r.lut3DFileName&&(n.LUT3DFileName=r.lut3DFileName),l.writeUint16(e,1),u.writeVersionAndDescriptor(e,"","null",n)})),f("nvrt",B("invert"),(function(e,t,r){t.adjustment={type:"invert"},s.skipBytes(e,r())}),(function(){})),f("post",B("posterize"),(function(e,t,r){t.adjustment={type:"posterize",levels:s.readUint16(e)},s.skipBytes(e,r())}),(function(e,t){var r,n=t.adjustment;l.writeUint16(e,null!==(r=n.levels)&&void 0!==r?r:4),l.writeZeros(e,2)})),f("thrs",B("threshold"),(function(e,t,r){t.adjustment={type:"threshold",level:s.readUint16(e)},s.skipBytes(e,r())}),(function(e,t){var r,n=t.adjustment;l.writeUint16(e,null!==(r=n.level)&&void 0!==r?r:128),l.writeZeros(e,2)}));var G=["","","","rgb","hsb","","lab"];function _(e){return{c:s.readInt16(e),m:s.readInt16(e),y:s.readInt16(e),k:s.readInt16(e)}}function j(e,t){var r=t||{};l.writeInt16(e,r.c),l.writeInt16(e,r.m),l.writeInt16(e,r.y),l.writeInt16(e,r.k)}function z(e){var t={enabled:!!e.enab,position:u.FStl.decode(e.Styl),fillType:u.FrFl.decode(e.PntT),blendMode:u.BlnM.decode(e["Md  "]),opacity:u.parsePercent(e.Opct),size:u.parseUnits(e["Sz  "])};return void 0!==e.present&&(t.present=e.present),void 0!==e.showInDialog&&(t.showInDialog=e.showInDialog),void 0!==e.overprint&&(t.overprint=e.overprint),e["Clr "]&&(t.color=re(e["Clr "])),e.Grad&&(t.gradient=$(e)),e.Ptrn&&(t.pattern=Z(e)),t}function H(e){var t={};return t.enab=!!e.enabled,void 0!==e.present&&(t.present=!!e.present),void 0!==e.showInDialog&&(t.showInDialog=!!e.showInDialog),t.Styl=u.FStl.encode(e.position),t.PntT=u.FrFl.encode(e.fillType),t["Md  "]=u.BlnM.encode(e.blendMode),t.Opct=u.unitsPercent(e.opacity),t["Sz  "]=u.unitsValue(e.size,"size"),e.color&&(t["Clr "]=ne(e.color)),e.gradient&&(t=n(n({},t),Q(e.gradient))),e.pattern&&(t=n(n({},t),ee(e.pattern))),void 0!==e.overprint&&(t.overprint=!!e.overprint),t}function W(e,t){var r={};return e.masterFXSwitch||(r.disabled=!0),e["Scl "]&&(r.scale=u.parsePercent(e["Scl "])),e.DrSh&&(r.dropShadow=[ie(e.DrSh,t)]),e.dropShadowMulti&&(r.dropShadow=e.dropShadowMulti.map((function(e){return ie(e,t)}))),e.IrSh&&(r.innerShadow=[ie(e.IrSh,t)]),e.innerShadowMulti&&(r.innerShadow=e.innerShadowMulti.map((function(e){return ie(e,t)}))),e.OrGl&&(r.outerGlow=ie(e.OrGl,t)),e.IrGl&&(r.innerGlow=ie(e.IrGl,t)),e.ebbl&&(r.bevel=ie(e.ebbl,t)),e.SoFi&&(r.solidFill=[ie(e.SoFi,t)]),e.solidFillMulti&&(r.solidFill=e.solidFillMulti.map((function(e){return ie(e,t)}))),e.patternFill&&(r.patternOverlay=ie(e.patternFill,t)),e.GrFl&&(r.gradientOverlay=[ie(e.GrFl,t)]),e.gradientFillMulti&&(r.gradientOverlay=e.gradientFillMulti.map((function(e){return ie(e,t)}))),e.ChFX&&(r.satin=ie(e.ChFX,t)),e.FrFX&&(r.stroke=[z(e.FrFX)]),e.frameFXMulti&&(r.stroke=e.frameFXMulti.map((function(e){return z(e)}))),r}function K(e,t,r){for(var n,i,o,a,s,l,d,c,f,p,h,g,v,y=r?{"Scl ":u.unitsPercent(null!==(n=e.scale)&&void 0!==n?n:1),masterFXSwitch:!e.disabled}:{masterFXSwitch:!e.disabled,"Scl ":u.unitsPercent(null!==(i=e.scale)&&void 0!==i?i:1)},w=0,m=["dropShadow","innerShadow","solidFill","gradientOverlay","stroke"];w<m.length;w++)if(e[k=m[w]]&&!Array.isArray(e[k]))throw new Error(k+" should be an array");if((null===(o=e.dropShadow)||void 0===o?void 0:o[0])&&!r&&(y.DrSh=oe(e.dropShadow[0],"dropShadow",t)),(null===(a=e.dropShadow)||void 0===a?void 0:a[0])&&r&&(y.dropShadowMulti=e.dropShadow.map((function(e){return oe(e,"dropShadow",t)}))),(null===(s=e.innerShadow)||void 0===s?void 0:s[0])&&!r&&(y.IrSh=oe(e.innerShadow[0],"innerShadow",t)),(null===(l=e.innerShadow)||void 0===l?void 0:l[0])&&r&&(y.innerShadowMulti=e.innerShadow.map((function(e){return oe(e,"innerShadow",t)}))),e.outerGlow&&(y.OrGl=oe(e.outerGlow,"outerGlow",t)),(null===(d=e.solidFill)||void 0===d?void 0:d[0])&&r&&(y.solidFillMulti=e.solidFill.map((function(e){return oe(e,"solidFill",t)}))),(null===(c=e.gradientOverlay)||void 0===c?void 0:c[0])&&r&&(y.gradientFillMulti=e.gradientOverlay.map((function(e){return oe(e,"gradientOverlay",t)}))),(null===(f=e.stroke)||void 0===f?void 0:f[0])&&r&&(y.frameFXMulti=e.stroke.map((function(e){return H(e)}))),e.innerGlow&&(y.IrGl=oe(e.innerGlow,"innerGlow",t)),e.bevel&&(y.ebbl=oe(e.bevel,"bevel",t)),(null===(p=e.solidFill)||void 0===p?void 0:p[0])&&!r&&(y.SoFi=oe(e.solidFill[0],"solidFill",t)),e.patternOverlay&&(y.patternFill=oe(e.patternOverlay,"patternOverlay",t)),(null===(h=e.gradientOverlay)||void 0===h?void 0:h[0])&&!r&&(y.GrFl=oe(e.gradientOverlay[0],"gradientOverlay",t)),e.satin&&(y.ChFX=oe(e.satin,"satin",t)),(null===(g=e.stroke)||void 0===g?void 0:g[0])&&!r&&(y.FrFX=H(null===(v=e.stroke)||void 0===v?void 0:v[0])),r){y.numModifyingFX=0;for(var b=0,S=Object.keys(e);b<S.length;b++){var k,U=e[k=S[b]];if(Array.isArray(U))for(var I=0,C=U;I<C.length;I++)C[I].enabled&&y.numModifyingFX++}}return y}function X(e){return Object.keys(e).map((function(t){return e[t]})).some((function(e){return Array.isArray(e)&&e.length>1}))}function Y(e){if("GrdF.CstS"===e.GrdF){var t=e.Intr||4096;return{type:"solid",name:e["Nm  "],smoothness:e.Intr/4096,colorStops:e.Clrs.map((function(e){return{color:re(e["Clr "]),location:e.Lctn/t,midpoint:e.Mdpn/100}})),opacityStops:e.Trns.map((function(e){return{opacity:u.parsePercent(e.Opct),location:e.Lctn/t,midpoint:e.Mdpn/100}}))}}return{type:"noise",name:e["Nm  "],roughness:e.Smth/4096,colorModel:u.ClrS.decode(e.ClrS),randomSeed:e.RndS,restrictColors:!!e.VctC,addTransparency:!!e.ShTr,min:e["Mnm "].map((function(e){return e/100})),max:e["Mxm "].map((function(e){return e/100}))}}function q(e){var t,r;if("solid"===e.type){var n=Math.round(4096*(null!==(t=e.smoothness)&&void 0!==t?t:1));return{"Nm  ":e.name||"",GrdF:"GrdF.CstS",Intr:n,Clrs:e.colorStops.map((function(e){var t;return{"Clr ":ne(e.color),Type:"Clry.UsrS",Lctn:Math.round(e.location*n),Mdpn:Math.round(100*(null!==(t=e.midpoint)&&void 0!==t?t:.5))}})),Trns:e.opacityStops.map((function(e){var t;return{Opct:u.unitsPercent(e.opacity),Lctn:Math.round(e.location*n),Mdpn:Math.round(100*(null!==(t=e.midpoint)&&void 0!==t?t:.5))}}))}}return{GrdF:"GrdF.ClNs","Nm  ":e.name||"",ShTr:!!e.addTransparency,VctC:!!e.restrictColors,ClrS:u.ClrS.encode(e.colorModel),RndS:e.randomSeed||0,Smth:Math.round(4096*(null!==(r=e.roughness)&&void 0!==r?r:1)),"Mnm ":(e.min||[0,0,0,0]).map((function(e){return 100*e})),"Mxm ":(e.max||[1,1,1,1]).map((function(e){return 100*e}))}}function $(e){var t=Y(e.Grad);return t.style=u.GrdT.decode(e.Type),void 0!==e.Dthr&&(t.dither=e.Dthr),void 0!==e.Rvrs&&(t.reverse=e.Rvrs),void 0!==e.Angl&&(t.angle=u.parseAngle(e.Angl)),void 0!==e["Scl "]&&(t.scale=u.parsePercent(e["Scl "])),void 0!==e.Algn&&(t.align=e.Algn),void 0!==e.Ofst&&(t.offset={x:u.parsePercent(e.Ofst.Hrzn),y:u.parsePercent(e.Ofst.Vrtc)}),t}function Z(e){var t={name:e.Ptrn["Nm  "],id:e.Ptrn.Idnt};return void 0!==e.Lnkd&&(t.linked=e.Lnkd),void 0!==e.phase&&(t.phase={x:e.phase.Hrzn,y:e.phase.Vrtc}),t}function J(e){if("Grad"in e)return $(e);if("Ptrn"in e)return n({type:"pattern"},Z(e));if("Clr "in e)return{type:"color",color:re(e["Clr "])};throw new Error("Invalid vector content")}function Q(e){var t={};return void 0!==e.dither&&(t.Dthr=e.dither),void 0!==e.reverse&&(t.Rvrs=e.reverse),void 0!==e.angle&&(t.Angl=u.unitsAngle(e.angle)),t.Type=u.GrdT.encode(e.style),void 0!==e.align&&(t.Algn=e.align),void 0!==e.scale&&(t["Scl "]=u.unitsPercent(e.scale)),e.offset&&(t.Ofst={Hrzn:u.unitsPercent(e.offset.x),Vrtc:u.unitsPercent(e.offset.y)}),t.Grad=q(e),t}function ee(e){var t={Ptrn:{"Nm  ":e.name||"",Idnt:e.id||""}};return void 0!==e.linked&&(t.Lnkd=!!e.linked),void 0!==e.phase&&(t.phase={Hrzn:e.phase.x,Vrtc:e.phase.y}),t}function te(e){return"color"===e.type?{key:"SoCo",descriptor:{"Clr ":ne(e.color)}}:"pattern"===e.type?{key:"PtFl",descriptor:ee(e)}:{key:"GdFl",descriptor:Q(e)}}function re(e){if("H   "in e)return{h:u.parsePercentOrAngle(e["H   "]),s:e.Strt,b:e.Brgh};if("Rd  "in e)return{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]};if("Cyn "in e)return{c:e["Cyn "],m:e.Mgnt,y:e["Ylw "],k:e.Blck};if("Gry "in e)return{k:e["Gry "]};if("Lmnc"in e)return{l:e.Lmnc,a:e["A   "],b:e["B   "]};throw new Error("Unsupported color descriptor")}function ne(e){if(e){if("r"in e)return{"Rd  ":e.r||0,"Grn ":e.g||0,"Bl  ":e.b||0};if("h"in e)return{"H   ":u.unitsAngle(360*e.h),Strt:e.s||0,Brgh:e.b||0};if("c"in e)return{"Cyn ":e.c||0,Mgnt:e.m||0,"Ylw ":e.y||0,Blck:e.k||0};if("l"in e)return{Lmnc:e.l||0,"A   ":e.a||0,"B   ":e.b||0};if("k"in e)return{"Gry ":e.k};throw new Error("Invalid color value")}return{"Rd  ":0,"Grn ":0,"Bl  ":0}}function ie(e,t){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var o=i[n],a=e[o];switch(o){case"enab":r.enabled=!!a;break;case"uglg":r.useGlobalLight=!!a;break;case"AntA":r.antialiased=!!a;break;case"Algn":r.align=!!a;break;case"Dthr":r.dither=!!a;break;case"Invr":r.invert=!!a;break;case"Rvrs":r.reverse=!!a;break;case"Clr ":r.color=re(a);break;case"hglC":r.highlightColor=re(a);break;case"sdwC":r.shadowColor=re(a);break;case"Styl":r.position=u.FStl.decode(a);break;case"Md  ":r.blendMode=u.BlnM.decode(a);break;case"hglM":r.highlightBlendMode=u.BlnM.decode(a);break;case"sdwM":r.shadowBlendMode=u.BlnM.decode(a);break;case"bvlS":r.style=u.BESl.decode(a);break;case"bvlD":r.direction=u.BESs.decode(a);break;case"bvlT":r.technique=u.bvlT.decode(a);break;case"GlwT":r.technique=u.BETE.decode(a);break;case"glwS":r.source=u.IGSr.decode(a);break;case"Type":r.type=u.GrdT.decode(a);break;case"Opct":r.opacity=u.parsePercent(a);break;case"hglO":r.highlightOpacity=u.parsePercent(a);break;case"sdwO":r.shadowOpacity=u.parsePercent(a);break;case"lagl":case"Angl":r.angle=u.parseAngle(a);break;case"Lald":r.altitude=u.parseAngle(a);break;case"Sftn":r.soften=u.parseUnits(a);break;case"srgR":r.strength=u.parsePercent(a);break;case"blur":r.size=u.parseUnits(a);break;case"Nose":r.noise=u.parsePercent(a);break;case"Inpr":r.range=u.parsePercent(a);break;case"Ckmt":r.choke=u.parseUnits(a);break;case"ShdN":r.jitter=u.parsePercent(a);break;case"Dstn":r.distance=u.parseUnits(a);break;case"Scl ":r.scale=u.parsePercent(a);break;case"Ptrn":r.pattern={name:a["Nm  "],id:a.Idnt};break;case"phase":r.phase={x:a.Hrzn,y:a.Vrtc};break;case"Ofst":r.offset={x:u.parsePercent(a.Hrzn),y:u.parsePercent(a.Vrtc)};break;case"MpgS":case"TrnS":r.contour={name:a["Nm  "],curve:a["Crv "].map((function(e){return{x:e.Hrzn,y:e.Vrtc}}))};break;case"Grad":r.gradient=Y(a);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":r[o]=a;break;default:t&&console.log("Invalid effect key: '"+o+"':",a)}}return r}function oe(e,t,r){for(var n={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];switch(a){case"enabled":n.enab=!!s;break;case"useGlobalLight":n.uglg=!!s;break;case"antialiased":n.AntA=!!s;break;case"align":n.Algn=!!s;break;case"dither":n.Dthr=!!s;break;case"invert":n.Invr=!!s;break;case"reverse":n.Rvrs=!!s;break;case"color":n["Clr "]=ne(s);break;case"highlightColor":n.hglC=ne(s);break;case"shadowColor":n.sdwC=ne(s);break;case"position":n.Styl=u.FStl.encode(s);break;case"blendMode":n["Md  "]=u.BlnM.encode(s);break;case"highlightBlendMode":n.hglM=u.BlnM.encode(s);break;case"shadowBlendMode":n.sdwM=u.BlnM.encode(s);break;case"style":n.bvlS=u.BESl.encode(s);break;case"direction":n.bvlD=u.BESs.encode(s);break;case"technique":"bevel"===t?n.bvlT=u.bvlT.encode(s):n.GlwT=u.BETE.encode(s);break;case"source":n.glwS=u.IGSr.encode(s);break;case"type":n.Type=u.GrdT.encode(s);break;case"opacity":n.Opct=u.unitsPercent(s);break;case"highlightOpacity":n.hglO=u.unitsPercent(s);break;case"shadowOpacity":n.sdwO=u.unitsPercent(s);break;case"angle":"gradientOverlay"===t?n.Angl=u.unitsAngle(s):n.lagl=u.unitsAngle(s);break;case"altitude":n.Lald=u.unitsAngle(s);break;case"soften":n.Sftn=u.unitsValue(s,a);break;case"strength":n.srgR=u.unitsPercent(s);break;case"size":n.blur=u.unitsValue(s,a);break;case"noise":n.Nose=u.unitsPercent(s);break;case"range":n.Inpr=u.unitsPercent(s);break;case"choke":n.Ckmt=u.unitsValue(s,a);break;case"jitter":n.ShdN=u.unitsPercent(s);break;case"distance":n.Dstn=u.unitsValue(s,a);break;case"scale":n["Scl "]=u.unitsPercent(s);break;case"pattern":n.Ptrn={"Nm  ":s.name,Idnt:s.id};break;case"phase":n.phase={Hrzn:s.x,Vrtc:s.y};break;case"offset":n.Ofst={Hrzn:u.unitsPercent(s.x),Vrtc:u.unitsPercent(s.y)};break;case"contour":n["satin"===t?"MpgS":"TrnS"]={"Nm  ":s.name,"Crv ":s.curve.map((function(e){return{Hrzn:e.x,Vrtc:e.y}}))};break;case"gradient":n.Grad=q(s);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":n[a]=s;break;default:r&&console.log("Invalid effect key: '"+a+"' value:",s)}}return n}f("grdm",B("gradient map"),(function(e,t,r){if(1!==s.readUint16(e))throw new Error("Invalid grdm version");var n={type:"gradient map",gradientType:"solid"};n.reverse=!!s.readUint8(e),n.dither=!!s.readUint8(e),n.name=s.readUnicodeString(e),n.colorStops=[],n.opacityStops=[];for(var i=s.readUint16(e),o=0;o<i;o++)n.colorStops.push({location:s.readUint32(e),midpoint:s.readUint32(e)/100,color:s.readColor(e)}),s.skipBytes(e,2);var a=s.readUint16(e);for(o=0;o<a;o++)n.opacityStops.push({location:s.readUint32(e),midpoint:s.readUint32(e)/100,opacity:s.readUint16(e)/255});if(2!==s.readUint16(e))throw new Error("Invalid grdm expansion count");var l=s.readUint16(e);if(n.smoothness=l/4096,32!==s.readUint16(e))throw new Error("Invalid grdm length");n.gradientType=s.readUint16(e)?"noise":"solid",n.randomSeed=s.readUint32(e),n.addTransparency=!!s.readUint16(e),n.restrictColors=!!s.readUint16(e),n.roughness=s.readUint32(e)/4096,n.colorModel=G[s.readUint16(e)]||"rgb",n.min=[s.readUint16(e)/32768,s.readUint16(e)/32768,s.readUint16(e)/32768,s.readUint16(e)/32768],n.max=[s.readUint16(e)/32768,s.readUint16(e)/32768,s.readUint16(e)/32768,s.readUint16(e)/32768],s.skipBytes(e,r());for(var u=0,d=n.colorStops;u<d.length;u++)d[u].location/=l;for(var c=0,f=n.opacityStops;c<f.length;c++)f[c].location/=l;t.adjustment=n}),(function(e,t){var r,n,i,o=t.adjustment;l.writeUint16(e,1),l.writeUint8(e,o.reverse?1:0),l.writeUint8(e,o.dither?1:0),l.writeUnicodeStringWithPadding(e,o.name||""),l.writeUint16(e,o.colorStops&&o.colorStops.length||0);for(var a=Math.round(4096*(null!==(r=o.smoothness)&&void 0!==r?r:1)),s=0,u=o.colorStops||[];s<u.length;s++){var d=u[s];l.writeUint32(e,Math.round(d.location*a)),l.writeUint32(e,Math.round(100*d.midpoint)),l.writeColor(e,d.color),l.writeZeros(e,2)}l.writeUint16(e,o.opacityStops&&o.opacityStops.length||0);for(var c=0,f=o.opacityStops||[];c<f.length;c++)d=f[c],l.writeUint32(e,Math.round(d.location*a)),l.writeUint32(e,Math.round(100*d.midpoint)),l.writeUint16(e,Math.round(255*d.opacity));l.writeUint16(e,2),l.writeUint16(e,a),l.writeUint16(e,32),l.writeUint16(e,"noise"===o.gradientType?1:0),l.writeUint32(e,o.randomSeed||0),l.writeUint16(e,o.addTransparency?1:0),l.writeUint16(e,o.restrictColors?1:0),l.writeUint32(e,Math.round(4096*(null!==(n=o.roughness)&&void 0!==n?n:1)));var p=G.indexOf(null!==(i=o.colorModel)&&void 0!==i?i:"rgb");l.writeUint16(e,-1===p?3:p);for(var h=0;h<4;h++)l.writeUint16(e,Math.round(32768*(o.min&&o.min[h]||0)));for(h=0;h<4;h++)l.writeUint16(e,Math.round(32768*(o.max&&o.max[h]||0)));l.writeZeros(e,4)})),f("selc",B("selective color"),(function(e,t){if(1!==s.readUint16(e))throw new Error("Invalid selc version");var r=s.readUint16(e)?"absolute":"relative";s.skipBytes(e,8),t.adjustment={type:"selective color",mode:r,reds:_(e),yellows:_(e),greens:_(e),cyans:_(e),blues:_(e),magentas:_(e),whites:_(e),neutrals:_(e),blacks:_(e)}}),(function(e,t){var r=t.adjustment;l.writeUint16(e,1),l.writeUint16(e,"absolute"===r.mode?1:0),l.writeZeros(e,8),j(e,r.reds),j(e,r.yellows),j(e,r.greens),j(e,r.cyans),j(e,r.blues),j(e,r.magentas),j(e,r.whites),j(e,r.neutrals),j(e,r.blacks)})),f("CgEd",(function(e){var t=e.adjustment;return!!t&&("brightness/contrast"===t.type&&!t.useLegacy||("levels"===t.type||"curves"===t.type||"exposure"===t.type||"channel mixer"===t.type||"hue/saturation"===t.type)&&void 0!==t.presetFileName)}),(function(e,t,r){var i=u.readVersionAndDescriptor(e);if(1!==i.Vrsn)throw new Error("Invalid CgEd version");t.adjustment="presetFileName"in i?n(n({},t.adjustment),{presetKind:i.presetKind,presetFileName:i.presetFileName}):"curvesPresetFileName"in i?n(n({},t.adjustment),{presetKind:i.curvesPresetKind,presetFileName:i.curvesPresetFileName}):"mixerPresetFileName"in i?n(n({},t.adjustment),{presetKind:i.mixerPresetKind,presetFileName:i.mixerPresetFileName}):{type:"brightness/contrast",brightness:i.Brgh,contrast:i.Cntr,meanValue:i.means,useLegacy:!!i.useLegacy,labColorOnly:!!i["Lab "],auto:!!i.Auto},s.skipBytes(e,r())}),(function(e,t){var r,n,i,o,a=t.adjustment;if("levels"===a.type||"exposure"===a.type||"hue/saturation"===a.type){var s={Vrsn:1,presetKind:null!==(r=a.presetKind)&&void 0!==r?r:1,presetFileName:a.presetFileName||""};u.writeVersionAndDescriptor(e,"","null",s)}else if("curves"===a.type)s={Vrsn:1,curvesPresetKind:null!==(n=a.presetKind)&&void 0!==n?n:1,curvesPresetFileName:a.presetFileName||""},u.writeVersionAndDescriptor(e,"","null",s);else if("channel mixer"===a.type)s={Vrsn:1,mixerPresetKind:null!==(i=a.presetKind)&&void 0!==i?i:1,mixerPresetFileName:a.presetFileName||""},u.writeVersionAndDescriptor(e,"","null",s);else{if("brightness/contrast"!==a.type)throw new Error("Unhandled CgEd case");s={Vrsn:1,Brgh:a.brightness||0,Cntr:a.contrast||0,means:null!==(o=a.meanValue)&&void 0!==o?o:127,"Lab ":!!a.labColorOnly,useLegacy:!!a.useLegacy,Auto:!!a.auto},u.writeVersionAndDescriptor(e,"","null",s)}})),f("Txt2",h("engineData"),(function(e,t,r){var n=s.readBytes(e,r());t.engineData=i.fromByteArray(n)}),(function(e,t){var r=i.toByteArray(t.engineData);l.writeBytes(e,r)})),f("FMsk",h("filterMask"),(function(e,t){t.filterMask={colorSpace:s.readColor(e),opacity:s.readUint16(e)/255}}),(function(e,t){var r;l.writeColor(e,t.filterMask.colorSpace),l.writeUint16(e,255*a.clamp(null!==(r=t.filterMask.opacity)&&void 0!==r?r:1,0,1))})),f("artd",(function(e){return void 0!==e.artboards}),(function(e,t,r){var n=u.readVersionAndDescriptor(e);t.artboards={count:n["Cnt "],autoExpandOffset:{horizontal:n.autoExpandOffset.Hrzn,vertical:n.autoExpandOffset.Vrtc},origin:{horizontal:n.origin.Hrzn,vertical:n.origin.Vrtc},autoExpandEnabled:n.autoExpandEnabled,autoNestEnabled:n.autoNestEnabled,autoPositionEnabled:n.autoPositionEnabled,shrinkwrapOnSaveEnabled:n.shrinkwrapOnSaveEnabled,docDefaultNewArtboardBackgroundColor:re(n.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:n.docDefaultNewArtboardBackgroundType},s.skipBytes(e,r())}),(function(e,t){var r,n,i,o,a,s=t.artboards,l={"Cnt ":s.count,autoExpandOffset:s.autoExpandOffset?{Hrzn:s.autoExpandOffset.horizontal,Vrtc:s.autoExpandOffset.vertical}:{Hrzn:0,Vrtc:0},origin:s.origin?{Hrzn:s.origin.horizontal,Vrtc:s.origin.vertical}:{Hrzn:0,Vrtc:0},autoExpandEnabled:null===(r=s.autoExpandEnabled)||void 0===r||r,autoNestEnabled:null===(n=s.autoNestEnabled)||void 0===n||n,autoPositionEnabled:null===(i=s.autoPositionEnabled)||void 0===i||i,shrinkwrapOnSaveEnabled:null===(o=s.shrinkwrapOnSaveEnabled)||void 0===o||o,docDefaultNewArtboardBackgroundColor:ne(s.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:null!==(a=s.docDefaultNewArtboardBackgroundType)&&void 0!==a?a:1};u.writeVersionAndDescriptor(e,"","null",l,"artd")})),t.hasMultiEffects=X,f("lfx2",(function(e){return void 0!==e.effects&&!X(e.effects)}),(function(e,t,r,n,i){if(0!==s.readUint32(e))throw new Error("Invalid lfx2 version");var o=u.readVersionAndDescriptor(e);t.effects=W(o,!!i.logMissingFeatures),s.skipBytes(e,r())}),(function(e,t,r,n){var i=K(t.effects,!!n.logMissingFeatures,!1);l.writeUint32(e,0),u.writeVersionAndDescriptor(e,"","null",i)})),f("cinf",h("compositorUsed"),(function(e,t,r){var n=u.readVersionAndDescriptor(e);t.compositorUsed={description:n.description,reason:n.reason,engine:n.Engn.split(".")[1],enableCompCore:n.enableCompCore.split(".")[1],enableCompCoreGPU:n.enableCompCoreGPU.split(".")[1],compCoreSupport:n.compCoreSupport.split(".")[1],compCoreGPUSupport:n.compCoreGPUSupport.split(".")[1]},s.skipBytes(e,r())}),(function(e,t){var r=t.compositorUsed,n={Vrsn:{major:1,minor:0,fix:0},description:r.description,reason:r.reason,Engn:"Engn."+r.engine,enableCompCore:"enable."+r.enableCompCore,enableCompCoreGPU:"enable."+r.enableCompCoreGPU,compCoreSupport:"reason."+r.compCoreSupport,compCoreGPUSupport:"reason."+r.compCoreGPUSupport};u.writeVersionAndDescriptor(e,"","null",n)})),f("extn",(function(e){return void 0!==e._extn}),(function(e,t){var r=u.readVersionAndDescriptor(e);a.MOCK_HANDLERS&&(t._extn=r)}),(function(e,t){a.MOCK_HANDLERS&&u.writeVersionAndDescriptor(e,"","null",t._extn)})),f("iOpa",h("fillOpacity"),(function(e,t){t.fillOpacity=s.readUint8(e)/255,s.skipBytes(e,3)}),(function(e,t){l.writeUint8(e,255*t.fillOpacity),l.writeZeros(e,3)})),f("tsly",h("transparencyShapesLayer"),(function(e,t){t.transparencyShapesLayer=!!s.readUint8(e),s.skipBytes(e,3)}),(function(e,t){l.writeUint8(e,t.transparencyShapesLayer?1:0),l.writeZeros(e,3)}))},8131:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.readCsh=void 0;var i=r(9258),o=r(2087);t.readCsh=function(e){var t=o.createReader(e.buffer,e.byteOffset,e.byteLength),r={shapes:[]};if(o.checkSignature(t,"cush"),2!==o.readUint32(t))throw new Error("Invalid version");for(var a=o.readUint32(t),s=0;s<a;s++){for(var l=o.readUnicodeString(t);t.offset%4;)t.offset++;if(1!==o.readUint32(t))throw new Error("Invalid shape version");var u=o.readUint32(t),d=t.offset+u,c=o.readPascalString(t,1),f=o.readUint32(t),p=o.readUint32(t),h=o.readUint32(t),g=o.readUint32(t)-p,v=h-f,y={paths:[]};i.readVectorMask(t,y,g,v,d-t.offset),r.shapes.push(n({name:l,id:c,width:g,height:v},y)),t.offset=d}return r}},5350:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.strokeStyleLineAlignment=t.strokeStyleLineJoinType=t.strokeStyleLineCapType=t.FrFl=t.FStl=t.ClrS=t.GrdT=t.IGSr=t.BETE=t.BESs=t.bvlT=t.BESl=t.BlnM=t.warpStyle=t.Annt=t.Ornt=t.textGridding=t.unitsValue=t.unitsPercent=t.unitsAngle=t.parseUnitsToNumber=t.parseUnitsOrNumber=t.parseUnits=t.parsePercentOrAngle=t.parsePercent=t.parseAngle=t.writeVersionAndDescriptor=t.readVersionAndDescriptor=t.writeDescriptorStructure=t.readDescriptorStructure=t.readAsciiStringOrClassId=t.setLogErrors=void 0;var n,i,o=r(8110),a=r(2087),s=r(766),l={"#Ang":"Angle","#Rsl":"Density","#Rlt":"Distance","#Nne":"None","#Prc":"Percent","#Pxl":"Pixels","#Mlm":"Millimeters","#Pnt":"Points",RrPi:"Picas",RrIn:"Inches",RrCm:"Centimeters"},u=(n=l,i={},Object.keys(n).forEach((function(e){return i[n[e]]=e})),i),d=!1;function c(e,t){return{name:e,classID:t}}t.setLogErrors=function(e){d=e};for(var f={strokeStyleContent:c("","solidColorLayer"),printProofSetup:c("Proof Setup","proofSetup"),patternFill:c("","patternFill"),Grad:c("Gradient","Grdn"),ebbl:c("","ebbl"),SoFi:c("","SoFi"),GrFl:c("","GrFl"),sdwC:c("","RGBC"),hglC:c("","RGBC"),"Clr ":c("","RGBC"),tintColor:c("","RGBC"),Ofst:c("","Pnt "),ChFX:c("","ChFX"),MpgS:c("","ShpC"),DrSh:c("","DrSh"),IrSh:c("","IrSh"),OrGl:c("","OrGl"),IrGl:c("","IrGl"),TrnS:c("","ShpC"),Ptrn:c("","Ptrn"),FrFX:c("","FrFX"),phase:c("","Pnt "),frameStep:c("","null"),duration:c("","null"),bounds:c("","Rctn"),customEnvelopeWarp:c("","customEnvelopeWarp"),warp:c("","warp"),"Sz  ":c("","Pnt "),origin:c("","Pnt "),autoExpandOffset:c("","Pnt "),keyOriginShapeBBox:c("","unitRect"),Vrsn:c("","null"),psVersion:c("","null"),docDefaultNewArtboardBackgroundColor:c("","RGBC"),artboardRect:c("","classFloatRect"),keyOriginRRectRadii:c("","radii"),keyOriginBoxCorners:c("","null"),rectangleCornerA:c("","Pnt "),rectangleCornerB:c("","Pnt "),rectangleCornerC:c("","Pnt "),rectangleCornerD:c("","Pnt "),compInfo:c("","null"),Trnf:c("Transform","Trnf"),quiltWarp:c("","quiltWarp"),generatorSettings:c("","null"),crema:c("","null")},p={"Crv ":c("","CrPt"),Clrs:c("","Clrt"),Trns:c("","TrnS"),keyDescriptorList:c("","null"),solidFillMulti:c("","SoFi"),gradientFillMulti:c("","GrFl"),dropShadowMulti:c("","DrSh"),innerShadowMulti:c("","IrSh"),frameFXMulti:c("","FrFX")},h={TEXT:["Txt ","printerName","Nm  ","Idnt","blackAndWhitePresetFileName","LUT3DFileName","presetFileName","curvesPresetFileName","mixerPresetFileName","placed","description","reason","artboardPresetName","json"],tdta:["EngineData","LUT3DFileData"],long:["TextIndex","RndS","Mdpn","Smth","Lctn","strokeStyleVersion","LaID","Vrsn","Cnt ","Brgh","Cntr","means","vibrance","Strt","bwPresetKind","presetKind","comp","compID","originalCompID","curvesPresetKind","mixerPresetKind","uOrder","vOrder","PgNm","totalPages","Crop","numerator","denominator","frameCount","Annt","keyOriginType","unitValueQuadVersion","keyOriginIndex","major","minor","fix","docDefaultNewArtboardBackgroundType","artboardBackgroundType","numModifyingFX","deformNumRows","deformNumCols"],enum:["textGridding","Ornt","warpStyle","warpRotate","Inte","Bltn","ClrS","sdwM","hglM","bvlT","bvlS","bvlD","Md  ","glwS","GrdF","GlwT","strokeStyleLineCapType","strokeStyleLineJoinType","strokeStyleLineAlignment","strokeStyleBlendMode","PntT","Styl","lookupType","LUTFormat","dataOrder","tableOrder","enableCompCore","enableCompCoreGPU","compCoreSupport","compCoreGPUSupport","Engn","enableCompCoreThreads"],bool:["PstS","printSixteenBit","masterFXSwitch","enab","uglg","antialiasGloss","useShape","useTexture","masterFXSwitch","uglg","antialiasGloss","useShape","useTexture","Algn","Rvrs","Dthr","Invr","VctC","ShTr","layerConceals","strokeEnabled","fillEnabled","strokeStyleScaleLock","strokeStyleStrokeAdjust","hardProof","MpBl","paperWhite","useLegacy","Auto","Lab ","useTint","keyShapeInvalidated","autoExpandEnabled","autoNestEnabled","autoPositionEnabled","shrinkwrapOnSaveEnabled","present","showInDialog","overprint"],doub:["warpValue","warpPerspective","warpPerspectiveOther","Intr","Wdth","Hght","strokeStyleMiterLimit","strokeStyleResolution","layerTime","keyOriginResolution","xx","xy","yx","yy","tx","ty"],UntF:["Scl ","sdwO","hglO","lagl","Lald","srgR","blur","Sftn","Opct","Dstn","Angl","Ckmt","Nose","Inpr","ShdN","strokeStyleLineWidth","strokeStyleLineDashOffset","strokeStyleOpacity","H   ","Top ","Left","Btom","Rght","Rslt","topRight","topLeft","bottomLeft","bottomRight"],VlLs:["Crv ","Clrs","Mnm ","Mxm ","Trns","pathList","strokeStyleLineDashSet","FrLs","LaSt","Trnf","nonAffineTransform","keyDescriptorList","guideIndeces","gradientFillMulti","solidFillMulti","frameFXMulti","innerShadowMulti","dropShadowMulti"],ObAr:["meshPoints","quiltSliceX","quiltSliceY"],"obj ":["null"]},g=["Rd  ","Grn ","Bl  ","Yllw","Ylw ","Cyn ","Mgnt","Blck","Gry ","Lmnc","A   ","B   "],v={"Mnm ":"long","Mxm ":"long",FrLs:"long",strokeStyleLineDashSet:"UntF",Trnf:"doub",nonAffineTransform:"doub",keyDescriptorList:"Objc",gradientFillMulti:"Objc",solidFillMulti:"Objc",frameFXMulti:"Objc",innerShadowMulti:"Objc",dropShadowMulti:"Objc"},y={},w=0,m=Object.keys(h);w<m.length;w++)for(var b=m[w],S=0,k=h[b];S<k.length;S++){var U=k[S];y[U]=b}for(var I=0,C=Object.keys(f);I<C.length;I++)U=C[I],y[U]||(y[U]="Objc");for(var B=0,P=Object.keys(p);B<P.length;B++)U=P[B],v[U]="Objc";function A(e,t,r){return"Sz  "===e?"Wdth"in t?"Objc":"units"in t?"UntF":"doub":"Type"===e?"string"==typeof t?"enum":"long":"AntA"===e?"string"==typeof t?"enum":"bool":"Hrzn"===e||"Vrtc"===e||"Top "===e||"Left"===e||"Btom"===e||"Rght"===e?"number"==typeof t?"doub":"UntF":"Vrsn"===e?"number"==typeof t?"long":"Objc":"Rd  "===e||"Grn "===e||"Bl  "===e?"artd"===r?"long":"doub":"Trnf"===e?Array.isArray(t)?"VlLs":"Objc":y[e]}function E(e){var t=a.readInt32(e);return a.readAsciiString(e,t||4)}function D(e,t){if(4===t.length&&"warp"!==t)s.writeInt32(e,0),s.writeSignature(e,t);else{s.writeInt32(e,t.length);for(var r=0;r<t.length;r++)s.writeUint8(e,t.charCodeAt(r))}}function M(e){var t={};R(e);for(var r=a.readUint32(e),n=0;n<r;n++){var i=E(e),o=O(e,a.readSignature(e));t[i]=o}return t}function F(e,t,r,n,i){d&&!r&&console.log("Missing classId for: ",t,r,n),s.writeUnicodeStringWithPadding(e,t),D(e,r);var o=Object.keys(n);s.writeUint32(e,o.length);for(var a=0,l=o;a<l.length;a++){var u=l[a],p=A(u,n[u],i),h=f[u];"Strt"!==u&&"Brgh"!==u||!("H   "in n)?-1!==g.indexOf(u)?p="RGBC"===r&&"artd"!==i?"doub":"long":"profile"===u?p="printOutput"===r?"TEXT":"tdta":"strokeStyleContent"===u?n[u]["Clr "]?h=c("","solidColorLayer"):n[u].Grad?h=c("","gradientLayer"):n[u].Ptrn?h=c("","patternLayer"):d&&console.log("Invalid strokeStyleContent value",n[u]):"bounds"===u&&"quiltWarp"===i&&(h=c("","classFloatRect")):p="doub",h&&"RGBC"===h.classID&&"H   "in n[u]&&(h={classID:"HSBC",name:""}),D(e,u),s.writeSignature(e,p||"long"),L(e,p||"long",n[u],u,h,i),d&&!p&&console.log("Missing descriptor field type for: '"+u+"' in",n)}}function O(e,t){switch(t){case"obj ":return function(e){for(var t=a.readInt32(e),r=[],n=0;n<t;n++){var i=a.readSignature(e);switch(i){case"prop":R(e);var o=E(e);r.push(o);break;case"Clss":r.push(R(e));break;case"Enmr":R(e);var s=E(e),l=E(e);r.push(s+"."+l);break;case"rele":R(e),r.push(a.readUint32(e));break;case"Idnt":case"indx":r.push(a.readInt32(e));break;case"name":R(e),r.push(a.readUnicodeString(e));break;default:throw new Error("Invalid descriptor reference type: "+i)}}return r}(e);case"Objc":case"GlbO":return M(e);case"VlLs":for(var r=a.readInt32(e),n=[],i=0;i<r;i++){var o=a.readSignature(e);n.push(O(e,o))}return n;case"doub":return a.readFloat64(e);case"UntF":var s=a.readSignature(e),u=a.readFloat64(e);if(!l[s])throw new Error("Invalid units: "+s);return{units:l[s],value:u};case"UnFl":if(s=a.readSignature(e),u=a.readFloat32(e),!l[s])throw new Error("Invalid units: "+s);return{units:l[s],value:u};case"TEXT":return a.readUnicodeString(e);case"enum":return E(e)+"."+E(e);case"long":return a.readInt32(e);case"comp":return{low:a.readUint32(e),high:a.readUint32(e)};case"bool":return!!a.readUint8(e);case"type":case"GlbC":return R(e);case"alis":var d=a.readInt32(e);return a.readAsciiString(e,d);case"tdta":var c=a.readInt32(e);return a.readBytes(e,c);case"ObAr":a.readInt32(e),a.readUnicodeString(e),E(e);var f=a.readInt32(e);for(n=[],i=0;i<f;i++){var p=E(e);a.readSignature(e),a.readSignature(e);for(var h=a.readInt32(e),g=[],v=0;v<h;v++)g.push(a.readFloat64(e));n.push({type:p,values:g})}return n;case"Pth ":a.readInt32(e);var y=a.readSignature(e);a.readInt32LE(e);var w=a.readInt32LE(e);return{sig:y,path:a.readUnicodeStringWithLength(e,w)};default:throw new Error("Invalid TySh descriptor OSType: "+t+" at "+e.offset.toString(16))}}t.readAsciiStringOrClassId=E,t.readDescriptorStructure=M,t.writeDescriptorStructure=F;var x={meshPoints:"rationalPoint",quiltSliceX:"UntF",quiltSliceY:"UntF"};function L(e,t,r,n,i,o){switch(t){case"obj ":!function(e,t,r){s.writeInt32(e,r.length);for(var n=0;n<r.length;n++){var i=r[n],o="unknown";switch("string"==typeof i&&(o=/^[a-z]+\.[a-z]+$/i.test(i)?"Enmr":"name"),s.writeSignature(e,o),o){case"Enmr":var a=i.split("."),l=a[0],u=a[1];T(e,"\0",l),D(e,l),D(e,u);break;case"name":T(e,"\0","Lyr "),s.writeUnicodeString(e,i+"\0");break;default:throw new Error("Invalid descriptor reference type: "+o)}}}(e,0,r);break;case"Objc":case"GlbO":if(!i)throw new Error("Missing ext type for: '"+n+"' ("+JSON.stringify(r)+")");F(e,i.name,i.classID,r,o);break;case"VlLs":s.writeInt32(e,r.length);for(var a=0;a<r.length;a++){var l=v[n];s.writeSignature(e,l||"long"),L(e,l||"long",r[a],"",p[n],o),d&&!l&&console.log("Missing descriptor array type for: '"+n+"' in",r)}break;case"doub":s.writeFloat64(e,r);break;case"UntF":if(!u[r.units])throw new Error("Invalid units: "+r.units+" in "+n);s.writeSignature(e,u[r.units]),s.writeFloat64(e,r.value);break;case"UnFl":if(!u[r.units])throw new Error("Invalid units: "+r.units+" in "+n);s.writeSignature(e,u[r.units]),s.writeFloat32(e,r.value);break;case"TEXT":s.writeUnicodeStringWithPadding(e,r);break;case"enum":var c=r.split("."),f=c[0],h=c[1];D(e,f),D(e,h);break;case"long":s.writeInt32(e,r);break;case"bool":s.writeUint8(e,r?1:0);break;case"tdta":s.writeInt32(e,r.byteLength),s.writeBytes(e,r);break;case"ObAr":s.writeInt32(e,16),s.writeUnicodeStringWithPadding(e,"");var g=x[n];if(!g)throw new Error("Not implemented ObArType for: "+n);for(D(e,g),s.writeInt32(e,r.length),a=0;a<r.length;a++){D(e,r[a].type),s.writeSignature(e,"UnFl"),s.writeSignature(e,"#Pxl"),s.writeInt32(e,r[a].values.length);for(var y=0;y<r[a].values.length;y++)s.writeFloat64(e,r[a].values[y])}break;default:throw new Error("Not implemented descriptor OSType: "+t)}}function R(e){return{name:a.readUnicodeString(e),classID:E(e)}}function T(e,t,r){s.writeUnicodeString(e,t),D(e,r)}function N(e){var t=e.units,r=e.value;if("Pixels"!==t&&"Millimeters"!==t&&"Points"!==t&&"None"!==t&&"Picas"!==t&&"Inches"!==t&&"Centimeters"!==t&&"Density"!==t)throw new Error("Invalid units: "+JSON.stringify({units:t,value:r}));return{value:r,units:t}}t.readVersionAndDescriptor=function(e){var t=a.readUint32(e);if(16!==t)throw new Error("Invalid descriptor version: "+t);return M(e)},t.writeVersionAndDescriptor=function(e,t,r,n,i){void 0===i&&(i=""),s.writeUint32(e,16),F(e,t,r,n,i)},t.parseAngle=function(e){if(void 0===e)return 0;if("Angle"!==e.units)throw new Error("Invalid units: "+e.units);return e.value},t.parsePercent=function(e){if(void 0===e)return 1;if("Percent"!==e.units)throw new Error("Invalid units: "+e.units);return e.value/100},t.parsePercentOrAngle=function(e){if(void 0===e)return 1;if("Percent"===e.units)return e.value/100;if("Angle"===e.units)return e.value/360;throw new Error("Invalid units: "+e.units)},t.parseUnits=N,t.parseUnitsOrNumber=function(e,t){return void 0===t&&(t="Pixels"),"number"==typeof e?{value:e,units:t}:N(e)},t.parseUnitsToNumber=function(e,t){var r=e.units,n=e.value;if(r!==t)throw new Error("Invalid units: "+JSON.stringify({units:r,value:n}));return n},t.unitsAngle=function(e){return{units:"Angle",value:e||0}},t.unitsPercent=function(e){return{units:"Percent",value:Math.round(100*(e||0))}},t.unitsValue=function(e,t){if(null==e)return{units:"Pixels",value:0};if("object"!=typeof e)throw new Error("Invalid value: "+JSON.stringify(e)+" (key: "+t+") (should have value and units)");var r=e.units,n=e.value;if("number"!=typeof n)throw new Error("Invalid value in "+JSON.stringify(e)+" (key: "+t+")");if("Pixels"!==r&&"Millimeters"!==r&&"Points"!==r&&"None"!==r&&"Picas"!==r&&"Inches"!==r&&"Centimeters"!==r&&"Density"!==r)throw new Error("Invalid units in "+JSON.stringify(e)+" (key: "+t+")");return{units:r,value:n}},t.textGridding=o.createEnum("textGridding","none",{none:"None",round:"Rnd "}),t.Ornt=o.createEnum("Ornt","horizontal",{horizontal:"Hrzn",vertical:"Vrtc"}),t.Annt=o.createEnum("Annt","sharp",{none:"Anno",sharp:"antiAliasSharp",crisp:"AnCr",strong:"AnSt",smooth:"AnSm",platform:"antiAliasPlatformGray",platformLCD:"antiAliasPlatformLCD"}),t.warpStyle=o.createEnum("warpStyle","none",{none:"warpNone",arc:"warpArc",arcLower:"warpArcLower",arcUpper:"warpArcUpper",arch:"warpArch",bulge:"warpBulge",shellLower:"warpShellLower",shellUpper:"warpShellUpper",flag:"warpFlag",wave:"warpWave",fish:"warpFish",rise:"warpRise",fisheye:"warpFisheye",inflate:"warpInflate",squeeze:"warpSqueeze",twist:"warpTwist",custom:"warpCustom"}),t.BlnM=o.createEnum("BlnM","normal",{normal:"Nrml",dissolve:"Dslv",darken:"Drkn",multiply:"Mltp","color burn":"CBrn","linear burn":"linearBurn","darker color":"darkerColor",lighten:"Lghn",screen:"Scrn","color dodge":"CDdg","linear dodge":"linearDodge","lighter color":"lighterColor",overlay:"Ovrl","soft light":"SftL","hard light":"HrdL","vivid light":"vividLight","linear light":"linearLight","pin light":"pinLight","hard mix":"hardMix",difference:"Dfrn",exclusion:"Xclu",subtract:"blendSubtraction",divide:"blendDivide",hue:"H   ",saturation:"Strt",color:"Clr ",luminosity:"Lmns","linear height":"linearHeight",height:"Hght",subtraction:"Sbtr"}),t.BESl=o.createEnum("BESl","inner bevel",{"inner bevel":"InrB","outer bevel":"OtrB",emboss:"Embs","pillow emboss":"PlEb","stroke emboss":"strokeEmboss"}),t.bvlT=o.createEnum("bvlT","smooth",{smooth:"SfBL","chisel hard":"PrBL","chisel soft":"Slmt"}),t.BESs=o.createEnum("BESs","up",{up:"In  ",down:"Out "}),t.BETE=o.createEnum("BETE","softer",{softer:"SfBL",precise:"PrBL"}),t.IGSr=o.createEnum("IGSr","edge",{edge:"SrcE",center:"SrcC"}),t.GrdT=o.createEnum("GrdT","linear",{linear:"Lnr ",radial:"Rdl ",angle:"Angl",reflected:"Rflc",diamond:"Dmnd"}),t.ClrS=o.createEnum("ClrS","rgb",{rgb:"RGBC",hsb:"HSBl",lab:"LbCl"}),t.FStl=o.createEnum("FStl","outside",{outside:"OutF",center:"CtrF",inside:"InsF"}),t.FrFl=o.createEnum("FrFl","color",{color:"SClr",gradient:"GrFl",pattern:"Ptrn"}),t.strokeStyleLineCapType=o.createEnum("strokeStyleLineCapType","butt",{butt:"strokeStyleButtCap",round:"strokeStyleRoundCap",square:"strokeStyleSquareCap"}),t.strokeStyleLineJoinType=o.createEnum("strokeStyleLineJoinType","miter",{miter:"strokeStyleMiterJoin",round:"strokeStyleRoundJoin",bevel:"strokeStyleBevelJoin"}),t.strokeStyleLineAlignment=o.createEnum("strokeStyleLineAlignment","inside",{inside:"strokeStyleAlignInside",center:"strokeStyleAlignCenter",outside:"strokeStyleAlignOutside"})},5294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeEffects=t.readEffects=void 0;var n=r(8110),i=r(2087),o=r(766),a=[void 0,"outer bevel","inner bevel","emboss","pillow emboss","stroke emboss"];function s(e){return i.checkSignature(e,"8BIM"),n.toBlendMode[i.readSignature(e)]||"normal"}function l(e,t){o.writeSignature(e,"8BIM"),o.writeSignature(e,n.fromBlendMode[t]||"norm")}function u(e){return i.readUint8(e)/255}function d(e,t){o.writeUint8(e,0|Math.round(255*t))}function c(e,t){var r;o.writeUint32(e,51),o.writeUint32(e,2),o.writeFixedPoint32(e,t.size&&t.size.value||0),o.writeFixedPoint32(e,0),o.writeFixedPoint32(e,t.angle||0),o.writeFixedPoint32(e,t.distance&&t.distance.value||0),o.writeColor(e,t.color),l(e,t.blendMode),o.writeUint8(e,t.enabled?1:0),o.writeUint8(e,t.useGlobalLight?1:0),d(e,null!==(r=t.opacity)&&void 0!==r?r:1),o.writeColor(e,t.color)}t.readEffects=function(e){var t=i.readUint16(e);if(0!==t)throw new Error("Invalid effects layer version: "+t);for(var r=i.readUint16(e),n={},o=0;o<r;o++){i.checkSignature(e,"8BIM");var l=i.readSignature(e);switch(l){case"cmnS":var d=i.readUint32(e),c=i.readUint32(e),f=!!i.readUint8(e);if(i.skipBytes(e,2),7!==d||0!==c||!f)throw new Error("Invalid effects common state");break;case"dsdw":case"isdw":var p=i.readUint32(e),h=i.readUint32(e);if(41!==p&&51!==p)throw new Error("Invalid shadow size: "+p);if(0!==h&&2!==h)throw new Error("Invalid shadow version: "+h);d=i.readFixedPoint32(e),i.readFixedPoint32(e);var g=i.readFixedPoint32(e),v=i.readFixedPoint32(e),y=i.readColor(e),w=s(e),m=!!i.readUint8(e),b=!!i.readUint8(e),S=u(e);p>=51&&i.readColor(e);var k={size:{units:"Pixels",value:d},distance:{units:"Pixels",value:v},angle:g,color:y,blendMode:w,enabled:m,useGlobalLight:b,opacity:S};"dsdw"===l?n.dropShadow=[k]:n.innerShadow=[k];break;case"oglw":p=i.readUint32(e);var U=i.readUint32(e);if(32!==p&&42!==p)throw new Error("Invalid outer glow size: "+p);if(0!==U&&2!==U)throw new Error("Invalid outer glow version: "+U);d=i.readFixedPoint32(e),i.readFixedPoint32(e),y=i.readColor(e),w=s(e),m=!!i.readUint8(e),S=u(e),p>=42&&i.readColor(e),n.outerGlow={size:{units:"Pixels",value:d},color:y,blendMode:w,enabled:m,opacity:S};break;case"iglw":p=i.readUint32(e);var I=i.readUint32(e);if(32!==p&&43!==p)throw new Error("Invalid inner glow size: "+p);if(0!==I&&2!==I)throw new Error("Invalid inner glow version: "+I);d=i.readFixedPoint32(e),i.readFixedPoint32(e),y=i.readColor(e),w=s(e),m=!!i.readUint8(e),S=u(e),p>=43&&(i.readUint8(e),i.readColor(e)),n.innerGlow={size:{units:"Pixels",value:d},color:y,blendMode:w,enabled:m,opacity:S};break;case"bevl":p=i.readUint32(e);var C=i.readUint32(e);if(58!==p&&78!==p)throw new Error("Invalid bevel size: "+p);if(0!==C&&2!==C)throw new Error("Invalid bevel version: "+C);g=i.readFixedPoint32(e);var B=i.readFixedPoint32(e),P=(d=i.readFixedPoint32(e),s(e)),A=s(e),E=i.readColor(e),D=i.readColor(e),M=a[i.readUint8(e)]||"inner bevel",F=u(e),O=u(e),x=(m=!!i.readUint8(e),b=!!i.readUint8(e),i.readUint8(e)?"down":"up");p>=78&&(i.readColor(e),i.readColor(e)),n.bevel={size:{units:"Pixels",value:d},angle:g,strength:B,highlightBlendMode:P,shadowBlendMode:A,highlightColor:E,shadowColor:D,style:M,highlightOpacity:F,shadowOpacity:O,enabled:m,useGlobalLight:b,direction:x};break;case"sofi":d=i.readUint32(e);var L=i.readUint32(e);if(34!==d)throw new Error("Invalid effects solid fill info size: "+d);if(2!==L)throw new Error("Invalid effects solid fill info version: "+L);w=s(e),y=i.readColor(e),S=u(e),m=!!i.readUint8(e),i.readColor(e),n.solidFill=[{blendMode:w,color:y,opacity:S,enabled:m}];break;default:throw new Error("Invalid effect type: '"+l+"'")}}return n},t.writeEffects=function(e,t){var r,n,i,s,u,f,p=null===(r=t.dropShadow)||void 0===r?void 0:r[0],h=null===(n=t.innerShadow)||void 0===n?void 0:n[0],g=t.outerGlow,v=t.innerGlow,y=t.bevel,w=null===(i=t.solidFill)||void 0===i?void 0:i[0],m=1;if(p&&m++,h&&m++,g&&m++,v&&m++,y&&m++,w&&m++,o.writeUint16(e,0),o.writeUint16(e,m),o.writeSignature(e,"8BIM"),o.writeSignature(e,"cmnS"),o.writeUint32(e,7),o.writeUint32(e,0),o.writeUint8(e,1),o.writeZeros(e,2),p&&(o.writeSignature(e,"8BIM"),o.writeSignature(e,"dsdw"),c(e,p)),h&&(o.writeSignature(e,"8BIM"),o.writeSignature(e,"isdw"),c(e,h)),g&&(o.writeSignature(e,"8BIM"),o.writeSignature(e,"oglw"),o.writeUint32(e,42),o.writeUint32(e,2),o.writeFixedPoint32(e,(null===(s=g.size)||void 0===s?void 0:s.value)||0),o.writeFixedPoint32(e,0),o.writeColor(e,g.color),l(e,g.blendMode),o.writeUint8(e,g.enabled?1:0),d(e,g.opacity||0),o.writeColor(e,g.color)),v&&(o.writeSignature(e,"8BIM"),o.writeSignature(e,"iglw"),o.writeUint32(e,43),o.writeUint32(e,2),o.writeFixedPoint32(e,(null===(u=v.size)||void 0===u?void 0:u.value)||0),o.writeFixedPoint32(e,0),o.writeColor(e,v.color),l(e,v.blendMode),o.writeUint8(e,v.enabled?1:0),d(e,v.opacity||0),o.writeUint8(e,0),o.writeColor(e,v.color)),y){o.writeSignature(e,"8BIM"),o.writeSignature(e,"bevl"),o.writeUint32(e,78),o.writeUint32(e,2),o.writeFixedPoint32(e,y.angle||0),o.writeFixedPoint32(e,y.strength||0),o.writeFixedPoint32(e,(null===(f=y.size)||void 0===f?void 0:f.value)||0),l(e,y.highlightBlendMode),l(e,y.shadowBlendMode),o.writeColor(e,y.highlightColor),o.writeColor(e,y.shadowColor);var b=a.indexOf(y.style);o.writeUint8(e,b<=0?1:b),d(e,y.highlightOpacity||0),d(e,y.shadowOpacity||0),o.writeUint8(e,y.enabled?1:0),o.writeUint8(e,y.useGlobalLight?1:0),o.writeUint8(e,"down"===y.direction?1:0),o.writeColor(e,y.highlightColor),o.writeColor(e,y.shadowColor)}w&&(o.writeSignature(e,"8BIM"),o.writeSignature(e,"sofi"),o.writeUint32(e,34),o.writeUint32(e,2),l(e,w.blendMode),o.writeColor(e,w.color),d(e,w.opacity||0),o.writeUint8(e,w.enabled?1:0),o.writeColor(e,w.color))}},2383:(e,t)=>{"use strict";function r(e){return 32===e||10===e||13===e||9===e}function n(e){return e>=48&&e<=57||46===e||45===e}Object.defineProperty(t,"__esModule",{value:!0}),t.serializeEngineData=t.parseEngineData=void 0,t.parseEngineData=function(e){var t=0;function i(){for(;t<e.length&&r(e[t]);)t++}function o(){var r=e[t];return t++,92===r&&(r=e[t],t++),r}function a(){var r="";if(41===e[t])return t++,r;if(254!==e[t]||255!==e[t+1])throw new Error("Invalid utf-16 BOM");for(t+=2;t<e.length&&41!==e[t];){var n=o()<<8|o();r+=String.fromCharCode(n)}return t++,r}var s=null,l=[];function u(e){l.length?(d(e),l.push(e)):(l.push(e),s=e)}function d(e){if(!l.length)throw new Error("Invalid data");var t=l[l.length-1];if("string"==typeof t)l[l.length-2][t]=e,f();else{if(!Array.isArray(t))throw new Error("Invalid data");t.push(e)}}function c(e){l.length||u({});var t=l[l.length-1];if(t&&"string"==typeof t)d("nil"===e?null:"/"+e);else{if(!t||"object"!=typeof t)throw new Error("Invalid data");l.push(e)}}function f(){if(!l.length)throw new Error("Invalid data");l.pop()}for(i();t<e.length;){var p=t,h=e[p];if(60===h&&60===e[p+1])t+=2,u({});else if(62===h&&62===e[p+1])t+=2,f();else if(47===h){for(var g=t+=1;t<e.length&&!r(e[t]);)t++;for(var v="",y=g;y<t;y++)v+=String.fromCharCode(e[y]);c(v)}else if(40===h)t+=1,d(a());else if(91===h)t+=1,u([]);else if(93===h)t+=1,f();else if(110===h&&117===e[p+1]&&108===e[p+2]&&108===e[p+3])t+=4,d(null);else if(116===h&&114===e[p+1]&&117===e[p+2]&&101===e[p+3])t+=4,d(!0);else if(102===h&&97===e[p+1]&&108===e[p+2]&&115===e[p+3]&&101===e[p+4])t+=5,d(!1);else if(n(h)){for(var w="";t<e.length&&n(e[t]);)w+=String.fromCharCode(e[t]),t++;d(parseFloat(w))}else t+=1,console.log("Invalid token "+String.fromCharCode(h)+" at "+t);i()}return s};var i=["Axis","XY","Zone","WordSpacing","FirstLineIndent","GlyphSpacing","StartIndent","EndIndent","SpaceBefore","SpaceAfter","LetterSpacing","Values","GridSize","GridLeading","PointBase","BoxBounds","TransformPoint0","TransformPoint1","TransformPoint2","FontSize","Leading","HorizontalScale","VerticalScale","BaselineShift","Tsume","OutlineWidth","AutoLeading"],o=["RunLengthArray"];t.serializeEngineData=function(e,t){void 0===t&&(t=!1);var r=new Uint8Array(1024),n=0,a=0;function s(e){if(n>=r.length){var t=new Uint8Array(2*r.length);t.set(r),r=t}r[n]=e,n++}function l(e){for(var t=0;t<e.length;t++)s(e.charCodeAt(t))}function u(){if(t)l(" ");else for(var e=0;e<a;e++)l("\t")}function d(e,r){u(),l("/"+e),g(r,e,!0),t||l("\n")}function c(e){return e.toFixed(5).replace(/(\d)0+$/g,"$1").replace(/^0+\.([1-9])/g,".$1").replace(/^-0+\.0(\d)/g,"-.0$1")}function f(e,t){return t&&-1!==i.indexOf(t)||(0|e)!==e?c(e):function(e){return e.toString()}(e)}function p(e){var t=Object.keys(e);return-1!==t.indexOf("98")&&t.unshift.apply(t,t.splice(t.indexOf("99"),1)),-1!==t.indexOf("99")&&t.unshift.apply(t,t.splice(t.indexOf("99"),1)),t}function h(e){40!==e&&41!==e&&92!==e||s(92),s(e)}function g(e,r,n){function i(){n?l(" "):u()}if(void 0===n&&(n=!1),null===e)i(),l(t?"/nil":"null");else if("number"==typeof e)i(),l(f(e,r));else if("boolean"==typeof e)i(),l(e?"true":"false");else if("string"==typeof e)if(i(),"99"!==r&&"98"!==r||"/"!==e.charAt(0)){l("("),s(254),s(255);for(var v=0;v<e.length;v++){var y=e.charCodeAt(v);h(y>>8&255),h(255&y)}l(")")}else l(e);else if(Array.isArray(e))if(i(),e.every((function(e){return"number"==typeof e}))){l("[");for(var w=-1!==o.indexOf(r),m=0,b=e;m<b.length;m++){var S=b[m];l(" "),l(w?f(S):c(S))}l(" ]")}else{l("["),t||l("\n");for(var k=0,U=e;k<U.length;k++)g(S=U[k],r),t||l("\n");u(),l("]")}else if("object"==typeof e){n&&!t&&l("\n"),u(),l("<<"),t||l("\n"),a++;for(var I=0,C=p(e);I<C.length;I++){var B=C[I];d(B,e[B])}a--,u(),l(">>")}}if(t){if("object"==typeof e)for(var v=0,y=p(e);v<y.length;v++){var w=y[v];d(w,e[w])}}else l("\n\n"),g(e);return r.slice(0,n)}},8110:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeCanvas=t.createImageData=t.createCanvasFromData=t.createCanvas=t.writeDataRLE=t.writeDataRaw=t.decodeBitmap=t.resetImageData=t.hasAlpha=t.clamp=t.offsetForChannel=t.Compression=t.ChannelID=t.MaskParams=t.LayerMaskFlags=t.ColorSpace=t.createEnum=t.revMap=t.largeAdditionalInfoKeys=t.layerColors=t.toBlendMode=t.fromBlendMode=t.RAW_IMAGE_DATA=t.MOCK_HANDLERS=void 0;var n,i,o,a,s,l=r(1755);function u(e){var t={};return Object.keys(e).forEach((function(r){return t[e[r]]=r})),t}t.MOCK_HANDLERS=!1,t.RAW_IMAGE_DATA=!1,t.fromBlendMode={},t.toBlendMode={pass:"pass through",norm:"normal",diss:"dissolve",dark:"darken","mul ":"multiply",idiv:"color burn",lbrn:"linear burn",dkCl:"darker color",lite:"lighten",scrn:"screen","div ":"color dodge",lddg:"linear dodge",lgCl:"lighter color",over:"overlay",sLit:"soft light",hLit:"hard light",vLit:"vivid light",lLit:"linear light",pLit:"pin light",hMix:"hard mix",diff:"difference",smud:"exclusion",fsub:"subtract",fdiv:"divide","hue ":"hue","sat ":"saturation",colr:"color","lum ":"luminosity"},Object.keys(t.toBlendMode).forEach((function(e){return t.fromBlendMode[t.toBlendMode[e]]=e})),t.layerColors=["none","red","orange","yellow","green","blue","violet","gray"],t.largeAdditionalInfoKeys=["LMsk","Lr16","Lr32","Layr","Mt16","Mt32","Mtrn","Alph","FMsk","lnk2","FEid","FXid","PxSD","cinf"],t.revMap=u,t.createEnum=function(e,t,r){var n=u(r);return{decode:function(e){var r=e.split(".")[1];if(r&&!n[r])throw new Error("Unrecognized value for enum: '"+e+"'");return n[r]||t},encode:function(n){if(n&&!r[n])throw new Error("Invalid value for enum: '"+n+"'");return e+"."+(r[n]||r[t])}}},(s=t.ColorSpace||(t.ColorSpace={}))[s.RGB=0]="RGB",s[s.HSB=1]="HSB",s[s.CMYK=2]="CMYK",s[s.Lab=7]="Lab",s[s.Grayscale=8]="Grayscale",(a=t.LayerMaskFlags||(t.LayerMaskFlags={}))[a.PositionRelativeToLayer=1]="PositionRelativeToLayer",a[a.LayerMaskDisabled=2]="LayerMaskDisabled",a[a.InvertLayerMaskWhenBlending=4]="InvertLayerMaskWhenBlending",a[a.LayerMaskFromRenderingOtherData=8]="LayerMaskFromRenderingOtherData",a[a.MaskHasParametersAppliedToIt=16]="MaskHasParametersAppliedToIt",(o=t.MaskParams||(t.MaskParams={}))[o.UserMaskDensity=1]="UserMaskDensity",o[o.UserMaskFeather=2]="UserMaskFeather",o[o.VectorMaskDensity=4]="VectorMaskDensity",o[o.VectorMaskFeather=8]="VectorMaskFeather",(i=t.ChannelID||(t.ChannelID={}))[i.Color0=0]="Color0",i[i.Color1=1]="Color1",i[i.Color2=2]="Color2",i[i.Color3=3]="Color3",i[i.Transparency=-1]="Transparency",i[i.UserMask=-2]="UserMask",i[i.RealUserMask=-3]="RealUserMask",(n=t.Compression||(t.Compression={}))[n.RawData=0]="RawData",n[n.RleCompressed=1]="RleCompressed",n[n.ZipWithoutPrediction=2]="ZipWithoutPrediction",n[n.ZipWithPrediction=3]="ZipWithPrediction",t.offsetForChannel=function(e,t){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return t?3:e+1;case-1:return t?4:3;default:return e+1}},t.clamp=function(e,t,r){return e<t?t:e>r?r:e},t.hasAlpha=function(e){for(var t=e.width*e.height*4,r=3;r<t;r+=4)if(255!==e.data[r])return!0;return!1},t.resetImageData=function(e){for(var t=e.data,r=new Uint32Array(t.buffer),n=0|r.length,i=0;i<n;i=i+1|0)r[i]=4278190080},t.decodeBitmap=function(e,t,r,n){for(var i=0,o=0,a=0;i<n;i++)for(var s=0;s<r;)for(var l=e[a++],u=0;u<8&&s<r;u++,s++){var d=128&l?0:255;l<<=1,t[o++]=d,t[o++]=d,t[o++]=d,t[o++]=255}},t.writeDataRaw=function(e,t,r,n){if(r&&n){for(var i=new Uint8Array(r*n),o=0;o<i.length;o++)i[o]=e.data[4*o+t];return i}},t.writeDataRLE=function(e,t,r,n,i,o){var a=t.data;if(r&&n){for(var s=4*r|0,l=0,u=i.length*(o?4:2)*n|0,d=0,c=i;d<c.length;d++)for(var f=c[d],p=0,h=0|f;p<n;p++){var g=p*s|0,v=g+s|0,y=v+f-4|0,w=y-4|0,m=u;for(h=g+f|0;h<v;h=h+4|0)if(h<w){var b=a[h],S=a[h=h+4|0],k=a[h=h+4|0];if(b===S&&b===k){for(var U=3;U<128&&h<y&&a[h+4|0]===b;)U=U+1|0,h=h+4|0;e[u++]=1-U,e[u++]=b}else{var I=u,C=!0;for(U=1,e[u++]=0,e[u++]=b;h<y&&U<128;){if(b=S,S=k,k=a[h=h+4|0],b===S&&b===k){h=h-12|0,C=!1;break}U++,e[u++]=b}C&&(U<127?(e[u++]=S,e[u++]=k,U+=2):U<128?(e[u++]=S,U++,h=h-4|0):h=h-8|0),e[I]=U-1}}else h===y?(e[u++]=0,e[u++]=a[h]):(e[u++]=1,e[u++]=a[h],h=h+4|0,e[u++]=a[h]);var B=u-m;o&&(e[l++]=B>>24&255,e[l++]=B>>16&255),e[l++]=B>>8&255,e[l++]=255&B}return e.slice(0,u)}},t.createCanvas=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvas method")},t.createCanvasFromData=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvasFromData method")};var d=void 0;t.createImageData=function(e,r){return d||(d=t.createCanvas(1,1)),d.getContext("2d").createImageData(e,r)},"undefined"!=typeof document&&(t.createCanvas=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r},t.createCanvasFromData=function(e){var t=new Image;t.src="data:image/jpeg;base64,"+l.fromByteArray(e);var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0),r}),t.initializeCanvas=function(e,r,n){t.createCanvas=e,t.createCanvasFromData=r||t.createCanvasFromData,t.createImageData=n||t.createImageData}},4294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resourceHandlersMap=t.resourceHandlers=void 0;var n=r(1755),i=r(2087),o=r(766),a=r(8110),s=r(4408),l=r(5350);function u(e,r,n,i){var o={key:e,has:r,read:n,write:i};t.resourceHandlers.push(o),t.resourceHandlersMap[o.key]=o}t.resourceHandlers=[],t.resourceHandlersMap={};var d=[void 0,"PPI","PPCM"],c=[void 0,"Inches","Centimeters","Points","Picas","Columns"],f="0123456789abcdef";function p(e){return e<=57?e-48:e-87}function h(e,t){var r=i.readBytes(e,t);return s.decodeString(r)}function g(e,t){var r=s.encodeString(t);o.writeBytes(e,r)}a.MOCK_HANDLERS&&u(1028,(function(e){return void 0!==e._ir1028}),(function(e,t,r){t._ir1028=i.readBytes(e,r())}),(function(e,t){o.writeBytes(e,t._ir1028)})),u(1061,(function(e){return void 0!==e.captionDigest}),(function(e,t){for(var r="",n=0;n<16;n++){var o=i.readUint8(e);r+=f[o>>4],r+=f[15&o]}t.captionDigest=r}),(function(e,t){for(var r=0;r<16;r++)o.writeUint8(e,(i=2*r,p((n=t.captionDigest).charCodeAt(i))<<4|p(n.charCodeAt(i+1))));var n,i})),u(1060,(function(e){return void 0!==e.xmpMetadata}),(function(e,t,r){return t.xmpMetadata=h(e,r())}),(function(e,t){return g(e,t.xmpMetadata)}));var v=a.createEnum("Inte","perceptual",{perceptual:"Img ",saturation:"Grp ","relative colorimetric":"Clrm","absolute colorimetric":"AClr"});u(1082,(function(e){return void 0!==e.printInformation}),(function(e,t){var r,n,i=l.readVersionAndDescriptor(e);t.printInformation={printerName:i.printerName||"",renderingIntent:v.decode(null!==(r=i.Inte)&&void 0!==r?r:"Inte.Img ")};var o=t.printInformation;void 0!==i.PstS&&(o.printerManagesColors=i.PstS),void 0!==i["Nm  "]&&(o.printerProfile=i["Nm  "]),void 0!==i.MpBl&&(o.blackPointCompensation=i.MpBl),void 0!==i.printSixteenBit&&(o.printSixteenBit=i.printSixteenBit),void 0!==i.hardProof&&(o.hardProof=i.hardProof),i.printProofSetup&&("Bltn"in i.printProofSetup?o.proofSetup={builtin:i.printProofSetup.Bltn.split(".")[1]}:o.proofSetup={profile:i.printProofSetup.profile,renderingIntent:v.decode(null!==(n=i.printProofSetup.Inte)&&void 0!==n?n:"Inte.Img "),blackPointCompensation:!!i.printProofSetup.MpBl,paperWhite:!!i.printProofSetup.paperWhite})}),(function(e,t){var r,n,i=t.printInformation,o={};i.printerManagesColors?o.PstS=!0:(void 0!==i.hardProof&&(o.hardProof=!!i.hardProof),o.ClrS="ClrS.RGBC",o["Nm  "]=null!==(r=i.printerProfile)&&void 0!==r?r:"CIE RGB"),o.Inte=v.encode(i.renderingIntent),i.printerManagesColors||(o.MpBl=!!i.blackPointCompensation),o.printSixteenBit=!!i.printSixteenBit,o.printerName=i.printerName||"",i.proofSetup&&"profile"in i.proofSetup?o.printProofSetup={profile:i.proofSetup.profile||"",Inte:v.encode(i.proofSetup.renderingIntent),MpBl:!!i.proofSetup.blackPointCompensation,paperWhite:!!i.proofSetup.paperWhite}:o.printProofSetup={Bltn:(null===(n=i.proofSetup)||void 0===n?void 0:n.builtin)?"builtinProof."+i.proofSetup.builtin:"builtinProof.proofCMYK"},l.writeVersionAndDescriptor(e,"","printOutput",o)})),a.MOCK_HANDLERS&&u(1083,(function(e){return void 0!==e._ir1083}),(function(e,t,r){t._ir1083=i.readBytes(e,r())}),(function(e,t){o.writeBytes(e,t._ir1083)})),u(1005,(function(e){return void 0!==e.resolutionInfo}),(function(e,t){var r=i.readFixedPoint32(e),n=i.readUint16(e),o=i.readUint16(e),a=i.readFixedPoint32(e),s=i.readUint16(e),l=i.readUint16(e);t.resolutionInfo={horizontalResolution:r,horizontalResolutionUnit:d[n]||"PPI",widthUnit:c[o]||"Inches",verticalResolution:a,verticalResolutionUnit:d[s]||"PPI",heightUnit:c[l]||"Inches"}}),(function(e,t){var r=t.resolutionInfo;o.writeFixedPoint32(e,r.horizontalResolution||0),o.writeUint16(e,Math.max(1,d.indexOf(r.horizontalResolutionUnit))),o.writeUint16(e,Math.max(1,c.indexOf(r.widthUnit))),o.writeFixedPoint32(e,r.verticalResolution||0),o.writeUint16(e,Math.max(1,d.indexOf(r.verticalResolutionUnit))),o.writeUint16(e,Math.max(1,c.indexOf(r.heightUnit)))}));var y=["centered","size to fit","user defined"];u(1062,(function(e){return void 0!==e.printScale}),(function(e,t){t.printScale={style:y[i.readInt16(e)],x:i.readFloat32(e),y:i.readFloat32(e),scale:i.readFloat32(e)}}),(function(e,t){var r=t.printScale,n=r.style,i=r.x,a=r.y,s=r.scale;o.writeInt16(e,Math.max(0,y.indexOf(n))),o.writeFloat32(e,i||0),o.writeFloat32(e,a||0),o.writeFloat32(e,s||0)})),u(1006,(function(e){return void 0!==e.alphaChannelNames}),(function(e,t,r){for(t.alphaChannelNames=[];r();){var n=i.readPascalString(e,1);t.alphaChannelNames.push(n)}}),(function(e,t){for(var r=0,n=t.alphaChannelNames;r<n.length;r++){var i=n[r];o.writePascalString(e,i,1)}})),u(1045,(function(e){return void 0!==e.alphaChannelNames}),(function(e,t,r){for(t.alphaChannelNames=[];r();)t.alphaChannelNames.push(i.readUnicodeString(e))}),(function(e,t){for(var r=0,n=t.alphaChannelNames;r<n.length;r++){var i=n[r];o.writeUnicodeStringWithPadding(e,i)}})),a.MOCK_HANDLERS&&u(1077,(function(e){return void 0!==e._ir1077}),(function(e,t,r){t._ir1077=i.readBytes(e,r())}),(function(e,t){o.writeBytes(e,t._ir1077)})),u(1053,(function(e){return void 0!==e.alphaIdentifiers}),(function(e,t,r){for(t.alphaIdentifiers=[];r()>=4;)t.alphaIdentifiers.push(i.readUint32(e))}),(function(e,t){for(var r=0,n=t.alphaIdentifiers;r<n.length;r++){var i=n[r];o.writeUint32(e,i)}})),u(1010,(function(e){return void 0!==e.backgroundColor}),(function(e,t){return t.backgroundColor=i.readColor(e)}),(function(e,t){return o.writeColor(e,t.backgroundColor)})),u(1037,(function(e){return void 0!==e.globalAngle}),(function(e,t){return t.globalAngle=i.readUint32(e)}),(function(e,t){return o.writeUint32(e,t.globalAngle)})),u(1049,(function(e){return void 0!==e.globalAltitude}),(function(e,t){return t.globalAltitude=i.readUint32(e)}),(function(e,t){return o.writeUint32(e,t.globalAltitude)})),u(1011,(function(e){return void 0!==e.printFlags}),(function(e,t){t.printFlags={labels:!!i.readUint8(e),cropMarks:!!i.readUint8(e),colorBars:!!i.readUint8(e),registrationMarks:!!i.readUint8(e),negative:!!i.readUint8(e),flip:!!i.readUint8(e),interpolate:!!i.readUint8(e),caption:!!i.readUint8(e),printFlags:!!i.readUint8(e)}}),(function(e,t){var r=t.printFlags;o.writeUint8(e,r.labels?1:0),o.writeUint8(e,r.cropMarks?1:0),o.writeUint8(e,r.colorBars?1:0),o.writeUint8(e,r.registrationMarks?1:0),o.writeUint8(e,r.negative?1:0),o.writeUint8(e,r.flip?1:0),o.writeUint8(e,r.interpolate?1:0),o.writeUint8(e,r.caption?1:0),o.writeUint8(e,r.printFlags?1:0)})),a.MOCK_HANDLERS&&u(1e4,(function(e){return void 0!==e._ir10000}),(function(e,t,r){t._ir10000=i.readBytes(e,r())}),(function(e,t){o.writeBytes(e,t._ir10000)})),a.MOCK_HANDLERS&&u(1013,(function(e){return void 0!==e._ir1013}),(function(e,t,r){t._ir1013=i.readBytes(e,r())}),(function(e,t){o.writeBytes(e,t._ir1013)})),a.MOCK_HANDLERS&&u(1016,(function(e){return void 0!==e._ir1016}),(function(e,t,r){t._ir1016=i.readBytes(e,r())}),(function(e,t){o.writeBytes(e,t._ir1016)})),u(1024,(function(e){return void 0!==e.layerState}),(function(e,t){return t.layerState=i.readUint16(e)}),(function(e,t){return o.writeUint16(e,t.layerState)})),u(1026,(function(e){return void 0!==e.layersGroup}),(function(e,t,r){for(t.layersGroup=[];r();)t.layersGroup.push(i.readUint16(e))}),(function(e,t){for(var r=0,n=t.layersGroup;r<n.length;r++){var i=n[r];o.writeUint16(e,i)}})),u(1072,(function(e){return void 0!==e.layerGroupsEnabledId}),(function(e,t,r){for(t.layerGroupsEnabledId=[];r();)t.layerGroupsEnabledId.push(i.readUint8(e))}),(function(e,t){for(var r=0,n=t.layerGroupsEnabledId;r<n.length;r++){var i=n[r];o.writeUint8(e,i)}})),u(1069,(function(e){return void 0!==e.layerSelectionIds}),(function(e,t){var r=i.readUint16(e);for(t.layerSelectionIds=[];r--;)t.layerSelectionIds.push(i.readUint32(e))}),(function(e,t){o.writeUint16(e,t.layerSelectionIds.length);for(var r=0,n=t.layerSelectionIds;r<n.length;r++){var i=n[r];o.writeUint32(e,i)}})),u(1032,(function(e){return void 0!==e.gridAndGuidesInformation}),(function(e,t){var r=i.readUint32(e),n=i.readUint32(e),o=i.readUint32(e),a=i.readUint32(e);if(1!==r)throw new Error("Invalid 1032 resource version: "+r);t.gridAndGuidesInformation={grid:{horizontal:n,vertical:o},guides:[]};for(var s=0;s<a;s++)t.gridAndGuidesInformation.guides.push({location:i.readUint32(e)/32,direction:i.readUint8(e)?"horizontal":"vertical"})}),(function(e,t){var r=t.gridAndGuidesInformation,n=r.grid||{horizontal:576,vertical:576},i=r.guides||[];o.writeUint32(e,1),o.writeUint32(e,n.horizontal),o.writeUint32(e,n.vertical),o.writeUint32(e,i.length);for(var a=0,s=i;a<s.length;a++){var l=s[a];o.writeUint32(e,32*l.location),o.writeUint8(e,"horizontal"===l.direction?1:0)}})),u(1054,(function(e){return void 0!==e.urlsList}),(function(e,t,r,n){if(i.readUint32(e)){if(!n.throwForMissingFeatures)return;throw new Error("Not implemented: URL List")}t.urlsList=[]}),(function(e,t){if(o.writeUint32(e,t.urlsList.length),t.urlsList.length)throw new Error("Not implemented: URL List")})),a.MOCK_HANDLERS&&u(1050,(function(e){return void 0!==e._ir1050}),(function(e,t,r){t._ir1050=i.readBytes(e,r())}),(function(e,t){o.writeBytes(e,t._ir1050)})),u(1064,(function(e){return void 0!==e.pixelAspectRatio}),(function(e,t){if(i.readUint32(e)>2)throw new Error("Invalid pixelAspectRatio version");t.pixelAspectRatio={aspect:i.readFloat64(e)}}),(function(e,t){o.writeUint32(e,2),o.writeFloat64(e,t.pixelAspectRatio.aspect)})),u(1041,(function(e){return void 0!==e.iccUntaggedProfile}),(function(e,t){t.iccUntaggedProfile=!!i.readUint8(e)}),(function(e,t){o.writeUint8(e,t.iccUntaggedProfile?1:0)})),a.MOCK_HANDLERS&&u(1039,(function(e){return void 0!==e._ir1039}),(function(e,t,r){t._ir1039=i.readBytes(e,r())}),(function(e,t){o.writeBytes(e,t._ir1039)})),u(1044,(function(e){return void 0!==e.idsSeedNumber}),(function(e,t){return t.idsSeedNumber=i.readUint32(e)}),(function(e,t){return o.writeUint32(e,t.idsSeedNumber)})),u(1036,(function(e){return void 0!==e.thumbnail||void 0!==e.thumbnailRaw}),(function(e,t,r,n){var o=i.readUint32(e),s=i.readUint32(e),l=i.readUint32(e);i.readUint32(e),i.readUint32(e),i.readUint32(e);var u=i.readUint16(e),d=i.readUint16(e);if(1!==o||24!==u||1!==d)return n.logMissingFeatures&&console.log("Invalid thumbnail data (format: "+o+", bitsPerPixel: "+u+", planes: "+d+")"),void i.skipBytes(e,r());var c=r(),f=i.readBytes(e,c);n.useRawThumbnail?t.thumbnailRaw={width:s,height:l,data:f}:f.byteLength&&(t.thumbnail=a.createCanvasFromData(f))}),(function(e,t){var r,i,a=0,s=0;if(t.thumbnailRaw)a=t.thumbnailRaw.width,s=t.thumbnailRaw.height,i=t.thumbnailRaw.data;else{var l=null===(r=t.thumbnail.toDataURL("image/jpeg",1))||void 0===r?void 0:r.substring("data:image/jpeg;base64,".length);l?(a=t.thumbnail.width,s=t.thumbnail.height,i=n.toByteArray(l)):i=new Uint8Array(0)}var u=4*Math.floor((24*a+31)/32),d=u*s*1,c=i.length;o.writeUint32(e,1),o.writeUint32(e,a),o.writeUint32(e,s),o.writeUint32(e,u),o.writeUint32(e,d),o.writeUint32(e,c),o.writeUint16(e,24),o.writeUint16(e,1),o.writeBytes(e,i)})),u(1057,(function(e){return void 0!==e.versionInfo}),(function(e,t,r){if(1!==i.readUint32(e))throw new Error("Invalid versionInfo version");t.versionInfo={hasRealMergedData:!!i.readUint8(e),writerName:i.readUnicodeString(e),readerName:i.readUnicodeString(e),fileVersion:i.readUint32(e)},i.skipBytes(e,r())}),(function(e,t){var r=t.versionInfo;o.writeUint32(e,1),o.writeUint8(e,r.hasRealMergedData?1:0),o.writeUnicodeString(e,r.writerName),o.writeUnicodeString(e,r.readerName),o.writeUint32(e,r.fileVersion)})),a.MOCK_HANDLERS&&u(1058,(function(e){return void 0!==e._ir1058}),(function(e,t,r){t._ir1058=i.readBytes(e,r())}),(function(e,t){o.writeBytes(e,t._ir1058)})),u(7e3,(function(e){return void 0!==e.imageReadyVariables}),(function(e,t,r){t.imageReadyVariables=h(e,r())}),(function(e,t){g(e,t.imageReadyVariables)})),u(7001,(function(e){return void 0!==e.imageReadyDataSets}),(function(e,t,r){t.imageReadyDataSets=h(e,r())}),(function(e,t){g(e,t.imageReadyDataSets)})),u(1088,(function(e){return void 0!==e.pathSelectionState}),(function(e,t,r){var n=l.readVersionAndDescriptor(e);t.pathSelectionState=n.null}),(function(e,t){var r={null:t.pathSelectionState};l.writeVersionAndDescriptor(e,"","null",r)})),a.MOCK_HANDLERS&&u(1025,(function(e){return void 0!==e._ir1025}),(function(e,t,r){t._ir1025=i.readBytes(e,r())}),(function(e,t){o.writeBytes(e,t._ir1025)}));var w=a.createEnum("FrmD","",{auto:"Auto",none:"None",dispose:"Disp"});a.MOCK_HANDLERS&&u(4e3,(function(e){return void 0!==e._ir4000}),(function(e,t,r,n){var o=n.logMissingFeatures,s=n.logDevFeatures;if(a.MOCK_HANDLERS)t._ir4000=i.readBytes(e,r());else{var u=i.readSignature(e);if("mani"===u)i.checkSignature(e,"IRFR"),i.readSection(e,1,(function(t){for(var r=function(){i.checkSignature(e,"8BIM");var t=i.readSignature(e);i.readSection(e,1,(function(r){if("AnDs"===t){var n=l.readVersionAndDescriptor(e);s&&console.log("#4000 AnDs",n);var a={frames:n.FrIn.map((function(e){return{id:e.FrID,delay:e.FrDl/100,dispose:e.FrDs?w.decode(e.FrDs):"auto"}})),animations:n.FSts.map((function(e){return{id:e.FsID,frames:e.FsFr,repeats:e.LCnt}}))};s&&console.log("#4000 AnDs:result",a)}else if("Roll"===t){var u=i.readBytes(e,r());s&&console.log("#4000 Roll",u)}else o&&console.log("Unhandled subsection in #4000",t)}))};t();)r()}));else{if("mopt"!==u)return void(o&&console.log("Unhandled key in #4000:",u));var d=i.readBytes(e,r());s&&console.log("#4000 mopt",d)}}}),(function(e,t){o.writeBytes(e,t._ir4000)})),a.MOCK_HANDLERS&&u(4001,(function(e){return void 0!==e._ir4001}),(function(e,t,r,n){var o=n.logMissingFeatures,s=n.logDevFeatures;if(a.MOCK_HANDLERS)t._ir4001=i.readBytes(e,r());else{var u=i.readSignature(e);if("mfri"===u){if(2!==i.readUint32(e))throw new Error("Invalid mfri version");var d=i.readUint32(e),c=i.readBytes(e,d);s&&console.log("mfri",c)}else if("mset"===u){var f=l.readVersionAndDescriptor(e);s&&console.log("mset",f)}else o&&console.log("Unhandled key in #4001",u)}}),(function(e,t){o.writeBytes(e,t._ir4001)})),a.MOCK_HANDLERS&&u(4002,(function(e){return void 0!==e._ir4002}),(function(e,t,r){t._ir4002=i.readBytes(e,r())}),(function(e,t){o.writeBytes(e,t._ir4002)}))},3501:function(e,t,r){"use strict";var n=r(7639).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.writePsdBuffer=t.writePsdUint8Array=t.writePsd=t.readPsd=t.byteArrayToBase64=t.initializeCanvas=void 0;var a=r(766),s=r(2087);o(r(5229),t),o(r(8131),t);var l=r(8110);Object.defineProperty(t,"initializeCanvas",{enumerable:!0,get:function(){return l.initializeCanvas}}),o(r(4057),t);var u=r(1755);function d(e,t){var r=a.createWriter();return a.writePsd(r,e,t),a.getWriterBufferNoCopy(r)}t.byteArrayToBase64=u.fromByteArray,t.readPsd=function(e,t){var r="buffer"in e?s.createReader(e.buffer,e.byteOffset,e.byteLength):s.createReader(e);return s.readPsd(r,t)},t.writePsd=function(e,t){var r=a.createWriter();return a.writePsd(r,e,t),a.getWriterBuffer(r)},t.writePsdUint8Array=d,t.writePsdBuffer=function(e,t){if(void 0===n)throw new Error("Buffer not supported on this platform");return n.from(d(e,t))}},4057:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.SectionDividerType=t.ColorMode=void 0,(n=t.ColorMode||(t.ColorMode={}))[n.Bitmap=0]="Bitmap",n[n.Grayscale=1]="Grayscale",n[n.Indexed=2]="Indexed",n[n.RGB=3]="RGB",n[n.CMYK=4]="CMYK",n[n.Multichannel=7]="Multichannel",n[n.Duotone=8]="Duotone",n[n.Lab=9]="Lab",(r=t.SectionDividerType||(t.SectionDividerType={}))[r.Other=0]="Other",r[r.OpenFolder=1]="OpenFolder",r[r.ClosedFolder=2]="ClosedFolder",r[r.BoundingSectionDivider=3]="BoundingSectionDivider"},2087:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.readPattern=t.readColor=t.readSection=t.readDataRLE=t.readPsd=t.checkSignature=t.skipBytes=t.readAsciiString=t.readUnicodeStringWithLength=t.readUnicodeString=t.readPascalString=t.readSignature=t.readBytes=t.readFixedPointPath32=t.readFixedPoint32=t.readFloat64=t.readFloat32=t.readUint32=t.readInt32LE=t.readInt32=t.readUint16=t.readInt16=t.peekUint8=t.readUint8=t.createReader=t.supportedColorModes=void 0;var i=r(8110),o=r(9258),a=r(4294);t.supportedColorModes=[0,1,3];var s=["bitmap","grayscale","indexed","RGB","CMYK","multichannel","duotone","lab"];function l(e){for(var t=e.width*e.height*4,r=0;r<t;r+=4)e.data[r+1]=e.data[r],e.data[r+2]=e.data[r]}function u(e){return e.offset+=1,e.view.getUint8(e.offset-1)}function d(e){return e.view.getUint8(e.offset)}function c(e){return e.offset+=2,e.view.getInt16(e.offset-2,!1)}function f(e){return e.offset+=2,e.view.getUint16(e.offset-2,!1)}function p(e){return e.offset+=4,e.view.getInt32(e.offset-4,!1)}function h(e){return e.offset+=4,e.view.getUint32(e.offset-4,!1)}function g(e){return e.offset+=8,e.view.getFloat64(e.offset-8,!1)}function v(e,t){return e.offset+=t,new Uint8Array(e.view.buffer,e.view.byteOffset+e.offset-t,t)}function y(e){return U(e,4)}function w(e,t){for(var r=u(e),n=r?U(e,r):"";++r%t;)e.offset++;return n}function m(e){return b(e,h(e))}function b(e,t){for(var r="";t--;){var n=f(e);(n||t>0)&&(r+=String.fromCharCode(n))}return r}function S(e,t){e.offset+=t}function k(e,t,r){var n=e.offset,i=y(e);if(i!==t&&i!==r)throw new Error("Invalid signature: '"+i+"' at 0x"+n.toString(16))}function U(e,t){for(var r=v(e,t),n="",i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return n}function I(e){return"8BIM"===e||"MeSa"===e||"AgHg"===e||"PHUT"===e||"DCSR"===e}function C(e,t,r){var n={};n.top=p(e),n.left=p(e),n.bottom=p(e),n.right=p(e);for(var o=f(e),a=[],s=0;s<o;s++){var l=c(e),d=h(e);if(r.large){if(0!==d)throw new Error("Sizes larger than 4GB are not supported");d=h(e)}a.push({id:l,length:d})}k(e,"8BIM");var v=y(e);if(!i.toBlendMode[v])throw new Error("Invalid blend mode: '"+v+"'");n.blendMode=i.toBlendMode[v],n.opacity=u(e)/255,n.clipping=1===u(e);var m=u(e);return n.transparencyProtected=0!=(1&m),n.hidden=0!=(2&m),S(e,1),F(e,1,(function(i){var o=function(e,t){return F(e,1,(function(r){if(r()){var n={};n.top=p(e),n.left=p(e),n.bottom=p(e),n.right=p(e),n.defaultColor=u(e);var i=u(e);if(n.positionRelativeToLayer=0!=(1&i),n.disabled=0!=(2&i),n.fromVectorData=0!=(8&i),16&i){var o=u(e);1&o&&(n.userMaskDensity=u(e)/255),2&o&&(n.userMaskFeather=g(e)),4&o&&(n.vectorMaskDensity=u(e)/255),8&o&&(n.vectorMaskFeather=g(e))}return r()>2&&(t.logMissingFeatures&&console.log("Unhandled extra mask params"),u(e),u(e),p(e),p(e),p(e),p(e)),S(e,r()),n}}))}(e,r);for(o&&(n.mask=o),function(e){F(e,1,(function(t){for(var r=h(e),n=h(e),i=[];t();){var o=h(e),a=h(e);i.push({sourceRange:o,destRange:a})}return{compositeGrayBlendSource:r,compositeGraphBlendDestinationRange:n,ranges:i}}))}(e),n.name=w(e,4);i();)A(e,n,t,r)})),{layer:n,channels:a}}function B(e,t,r,n,o){var a,s=(r.right||0)-(r.left||0),u=(r.bottom||0)-(r.top||0),d=4===t.colorMode;if(s&&u)if(d){a={width:s,height:u,data:new Uint8ClampedArray(s*u*5)};for(var c=4;c<a.data.byteLength;c+=5)a.data[c]=255}else a=i.createImageData(s,u),i.resetImageData(a);i.RAW_IMAGE_DATA&&(r.imageDataRaw=[]);for(var p=0,h=n;p<h.length;p++){var g=h[p],v=f(e);if(-2===g.id){var y=r.mask;if(!y)throw new Error("Missing layer mask data");var w=(y.right||0)-(y.left||0),m=(y.bottom||0)-(y.top||0);if(w&&m){var b=i.createImageData(w,m);i.resetImageData(b);var S=e.offset;P(e,b,v,w,m,0,o.large,4),i.RAW_IMAGE_DATA&&(r.maskDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+S,e.offset-S)),l(b),o.useImageData?y.imageData=b:(y.canvas=i.createCanvas(w,m),y.canvas.getContext("2d").putImageData(b,0,0))}}else{var k=i.offsetForChannel(g.id,d),U=a;if(k<0&&(U=void 0,o.throwForMissingFeatures))throw new Error("Channel not supported: "+g.id);S=e.offset,P(e,U,v,s,u,k,o.large,d?5:4),i.RAW_IMAGE_DATA&&(r.imageDataRaw[g.id]=new Uint8Array(e.view.buffer,e.view.byteOffset+S,e.offset-S)),U&&1===t.colorMode&&l(U)}}if(a){if(d){var I=a;E(I,a=i.createImageData(I.width,I.height),!1)}o.useImageData?r.imageData=a:(r.canvas=i.createCanvas(s,u),r.canvas.getContext("2d").putImageData(a,0,0))}}function P(e,t,r,n,i,o,a,s){if(0===r)D(e,t,o,n,i,s);else{if(1!==r)throw new Error("Compression type not supported: "+r);M(e,t,0,i,s,[o],a)}}function A(e,t,r,n){var a=y(e);if("8BIM"!==a&&"8B64"!==a)throw new Error("Invalid signature: '"+a+"' at 0x"+(e.offset-4).toString(16));var s=y(e),l="8B64"===a||n.large&&-1!==i.largeAdditionalInfoKeys.indexOf(s);F(e,2,(function(i){var a=o.infoHandlersMap[s];if(a)try{a.read(e,t,i,r,n)}catch(e){if(n.throwForMissingFeatures)throw e}else n.logMissingFeatures&&console.log("Unhandled additional info: "+s),S(e,i());i()&&(n.logMissingFeatures&&console.log("Unread "+i()+" bytes left for additional info: "+s),S(e,i()))}),!1,l)}function E(e,t,r){for(var n=t.width*t.height*4,i=e.data,o=t.data,a=0,s=0;s<n;a+=5,s+=4){var l=i[a],u=i[a+1],d=i[a+2],c=i[a+3];o[s]=(l*c|0)/255|0,o[s+1]=(u*c|0)/255|0,o[s+2]=(d*c|0)/255|0,o[s+3]=r?255-i[a+4]:i[a+4]}}function D(e,t,r,n,i,o){var a=n*i,s=v(e,a);if(t&&r<o)for(var l=t.data,u=0,d=0|r;u<a;u++,d=d+o|0)l[d]=s[u]}function M(e,t,r,n,i,o,a){var s,l=t&&t.data;if(a){s=new Uint32Array(o.length*n);for(var u=0,d=0;u<o.length;u++)for(var c=0;c<n;c++,d++)s[d]=h(e)}else for(s=new Uint16Array(o.length*n),u=0,d=0;u<o.length;u++)for(c=0;c<n;c++,d++)s[d]=f(e);var p=i-1|0,g=0;for(d=0;g<o.length;g++){var y=0|o[g];if(!l||g>p||y>p)for(c=0;c<n;c++,d++)S(e,s[d]);else{c=0;for(var w=0|y;c<n;c++,d++)for(var m=s[d],b=v(e,m),k=0;k<m;k++){var U=b[k];if(U>128){var I=b[++k];U=256-U|0;for(var C=0;C<=U;C=C+1|0)l[w]=I,w=w+i|0}else if(U<128)for(C=0;C<=U;C=C+1|0)l[w]=b[++k],w=w+i|0;if(k>=m)throw new Error("Invalid RLE data: exceeded buffer size "+k+"/"+m)}}}}function F(e,t,r,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var o=h(e);if(i){if(0!==o)throw new Error("Sizes larger than 4GB are not supported");o=h(e)}if(!(o<=0&&n)){var a=e.offset+o;if(a>e.view.byteLength)throw new Error("Section exceeds file size");var s=r((function(){return a-e.offset}));for(e.offset!==a&&e.strict&&(e.offset>a?console.warn("Exceeded section limits"):console.warn("Unread section data"));a%t;)a++;return e.offset=a,s}}t.createReader=function(e,t,r){return{view:new DataView(e,t,r),offset:0,strict:!1}},t.readUint8=u,t.peekUint8=d,t.readInt16=c,t.readUint16=f,t.readInt32=p,t.readInt32LE=function(e){return e.offset+=4,e.view.getInt32(e.offset-4,!0)},t.readUint32=h,t.readFloat32=function(e){return e.offset+=4,e.view.getFloat32(e.offset-4,!1)},t.readFloat64=g,t.readFixedPoint32=function(e){return p(e)/65536},t.readFixedPointPath32=function(e){return p(e)/(1<<24)},t.readBytes=v,t.readSignature=y,t.readPascalString=w,t.readUnicodeString=m,t.readUnicodeStringWithLength=b,t.readAsciiString=function(e,t){for(var r="";t--;)r+=String.fromCharCode(u(e));return r},t.skipBytes=S,t.checkSignature=k,t.readPsd=function(e,r){var o;void 0===r&&(r={}),k(e,"8BPS");var p=f(e);if(1!==p&&2!==p)throw new Error("Invalid PSD file version: "+p);S(e,6);var g=f(e),m=h(e),b=h(e),U=f(e),P=f(e),O=1===p?3e4:3e5;if(b>O||m>O)throw new Error("Invalid size");if(g>16)throw new Error("Invalid channel count");if(U>32)throw new Error("Invalid bitsPerChannel count");if(-1===t.supportedColorModes.indexOf(P))throw new Error("Color mode not supported: "+(null!==(o=s[P])&&void 0!==o?o:P));var x={width:b,height:m,channels:g,bitsPerChannel:U,colorMode:P},L=n(n({},r),{large:2===p}),R=[0,1,-1,2,-2,3,-3,4,-4];F(e,1,(function(t){if(L.throwForMissingFeatures)throw new Error("Color mode data not supported");S(e,t())})),F(e,1,(function(t){for(var r=function(){for(var t=e.offset,r="",n=0,i=R;n<i.length;n++){var o=i[n];try{e.offset=t+o,r=y(e)}catch(e){}if(I(r))break}if(!I(r))throw new Error("Invalid signature: '"+r+"' at 0x"+t.toString(16));var s=f(e);w(e,2),F(e,2,(function(t){var r=a.resourceHandlersMap[s],n=1036===s&&!!L.skipThumbnail;if(x.imageResources||(x.imageResources={}),r&&!n)try{r.read(e,x.imageResources,t,L)}catch(r){if(L.throwForMissingFeatures)throw r;S(e,t())}else S(e,t())}))};t();)r()}));var T=!1;F(e,1,(function(t){if(T=function(e,t,r){var n=!1;return F(e,2,(function(i){var o=c(e);o<0&&(n=!0,o=-o);for(var a=[],s=[],l=0;l<o;l++){var u=C(e,t,r),d=u.layer,f=u.channels;a.push(d),s.push(f)}if(!r.skipLayerImageData)for(l=0;l<o;l++)B(e,t,a[l],s[l],r);S(e,i()),t.children||(t.children=[]);var p=[t];for(l=a.length-1;l>=0;l--){var h=a[l],g=h.sectionDivider?h.sectionDivider.type:0;1===g||2===g?(h.opened=1===g,h.children=[],p[p.length-1].children.unshift(h),p.push(h)):3===g?p.pop():p[p.length-1].children.unshift(h)}}),void 0,r.large),n}(e,x,L),t()>0){var r=function(e){return F(e,1,(function(t){if(t()){var r=f(e),n=f(e),i=f(e),o=f(e),a=f(e),s=f(e)/255,l=u(e);return S(e,t()),{overlayColorSpace:r,colorSpace1:n,colorSpace2:i,colorSpace3:o,colorSpace4:a,opacity:s,kind:l}}}))}(e);r&&(x.globalLayerMaskInfo=r)}else S(e,t());for(;t()>0;){for(;t()&&0===d(e);)S(e,1);t()>=12?A(e,x,x,L):S(e,t())}}),void 0,L.large);var N=x.children&&x.children.length;return L.skipCompositeImageData&&(L.skipLayerImageData||N)||function(e,r,n,o){var a=f(e);if(-1===t.supportedColorModes.indexOf(r.colorMode))throw new Error("Color mode not supported: "+r.colorMode);if(0!==a&&1!==a)throw new Error("Compression type not supported: "+a);var s=i.createImageData(r.width,r.height);switch(i.resetImageData(s),r.colorMode){case 0:var u=void 0;if(0===a)u=v(e,Math.ceil(r.width/8)*r.height);else{if(1!==a)throw new Error("Bitmap compression not supported: "+a);M(e,{data:u=new Uint8Array(r.width*r.height),width:r.width,height:r.height},r.width,r.height,1,[0],o.large)}i.decodeBitmap(u,s.data,r.width,r.height);break;case 3:case 1:var d=1===r.colorMode?[0]:[0,1,2];if(r.channels&&r.channels>3)for(var c=3;c<r.channels;c++)d.push(c);else n&&d.push(3);if(0===a)for(c=0;c<d.length;c++)D(e,s,d[c],r.width,r.height,4);else if(1===a){var p=e.offset;M(e,s,r.width,r.height,4,d,o.large),i.RAW_IMAGE_DATA&&(r.imageDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+p,e.offset-p))}1===r.colorMode&&l(s);break;case 4:if(4!==r.channels)throw new Error("Invalid channel count");if(d=[0,1,2,3],n&&d.push(4),0===a)throw new Error("Not implemented");if(1===a){var h={width:s.width,height:s.height,data:new Uint8Array(s.width*s.height*5)};p=e.offset,M(e,h,r.width,r.height,5,d,o.large),E(h,s,!0),i.RAW_IMAGE_DATA&&(r.imageDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+p,e.offset-p))}break;default:throw new Error("Color mode not supported: "+r.colorMode)}o.useImageData?r.imageData=s:(r.canvas=i.createCanvas(r.width,r.height),r.canvas.getContext("2d").putImageData(s,0,0))}(e,x,T,L),x},t.readDataRLE=M,t.readSection=F,t.readColor=function(e){switch(f(e)){case 0:var t=f(e)/257,r=f(e)/257,n=f(e)/257;return S(e,2),{r:t,g:r,b:n};case 1:var i=f(e)/65535,o=f(e)/65535;return n=f(e)/65535,S(e,2),{h:i,s:o,b:n};case 2:return{c:f(e)/257,m:f(e)/257,y:f(e)/257,k:d=f(e)/257};case 7:var a=c(e)/1e4,s=c(e),l=c(e),u=s<0?s/12800:s/12700;return n=l<0?l/12800:l/12700,S(e,2),{l:a,a:u,b:n};case 8:var d=255*f(e)/1e4;return S(e,6),{k:d};default:throw new Error("Invalid color space")}},t.readPattern=function(e){h(e);var t=h(e);if(1!==t)throw new Error("Invalid pattern version: "+t);var r=h(e),n=c(e),i=c(e);if(3!==r&&1!==r&&2!==r)throw new Error("Unsupported pattern color mode: "+r);var o=m(e),a=w(e,1),s=[];if(2===r){for(var l=0;l<256;l++)s.push({r:u(e),g:u(e),b:u(e)});S(e,4)}var d=h(e);if(3!==d)throw new Error("Invalid pattern VMAL version: "+d);h(e);var p=h(e),g=h(e),y=h(e),b=h(e),k=h(e),U=b-g,I=y-p,C=new Uint8Array(U*I*4);for(l=3;l<C.byteLength;l+=4)C[l]=255;l=0;for(var B=0;l<k+2;l++)if(h(e)){var P=h(e),A=h(e),E=h(e),D=h(e),M=h(e),F=h(e),O=f(e),x=u(e),L=v(e,P-23);if(8!==A||8!==O)throw new Error("16bit pixel depth not supported for patterns");var R=F-D,T=M-E,N=D-g,V=E-p;if(0===x){if(3===r&&B<3)for(var G=0;G<T;G++)for(var _=0;_<R;_++){var j=_+G*R;C[(W=4*(N+_+(G+V)*U))+B]=L[j]}if(1===r&&B<1)for(var z=0;z<T;z++)for(var H=0;H<R;H++){var W=4*(N+H+(z+V)*U),K=L[j=H+z*R];C[W+0]=K,C[W+1]=K,C[W+2]=K}if(2===r)throw new Error("Indexed pattern color mode not implemented")}else{if(1!==x)throw new Error("Invalid pattern compression mode");console.error("Unsupported pattern compression"),o+=" (failed to decode)"}B++}return{id:a,name:o,x:n,y:i,bounds:{x:g,y:p,w:U,h:I},data:C}}},766:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.writeColor=t.writePsd=t.writeSection=t.writeUnicodeStringWithPadding=t.writeUnicodeString=t.writePascalString=t.writeSignature=t.writeZeros=t.writeBytes=t.writeFixedPointPath32=t.writeFixedPoint32=t.writeFloat64=t.writeFloat32=t.writeUint32=t.writeInt32=t.writeUint16=t.writeInt16=t.writeUint8=t.getWriterBufferNoCopy=t.getWriterBuffer=t.createWriter=void 0;var i=r(8110),o=r(9258),a=r(4294);function s(e,t){var r=k(e,1);e.view.setUint8(r,t)}function l(e,t){var r=k(e,2);e.view.setInt16(r,t,!1)}function u(e,t){var r=k(e,2);e.view.setUint16(r,t,!1)}function d(e,t){var r=k(e,4);e.view.setInt32(r,t,!1)}function c(e,t){var r=k(e,4);e.view.setUint32(r,t,!1)}function f(e,t){var r=k(e,8);e.view.setFloat64(r,t,!1)}function p(e,t){t&&(S(e,e.offset+t.length),new Uint8Array(e.buffer).set(t,e.offset),e.offset+=t.length)}function h(e,t){for(var r=0;r<t;r++)s(e,0)}function g(e,t){if(4!==t.length)throw new Error("Invalid signature: '"+t+"'");for(var r=0;r<4;r++)s(e,t.charCodeAt(r))}function v(e,t,r){var n=t.length;s(e,n);for(var i=0;i<n;i++){var o=t.charCodeAt(i);s(e,o<128?o:"?".charCodeAt(0))}for(;++n%r;)s(e,0)}function y(e){void 0===e&&(e=[]);for(var t=0,r=0,n=e;r<n.length;r++){var i=n[r];if(i.canvas||i.imageData){var o=I(i),a=o.width,s=o.height;t=Math.max(t,2*s+2*a*s)}i.children&&(t=Math.max(t,y(i.children)))}return t}function w(e,t,r,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),i&&c(e,0);var o=e.offset;c(e,0),r();for(var a=e.offset-o-4,l=a;l%t!=0;)s(e,0),l++;n&&(a=l),e.view.setUint32(o,a,!1)}function m(e,t,r,n){for(var a=function(o){var a=o.key;if("Txt2"===a&&n.invalidateTextLayers)return"continue";if("vmsk"===a&&n.psb&&(a="vsms"),o.has(t)){var s=n.psb&&-1!==i.largeAdditionalInfoKeys.indexOf(a);g(e,s?"8B64":"8BIM"),g(e,a),w(e,"Txt2"===a||"luni"===a||"vmsk"===a||"artb"===a||"artd"===a||"vogk"===a||"SoLd"===a||"lnk2"===a||"vscg"===a||"vsms"===a||"GdFl"===a||"lmfx"===a||"lrFX"===a||"cinf"===a||"PlLd"===a||"Anno"===a?4:2,(function(){o.write(e,t,r,n)}),"Txt2"!==a&&"cinf"!==a&&"extn"!==a,s)}},s=0,l=o.infoHandlers;s<l.length;s++)a(l[s])}function b(e,t){if(t)for(var r=0,o=t;r<o.length;r++){var a=o[r];if(a.children&&a.canvas)throw new Error("Invalid layer, cannot have both 'canvas' and 'children' properties");if(a.children&&a.imageData)throw new Error("Invalid layer, cannot have both 'imageData' and 'children' properties");a.children?(e.push({name:"</Layer group>",sectionDivider:{type:3}}),b(e,a.children),e.push(n({sectionDivider:{type:!1===a.opened?2:1,key:i.fromBlendMode[a.blendMode]||"pass",subType:0}},a))):e.push(n({},a))}}function S(e,t){t>e.buffer.byteLength&&function(e,t){var r=e.buffer.byteLength;do{r*=2}while(t>r);var n=new ArrayBuffer(r),i=new Uint8Array(n),o=new Uint8Array(e.buffer);i.set(o),e.buffer=n,e.view=new DataView(e.buffer)}(e,t)}function k(e,t){var r=e.offset;return S(e,e.offset+=t),r}function U(e){var t=i.createCanvas(10,10),r=1;e.width>e.height?(t.width=160,t.height=Math.floor(e.height*(t.width/e.width)),r=t.width/e.width):(t.height=160,t.width=Math.floor(e.width*(t.height/e.height)),r=t.height/e.height);var n=t.getContext("2d");if(n.scale(r,r),e.imageData){var o=i.createCanvas(e.imageData.width,e.imageData.height);o.getContext("2d").putImageData(e.imageData,0,0),n.drawImage(o,0,0)}else e.canvas&&n.drawImage(e.canvas,0,0);return t}function I(e){var t=e.canvas;return e.imageData||t||{width:0,height:0}}function C(e,t,r,n){for(var i=e.data,o=4*(t*e.width+r)+3|0,a=o+4*(n-r)|0,s=o;s<a;s=s+4|0)if(0!==i[s])return!1;return!0}function B(e,t,r,n){for(var i=e.data,o=4*e.width|0,a=r,s=r*o+4*t+3|0;a<n;a++,s=s+o|0)if(0!==i[s])return!1;return!0}t.createWriter=function(e){void 0===e&&(e=4096);var t=new ArrayBuffer(e);return{buffer:t,view:new DataView(t),offset:0}},t.getWriterBuffer=function(e){return e.buffer.slice(0,e.offset)},t.getWriterBufferNoCopy=function(e){return new Uint8Array(e.buffer,0,e.offset)},t.writeUint8=s,t.writeInt16=l,t.writeUint16=u,t.writeInt32=d,t.writeUint32=c,t.writeFloat32=function(e,t){var r=k(e,4);e.view.setFloat32(r,t,!1)},t.writeFloat64=f,t.writeFixedPoint32=function(e,t){d(e,65536*t)},t.writeFixedPointPath32=function(e,t){d(e,t*(1<<24))},t.writeBytes=p,t.writeZeros=h,t.writeSignature=g,t.writePascalString=v,t.writeUnicodeString=function(e,t){c(e,t.length);for(var r=0;r<t.length;r++)u(e,t.charCodeAt(r))},t.writeUnicodeStringWithPadding=function(e,t){c(e,t.length+1);for(var r=0;r<t.length;r++)u(e,t.charCodeAt(r));u(e,0)},t.writeSection=w,t.writePsd=function(e,t,r){if(void 0===r&&(r={}),!(+t.width>0&&+t.height>0))throw new Error("Invalid document size");if((t.width>3e4||t.height>3e4)&&!r.psb)throw new Error("Document size is too large (max is 30000x30000, use PSB format instead)");var S=t.imageResources||{},k=n(n({},r),{layerIds:[]});k.generateThumbnail&&(S=n(n({},S),{thumbnail:U(t)}));var P=t.imageData;if(!P&&t.canvas&&(P=t.canvas.getContext("2d").getImageData(0,0,t.canvas.width,t.canvas.height)),P&&(t.width!==P.width||t.height!==P.height))throw new Error("Document canvas must have the same size as document");var A=!!P&&i.hasAlpha(P),E=Math.max(y(t.children),8*t.width*t.height+2*t.height),D=new Uint8Array(E);g(e,"8BPS"),u(e,r.psb?2:1),h(e,6),u(e,A?4:3),c(e,t.height),c(e,t.width),u(e,8),u(e,3),w(e,1,(function(){})),w(e,1,(function(){for(var t=function(t){t.has(S)&&(g(e,"8BIM"),u(e,t.key),v(e,"",2),w(e,2,(function(){return t.write(e,S)})))},r=0,n=a.resourceHandlers;r<n.length;r++)t(n[r])})),w(e,2,(function(){!function(e,t,r,n,a){w(t,4,(function(){var y,S=[];b(S,r.children),S.length||S.push({}),l(t,n?-S.length:S.length);for(var k=S.map((function(t,r){return function(e,t,r,n){var o=function(e,t,r,n){var o,a=0|t.top,s=0|t.left,l=0|t.right,u=0|t.bottom,d=[{channelId:-1,compression:0,buffer:void 0,length:2},{channelId:0,compression:0,buffer:void 0,length:2},{channelId:1,compression:0,buffer:void 0,length:2},{channelId:2,compression:0,buffer:void 0,length:2}],c=I(t),f=c.width,p=c.height;if(!t.canvas&&!t.imageData||!f||!p)return{layer:t,top:a,left:s,right:l=s,bottom:u=a,channels:d};l=s+f,u=a+p;var h=t.imageData||t.canvas.getContext("2d").getImageData(0,0,f,p);if(n.trimImageData){var g=function(e){for(var t=0,r=0,n=e.width,i=e.height;t<i&&C(e,t,r,n);)t++;for(;i>t&&C(e,i-1,r,n);)i--;for(;r<n&&B(e,r,t,i);)r++;for(;n>r&&B(e,n-1,t,i);)n--;return{top:t,left:r,right:n,bottom:i}}(h);if(0!==g.left||0!==g.top||g.right!==h.width||g.bottom!==h.height){if(s+=g.left,a+=g.top,l-=h.width-g.right,u-=h.height-g.bottom,p=u-a,!(f=l-s)||!p)return{layer:t,top:a,left:s,right:l,bottom:u,channels:d};h=t.imageData?function(e,t,r,n,o){for(var a=i.createImageData(n,o),s=e.data,l=a.data,u=0;u<o;u++)for(var d=0;d<n;d++){var c=4*(d+t+(u+r)*n),f=4*(d+u*n);l[f]=s[c],l[f+1]=s[c+1],l[f+2]=s[c+2],l[f+3]=s[c+3]}return a}(h,g.left,g.top,f,p):t.canvas.getContext("2d").getImageData(g.left,g.top,f,p)}}var v=[0,1,2];return(!r||n.noBackground||t.mask||i.hasAlpha(h)||i.RAW_IMAGE_DATA&&(null===(o=t.imageDataRaw)||void 0===o?void 0:o[-1]))&&v.unshift(-1),d=v.map((function(r){var o=i.offsetForChannel(r,!1),a=i.writeDataRLE(e,h,f,p,[o],!!n.psb);return i.RAW_IMAGE_DATA&&t.imageDataRaw&&(a=t.imageDataRaw[r]),{channelId:r,compression:1,buffer:a,length:2+a.length}})),{layer:t,top:a,left:s,right:l,bottom:u,channels:d}}(e,t,r,n),a=t.mask;if(a){var s=0|a.top,l=0|a.left,u=0|a.right,d=0|a.bottom,c=I(a),f=c.width,p=c.height,h=a.imageData;if(!h&&a.canvas&&f&&p&&(h=a.canvas.getContext("2d").getImageData(0,0,f,p)),f&&p&&h){u=l+f,d=s+p;var g=i.writeDataRLE(e,h,f,p,[0],!!n.psb);i.RAW_IMAGE_DATA&&t.maskDataRaw&&(g=t.maskDataRaw),o.mask={top:s,left:l,right:u,bottom:d},o.channels.push({channelId:-2,compression:1,buffer:g,length:2+g.length})}else o.mask={top:0,left:0,right:0,bottom:0},o.channels.push({channelId:-2,compression:0,buffer:new Uint8Array(0),length:0})}return o}(e,t,0===r,a)})),U=function(e){var n=e.layer,p=e.top,b=e.left,S=e.bottom,k=e.right,U=e.channels;d(t,p),d(t,b),d(t,S),d(t,k),u(t,U.length);for(var I=0,C=U;I<C.length;I++){var B=C[I];l(t,B.channelId),a.psb&&c(t,0),c(t,B.length)}g(t,"8BIM"),g(t,i.fromBlendMode[n.blendMode]||"norm"),s(t,Math.round(255*i.clamp(null!==(y=n.opacity)&&void 0!==y?y:1,0,1))),s(t,n.clipping?1:0);var P=8;n.transparencyProtected&&(P|=1),n.hidden&&(P|=2),(n.vectorMask||n.sectionDivider&&0!==n.sectionDivider.type)&&(P|=16),n.effects&&o.hasMultiEffects(n.effects)&&(P|=32),s(t,P),s(t,0),w(t,1,(function(){!function(e,t,r){var n=t.mask;w(e,1,(function(){if(n){var t=r.mask||{};d(e,t.top),d(e,t.left),d(e,t.bottom),d(e,t.right),s(e,n.defaultColor);var i=0;void 0!==n.userMaskDensity&&(i|=1),void 0!==n.userMaskFeather&&(i|=2),void 0!==n.vectorMaskDensity&&(i|=4),void 0!==n.vectorMaskFeather&&(i|=8);var o=0;n.disabled&&(o|=2),n.positionRelativeToLayer&&(o|=1),n.fromVectorData&&(o|=8),i&&(o|=16),s(e,o),i&&(s(e,i),void 0!==n.userMaskDensity&&s(e,Math.round(255*n.userMaskDensity)),void 0!==n.userMaskFeather&&f(e,n.userMaskFeather),void 0!==n.vectorMaskDensity&&s(e,Math.round(255*n.vectorMaskDensity)),void 0!==n.vectorMaskFeather&&f(e,n.vectorMaskFeather)),h(e,2)}}))}(t,n,e),function(e,t){w(e,1,(function(){c(e,65535),c(e,65535);for(var r=t.channels||0,n=0;n<r;n++)c(e,65535),c(e,65535)}))}(t,r),v(t,n.name||"",4),m(t,n,r,a)}))},P=0,A=k;P<A.length;P++)U(A[P]);for(var E=0,D=k;E<D.length;E++)for(var M=0,F=D[E].channels;M<F.length;M++){var O=F[M];u(t,O.compression),O.buffer&&p(t,O.buffer)}}),!0,a.psb)}(D,e,t,A,k),function(e,t){w(e,1,(function(){t&&(u(e,t.overlayColorSpace),u(e,t.colorSpace1),u(e,t.colorSpace2),u(e,t.colorSpace3),u(e,t.colorSpace4),u(e,255*t.opacity),s(e,t.kind),h(e,3))}))}(e,t.globalLayerMaskInfo),m(e,t,t,k)}),void 0,!!k.psb);var M=A?[0,1,2,3]:[0,1,2],F=P||{data:new Uint8Array(4*t.width*t.height),width:t.width,height:t.height};u(e,1),i.RAW_IMAGE_DATA&&t.imageDataRaw?(console.log("writing raw image data"),p(e,t.imageDataRaw)):p(e,i.writeDataRLE(D,F,t.width,t.height,M,!!r.psb))},t.writeColor=function(e,t){t?"r"in t?(u(e,0),u(e,Math.round(257*t.r)),u(e,Math.round(257*t.g)),u(e,Math.round(257*t.b)),u(e,0)):"l"in t?(u(e,7),l(e,Math.round(1e4*t.l)),l(e,Math.round(t.a<0?12800*t.a:12700*t.a)),l(e,Math.round(t.b<0?12800*t.b:12700*t.b)),u(e,0)):"h"in t?(u(e,1),u(e,Math.round(65535*t.h)),u(e,Math.round(65535*t.s)),u(e,Math.round(65535*t.b)),u(e,0)):"c"in t?(u(e,2),u(e,Math.round(257*t.c)),u(e,Math.round(257*t.m)),u(e,Math.round(257*t.y)),u(e,Math.round(257*t.k))):(u(e,8),u(e,Math.round(1e4*t.k/255)),h(e,6)):(u(e,0),h(e,8))}},6201:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.encodeEngineData=t.decodeEngineData=void 0;var n={name:"MyriadPro-Regular",script:0,type:0,synthetic:0},i={justification:"left",firstLineIndent:0,startIndent:0,endIndent:0,spaceBefore:0,spaceAfter:0,autoHyphenate:!0,hyphenatedWordSize:6,preHyphen:2,postHyphen:2,consecutiveHyphens:8,zone:36,wordSpacing:[.8,1,1.33],letterSpacing:[0,0,0],glyphSpacing:[1,1,1],autoLeading:1.2,leadingType:0,hanging:!1,burasagari:!1,kinsokuOrder:0,everyLineComposer:!1},o={font:n,fontSize:12,fauxBold:!1,fauxItalic:!1,autoLeading:!0,leading:0,horizontalScale:1,verticalScale:1,tracking:0,autoKerning:!0,kerning:0,baselineShift:0,fontCaps:0,fontBaseline:0,underline:!1,strikethrough:!1,ligatures:!0,dLigatures:!1,baselineDirection:2,tsume:0,styleRunAlignment:2,language:0,noBreak:!1,fillColor:{r:0,g:0,b:0},strokeColor:{r:0,g:0,b:0},fillFlag:!0,strokeFlag:!1,fillFirst:!0,yUnderline:1,outlineWidth:1,characterDirection:0,hindiNumbers:!1,kashida:1,diacriticPos:2},a={isOn:!1,show:!1,size:18,leading:22,color:{r:0,g:0,b:255},leadingFillColor:{r:0,g:0,b:255},alignLineHeightToGridFlags:!1},s=["justification","firstLineIndent","startIndent","endIndent","spaceBefore","spaceAfter","autoHyphenate","hyphenatedWordSize","preHyphen","postHyphen","consecutiveHyphens","zone","wordSpacing","letterSpacing","glyphSpacing","autoLeading","leadingType","hanging","burasagari","kinsokuOrder","everyLineComposer"],l=["font","fontSize","fauxBold","fauxItalic","autoLeading","leading","horizontalScale","verticalScale","tracking","autoKerning","kerning","baselineShift","fontCaps","fontBaseline","underline","strikethrough","ligatures","dLigatures","baselineDirection","tsume","styleRunAlignment","language","noBreak","fillColor","strokeColor","fillFlag","strokeFlag","fillFirst","yUnderline","outlineWidth","characterDirection","hindiNumbers","kashida","diacriticPos"],u=["none","crisp","strong","smooth","sharp"],d=["left","right","center"];function c(e){return e.substr(0,1).toUpperCase()+e.substr(1)}function f(e){return e&&"r"in e?["a"in e?e.a:1,e.r/255,e.g/255,e.b/255]:[0,0,0,0]}function p(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function h(e,t){if(!e||!t)return!1;for(var r=0,n=Object.keys(e);r<n.length;r++)if(e[a=n[r]]!==t[a])return!1;for(var i=0,o=Object.keys(t);i<o.length;i++){var a;if(e[a=o[i]]!==t[a])return!1}return!0}function g(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t.name)return r;return e.push(t),e.length-1}function v(e,t,r){for(var n,i,o={},a=0,s=t;a<s.length;a++){var l=s[a],u=c(l);void 0!==e[u]&&(o[l]="justification"===l?d[e[u]]:"font"===l?r[e[u]]:"fillColor"===l||"strokeColor"===l?(void 0,i=(n=e[u]).Values,0===n.Type?{r:255*i[1],g:255*i[1],b:255*i[1]}:{r:255*i[1],g:255*i[2],b:255*i[3],a:i[0]}):e[u])}return o}function y(e,t,r){for(var n,i={},o=0,a=t;o<a.length;o++){var s=a[o],l=c(s);void 0!==e[s]&&(i[l]="justification"===s?d.indexOf(null!==(n=e[s])&&void 0!==n?n:"left"):"font"===s?g(r,e[s]):"fillColor"===s||"strokeColor"===s?{Type:1,Values:f(e[s])}:e[s])}return i}function w(e,t){return v(e,s,t)}function m(e,t){return v(e,l,t)}function b(e,t){return y(e,s,t)}function S(e,t){return y(e,l,t)}function k(e,t,r){if(t.length){for(var n=function(r){var n=t[0].style[r];if(void 0!==n){var i;i=Array.isArray(n)?t.every((function(e){return p(e.style[r],n)})):"object"==typeof n?t.every((function(e){return h(e.style[r],n)})):t.every((function(e){return e.style[r]===n})),i&&(e[r]=n)}if(void 0!==e[r])for(var o=0,a=t;o<a.length;o++){var s=a[o];(Array.isArray(n)?p(s.style[r],n):"object"==typeof n?h(s.style[r],n):s.style[r]===n)&&delete s.style[r]}},i=0,o=r;i<o.length;i++)n(o[i]);t.every((function(e){return 0===Object.keys(e.style).length}))&&(t.length=0)}}t.decodeEngineData=function(e){for(var t,r,n,i,o,a,d=e.EngineDict,c=e.ResourceDict,f=c.FontSet.map((function(e){return{name:e.Name,script:e.Script,type:e.FontType,synthetic:e.Synthetic}})),p=d.Editor.Text.replace(/\r/g,"\n"),h=0;/\n$/.test(p);)p=p.substr(0,p.length-1),h++;var g={text:p,antiAlias:null!==(t=u[d.AntiAlias])&&void 0!==t?t:"smooth",useFractionalGlyphWidths:!!d.UseFractionalGlyphWidths,superscriptSize:c.SuperscriptSize,superscriptPosition:c.SuperscriptPosition,subscriptSize:c.SubscriptSize,subscriptPosition:c.SubscriptPosition,smallCapSize:c.SmallCapSize},v=null===(a=null===(o=null===(i=null===(n=null===(r=d.Rendered)||void 0===r?void 0:r.Shapes)||void 0===n?void 0:n.Children)||void 0===i?void 0:i[0])||void 0===o?void 0:o.Cookie)||void 0===a?void 0:a.Photoshop;v&&(g.shapeType=1===v.ShapeType?"box":"point",v.PointBase&&(g.pointBase=v.PointBase),v.BoxBounds&&(g.boxBounds=v.BoxBounds));var y=e.EngineDict.ParagraphRun;g.paragraphStyle={},g.paragraphStyleRuns=[];for(var b=0;b<y.RunArray.length;b++){var S=y.RunArray[b],U=y.RunLengthArray[b],I=w(S.ParagraphSheet.Properties,f);g.paragraphStyleRuns.push({length:U,style:I})}for(var C=h;g.paragraphStyleRuns.length&&C>0;C--)0==--g.paragraphStyleRuns[g.paragraphStyleRuns.length-1].length&&g.paragraphStyleRuns.pop();k(g.paragraphStyle,g.paragraphStyleRuns,s),g.paragraphStyleRuns.length||delete g.paragraphStyleRuns;var B=e.EngineDict.StyleRun;for(g.style={},g.styleRuns=[],b=0;b<B.RunArray.length;b++){var P=B.RunLengthArray[b];I=m(B.RunArray[b].StyleSheet.StyleSheetData,f),g.styleRuns.push({length:P,style:I})}for(C=h;g.styleRuns.length&&C>0;C--)0==--g.styleRuns[g.styleRuns.length-1].length&&g.styleRuns.pop();return k(g.style,g.styleRuns,l),g.styleRuns.length||delete g.styleRuns,g},t.encodeEngineData=function(e){var t,s,l,d,c,p,h,g,v,y,w,m,k=(e.text||"").replace(/\r?\n/g,"\r")+"\r",U=[{name:"AdobeInvisFont",script:0,type:0,synthetic:0}],I=(null===(t=e.style)||void 0===t?void 0:t.font)||(null===(l=null===(s=e.styleRuns)||void 0===s?void 0:s.find((function(e){return e.style.font})))||void 0===l?void 0:l.style.font)||n,C=[],B=[],P=e.paragraphStyleRuns;if(P&&P.length){for(var A=k.length,E=0,D=P;E<D.length;E++){var M=D[E];A-=_=Math.min(M.length,A),_&&(1===A&&M===P[P.length-1]&&(_++,A--),B.push(_),C.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:b(r(r(r({},i),e.paragraphStyle),M.style),U)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}A&&(B.push(A),C.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:b(r(r({},i),e.paragraphStyle),U)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}else for(var F=0,O=0;F<k.length;F++)13===k.charCodeAt(F)&&(B.push(F-O+1),C.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:b(r(r({},i),e.paragraphStyle),U)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}),O=F+1);for(var x=S(r(r({},o),{font:I}),U),L=e.styleRuns||[{length:k.length,style:e.style||{}}],R=[],T=[],N=k.length,V=0,G=L;V<G.length;V++){var _,j=G[V];N-=_=Math.min(j.length,N),_&&(1===N&&j===L[L.length-1]&&(_++,N--),T.push(_),R.push({StyleSheet:{StyleSheetData:S(r(r({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),j.style),U)}}))}N&&L.length&&(T.push(N),R.push({StyleSheet:{StyleSheetData:S(r({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),U)}}));var z=r(r({},a),e.gridInfo),H="vertical"===e.orientation?2:0,W="vertical"===e.orientation?1:0,K="box"===e.shapeType?1:0,X={ShapeType:K};0===K?X.PointBase=e.pointBase||[0,0]:X.BoxBounds=e.boxBounds||[0,0,0,0],X.Base={ShapeType:K,TransformPoint0:[1,0],TransformPoint1:[0,1],TransformPoint2:[0,0]};var Y={KinsokuSet:[{Name:"PhotoshopKinsokuHard",NoStart:"、。，．・：；？！ー―’”）〕］｝〉》」』】ヽヾゝゞ々ぁぃぅぇぉっゃゅょゎァィゥェォッャュョヮヵヶ゛゜?!)]},.:;℃℉¢％‰",NoEnd:"‘“（〔［｛〈《「『【([{￥＄£＠§〒＃",Keep:"―‥",Hanging:"、。.,"},{Name:"PhotoshopKinsokuSoft",NoStart:"、。，．・：；？！’”）〕］｝〉》」』】ヽヾゝゞ々",NoEnd:"‘“（〔［｛〈《「『【",Keep:"―‥",Hanging:"、。.,"}],MojiKumiSet:[{InternalName:"Photoshop6MojiKumiSet1"},{InternalName:"Photoshop6MojiKumiSet2"},{InternalName:"Photoshop6MojiKumiSet3"},{InternalName:"Photoshop6MojiKumiSet4"}],TheNormalStyleSheet:0,TheNormalParagraphSheet:0,ParagraphSheetSet:[{Name:"Normal RGB",DefaultStyleSheet:0,Properties:b(r(r({},i),e.paragraphStyle),U)}],StyleSheetSet:[{Name:"Normal RGB",StyleSheetData:x}],FontSet:U.map((function(e){return{Name:e.name,Script:e.script||0,FontType:e.type||0,Synthetic:e.synthetic||0}})),SuperscriptSize:null!==(d=e.superscriptSize)&&void 0!==d?d:.583,SuperscriptPosition:null!==(c=e.superscriptPosition)&&void 0!==c?c:.333,SubscriptSize:null!==(p=e.subscriptSize)&&void 0!==p?p:.583,SubscriptPosition:null!==(h=e.subscriptPosition)&&void 0!==h?h:.333,SmallCapSize:null!==(g=e.smallCapSize)&&void 0!==g?g:.7};return{EngineDict:{Editor:{Text:k},ParagraphRun:{DefaultRunData:{ParagraphSheet:{DefaultStyleSheet:0,Properties:{}},Adjustments:{Axis:[1,0,1],XY:[0,0]}},RunArray:C,RunLengthArray:B,IsJoinable:1},StyleRun:{DefaultRunData:{StyleSheet:{StyleSheetData:{}}},RunArray:R,RunLengthArray:T,IsJoinable:2},GridInfo:{GridIsOn:!!z.isOn,ShowGrid:!!z.show,GridSize:null!==(v=z.size)&&void 0!==v?v:18,GridLeading:null!==(y=z.leading)&&void 0!==y?y:22,GridColor:{Type:1,Values:f(z.color)},GridLeadingFillColor:{Type:1,Values:f(z.color)},AlignLineHeightToGridFlags:!!z.alignLineHeightToGridFlags},AntiAlias:u.indexOf(null!==(w=e.antiAlias)&&void 0!==w?w:"sharp"),UseFractionalGlyphWidths:null===(m=e.useFractionalGlyphWidths)||void 0===m||m,Rendered:{Version:1,Shapes:{WritingDirection:H,Children:[{ShapeType:K,Procession:W,Lines:{WritingDirection:H,Children:[]},Cookie:{Photoshop:X}}]}}},ResourceDict:r({},Y),DocumentResources:r({},Y)}}},4408:(e,t)=>{"use strict";function r(e){return 0==(4294967168&e)?1:0==(4294965248&e)?2:0==(4294901760&e)?3:4}function n(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i>=55296&&i<=56319){if(n+1<e.length){var o=e.charCodeAt(n+1);56320==(64512&o)&&(n++,t+=r(((1023&i)<<10)+(1023&o)+65536))}}else t+=r(i)}return t}function i(e,t,n){var i=r(n);switch(i){case 1:e[t]=n;break;case 2:e[t]=n>>6&31|192,e[t+1]=63&n|128;break;case 3:e[t]=n>>12&15|224,e[t+1]=n>>6&63|128,e[t+2]=63&n|128;break;default:e[t]=n>>18&7|240,e[t+1]=n>>12&63|128,e[t+2]=n>>6&63|128,e[t+3]=63&n|128}return i}function o(e,t,r){for(var n=0;n<r.length;n++){var o=r.charCodeAt(n);if(o>=55296&&o<=56319){if(n+1<r.length){var a=r.charCodeAt(n+1);56320==(64512&a)&&(n++,t+=i(e,t,((1023&o)<<10)+(1023&a)+65536))}}else t+=i(e,t,o)}return t}function a(e,t){if(t>=e.length)throw Error("Invalid byte index");var r=e[t];if(128==(192&r))return 63&r;throw Error("Invalid continuation byte")}Object.defineProperty(t,"__esModule",{value:!0}),t.decodeString=t.encodeString=t.encodeStringTo=t.stringLengthInBytes=void 0,t.stringLengthInBytes=n,t.encodeStringTo=o,t.encodeString=function(e){var t=new Uint8Array(n(e));return o(t,0,e),t},t.decodeString=function(e){for(var t="",r=0;r<e.length;){var n=e[r++],i=void 0;if(0==(128&n))i=n;else if(192==(224&n)){if((i=(31&n)<<6|a(e,r++))<128)throw Error("Invalid continuation byte")}else if(224==(240&n)){if((i=(15&n)<<12|a(e,r++)<<6|a(e,r++))<2048)throw Error("Invalid continuation byte");if(i>=55296&&i<=57343)throw Error("Lone surrogate U+"+i.toString(16).toUpperCase()+" is not a scalar value")}else{if(240!=(248&n))throw Error("Invalid UTF-8 detected");if((i=(15&n)<<18|a(e,r++)<<12|a(e,r++)<<6|a(e,r++))<65536||i>1114111)throw Error("Invalid continuation byte")}i>65535&&(i-=65536,t+=String.fromCharCode(i>>>10&1023|55296),i=56320|1023&i),t+=String.fromCharCode(i)}return t}},1755:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=l(e),a=o[0],s=o[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),d=0,c=s>0?a-4:a;for(r=0;r<c;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[d++]=t>>16&255,u[d++]=t>>8&255,u[d++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[d++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[d++]=t>>8&255,u[d++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,l=n-i;s<l;s+=a)o.push(u(e,s,s+a>l?l:s+a));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},7639:(e,t,r)=>{"use strict";const n=r(1755),i=r(6951),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=s(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(q(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(q(e,SharedArrayBuffer)||e&&q(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,r);const i=function(e){if(l.isBuffer(e)){const t=0|h(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||$(e.length)?s(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return d(e),s(e<0?0:0|h(e))}function f(e){const t=e.length<0?0:0|h(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,l.prototype),n}function h(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(i)return n?-1:K(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,r);case"utf8":case"utf-8":return B(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return E(this,t,r);case"base64":return C(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),$(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){let o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===l)return n*a}else-1!==n&&(o-=o-n),n=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){let r=!0;for(let n=0;n<l;n++)if(u(e,o+n)!==u(t,n)){r=!1;break}if(r)return o}return-1}function b(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let a;for(n>o/2&&(n=o/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if($(n))return a;e[r+a]=n}return a}function S(e,t,r,n){return Y(K(t,e.length-r),e,r,n)}function k(e,t,r,n){return Y(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function U(e,t,r,n){return Y(X(t),e,r,n)}function I(e,t,r,n){return Y(function(e,t){let r,n,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function C(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function B(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(o=l));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(l=(15&t)<<12|(63&r)<<6|63&n,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:r=e[i+1],n=e[i+2],s=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(e){const t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=P));return r}(n)}t.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return function(e,t,r){return d(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},l.allocUnsafe=function(e){return c(e)},l.allocUnsafeSlow=function(e){return c(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=l.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(q(t,Uint8Array))i+t.length>n.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?B(this,0,e):v.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,i){if(q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const s=Math.min(o,a),u=this.slice(n,i),d=e.slice(t,r);for(let e=0;e<s;++e)if(u[e]!==d[e]){o=u[e],a=d[e];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return S(this,e,t,r);case"ascii":case"latin1":case"binary":return k(this,e,t,r);case"base64":return U(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function A(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function E(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function D(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=Z[e[n]];return i}function M(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function F(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,n,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function x(e,t,r,n,i){j(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function L(e,t,r,n,i){j(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function R(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function T(e,t,r,n,o){return t=+t,r>>>=0,o||R(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,o){return t=+t,r>>>=0,o||R(e,0,r,8),i.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=J((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=J((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=J((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=J((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||O(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||O(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=J((function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=J((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,e,t,r,n-1,-n)}let i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,e,t,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=J((function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=J((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,r){return T(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return T(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=l.isBuffer(e)?e:l.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%a]}return this};const V={};function G(e,t,r){V[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function _(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function j(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new V.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||H(t,e.length-(r+1))}(n,i,o)}function z(e,t){if("number"!=typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,r){if(Math.floor(e)!==e)throw z(e,r),new V.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}G("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),G("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),G("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=_(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=_(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function K(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function X(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function J(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},6951:(e,t)=>{t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,d=-7,c=r?i-1:0,f=r?-1:1,p=e[t+c];for(c+=f,o=p&(1<<-d)-1,p>>=-d,d+=s;d>0;o=256*o+e[t+c],c+=f,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=n;d>0;a=256*a+e[t+c],c+=f,d-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=u}return(p?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,d=(1<<u)-1,c=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,h=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+c>=1?f/l:f*Math.pow(2,1-c))*l>=2&&(a++,l/=2),a+c>=d?(s=0,a=d):a+c>=1?(s=(t*l-1)*Math.pow(2,i),a+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+p]=255&a,p+=h,a/=256,u-=8);e[r+p-h]|=128*g}}}]);