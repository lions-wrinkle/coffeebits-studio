"use strict";(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[117],{3333:(e,t,n)=>{n.r(t),n.d(t,{GoodMorning:()=>a});var i=n(6998),s=n(6810),o=n(2871),l=n(4714);class a extends i.BasePage{constructor(){super(...arguments),this.ui=document.createElement("div"),this.ui.innerHTML='\n        <h1>Good Morning Generator</h1>\n        <p class="dark-text">Generate GM GIFs featuring your Bathers</p>\n\n        <div class="d-sm-flex flew-row" style="background-color: var(--background-dark);">\n\n            <div class="d-flex flex-column p-3 text-center justify-content-between">\n\n                <div>\n                    <img src="assets/default.png" class="mb-2 ms-auto me-auto" id="club-img" style="width: 200px; height: auto">\n\n                    <div class="dropdown mb-3" id="bath-club-dropdown">\n                        <button class="dropdown-toggle button-alt" type="button" data-bs-toggle="dropdown"\n                            aria-expanded="false">\n                            Choose Bather\n                        </button>\n\n                    </div>\n\n                    <select class="form-select mb-3" aria-label="Default select example" id="select-filter">\n                        <option value="" selected>Select filter</option>\n                        <option value="chatty">Chatty</option>\n                        <option value="shower">Coffee Shower</option>\n                        <option value="neon_glitch">Neon glitch</option>\n                    </select>\n                </div>\n                \n                <button id="button-download" disabled>Download gif</button>\n\n            </div>\n\n            <div class="d-flex flex-column flex-fill p-3 text-center">\n\n                <img src="assets/default.png" class="w-100 m-auto img-fluid" style="max-width: 384px;" id="merged-img">\n\n            </div>\n\n        </div>',this.bathersCollection,this.selectedBather,this.selectedFilter,this.load()}async load(){await this.loadBathers(),this.ui.querySelector("#select-filter").addEventListener("change",this.didSelectFilter.bind(this),!1),this.ui.querySelector("#button-download").addEventListener("click",this.downloadGif.bind(this),!1)}async loadBathers(){this.bathersCollection=this.holdings.bathers;const e=this.ui.querySelector("#bath-club-dropdown");let t=e.querySelector(".dropdown-menu");t&&t.remove(),t=new o.Z(this.bathersCollection.nfts,this.didSelectBather.bind(this)),e.append(t.ui)}didSelectBather(e){const t=e.currentTarget.dataset.index;if(!t)return;const n=this.bathersCollection.nfts[t];this.selectedBather=n,this.ui.querySelector("#club-img").src=n.imageUrl,this.generateGif(),e.preventDefault()}didSelectFilter(e){this.selectedFilter=e.currentTarget.value,this.selectedFilter&&(this.generateGif(),e.preventDefault())}async generateGif(){if(this.selectedFilter&&this.selectedBather){const e=this.ui.querySelector("#button-download");e.disabled=!0,e.textContent="Generating GIF...";const t=this.ui.querySelector("#merged-img");t.src="assets/default.png";const n=this.selectedBather.metadata.properties,i=new s.c;await i.drawLayers(n,l,"./layers_images");const o=await i[`draw_${this.selectedFilter}`]();t.src=URL.createObjectURL(new Blob([o.buffer],{type:"image/gif"})),e.disabled=!1,e.textContent="Download GIF"}}downloadGif(){const e=this.ui.querySelector("#merged-img"),t=document.createElement("a");t.href=e.src,t.download="good-morning.gif",t.click()}}}}]);