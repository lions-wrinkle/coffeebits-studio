"use strict";(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[126],{4126:(e,t,n)=>{n.r(t),n.d(t,{LongBoi:()=>r});var i=n(6998),o=n(6810),s=n(2871),a=n(4714);class r extends i.BasePage{constructor(){super(...arguments),this.ui=document.createElement("div"),this.ui.innerHTML='\n        <h1 id="longbois_title">LongBois</h1>\n        <p class="dark-text">Generate LongBois Bathers</p>\n\n        <div class="d-sm-flex flew-row" style="background-color: var(--background-dark);">\n\n            <div class="d-flex flex-column p-3 text-center justify-content-between">\n\n                <div>\n                    <img src="assets/default.png" class="mb-2 ms-auto me-auto" id="club-img" style="width: 200px; height: auto">\n\n                    <div class="dropdown mb-3" id="bath-club-dropdown">\n                        <button class="dropdown-toggle button-alt" type="button" data-bs-toggle="dropdown"\n                            aria-expanded="false">\n                            Choose Bather\n                        </button>\n\n                    </div>\n                    <input type="range" class="form-range" min="1" max="30" step="1" id="neck_size" value="10"><br>\n                    <input type="checkbox" id="checkbox_gif"> <label for="checkbox_gif">GIF</label> \n                    <input type="checkbox" id="checkbox_gm"> <label for="checkbox_gm">GM</label>\n                    \n\n\n                </div>\n                \n                <button id="button-download" disabled>Download gif</button>\n\n            </div>\n\n            <div class="d-flex flex-column flex-fill p-3 text-center">\n\n                <img src="assets/default.png" class="w-100 m-auto img-fluid" style="max-width: 384px;" id="merged-img">\n\n            </div>\n\n        </div>',this.bathersCollection,this.selectedBather,this.load()}async load(){await this.loadBathers(),this.ui.querySelector("#button-download").addEventListener("click",this.downloadGif.bind(this),!1),this.ui.querySelector("#checkbox_gif").addEventListener("change",this.generateLongBoi.bind(this),!1),this.ui.querySelector("#checkbox_gm").addEventListener("change",this.generateLongBoi.bind(this),!1),this.ui.querySelector("#neck_size").addEventListener("change",this.generateLongBoi.bind(this),!1)}async loadBathers(){this.bathersCollection=this.holdings.bathers;const e=this.ui.querySelector("#bath-club-dropdown");let t=e.querySelector(".dropdown-menu");t&&t.remove(),t=new s.Z(this.bathersCollection.nfts,this.didSelectBather.bind(this)),e.append(t.ui)}didSelectBather(e){const t=e.currentTarget.dataset.index;if(!t)return;const n=this.bathersCollection.nfts[t];this.selectedBather=n,this.ui.querySelector("#club-img").src=n.imageUrl,this.generateLongBoi(),e.preventDefault()}async generateLongBoi(){const e=parseInt(this.ui.querySelector("#neck_size").value);if(this.ui.querySelector("#longbois_title").textContent=`L${"o".repeat(e)}ngbois`,this.selectedBather){const t=this.ui.querySelector("#button-download");t.disabled=!0;const n=this.ui.querySelector("#merged-img");n.src="assets/default.png";const i=this.selectedBather.metadata.properties,s=new o.a(i,a,"./layers_images"),r=this.ui.querySelector("#checkbox_gm").checked;if(this.ui.querySelector("#checkbox_gif").checked){t.textContent="Generating GIF...";const i=await s.drawLongGif(e,r);n.src=URL.createObjectURL(new Blob([i.buffer],{type:"image/gif"})),t.disabled=!1,t.textContent="Download GIF"}else{t.textContent="Generating image...";const i=await s.drawLongPNG(e,r);n.src=i.toDataURL(),t.disabled=!1,t.textContent="Download PNG"}}}downloadGif(){const e=this.ui.querySelector("#merged-img"),t=document.createElement("a");t.href=e.src,t.download="good-morning.gif",t.click()}}}}]);