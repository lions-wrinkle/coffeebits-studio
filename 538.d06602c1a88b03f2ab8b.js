"use strict";(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[538],{6538:(e,t,s)=>{s.r(t),s.d(t,{Grinder:()=>l});var a=s(6998),n=(s(5190),s(7304)),i=s(7644),r=s(4050),d=s(2871),o=s(4714);class l extends a.BasePage{constructor(...e){super(...arguments),this.simulator=e[e.length-1],this.ui=document.createElement("div"),this.ui.innerHTML=`\n    <h1>Grinder ${this.simulator?"Simulator":""}</h1>\n    <p class="dark-text">${this.simulator?'Try any Caffeine Card. Go to the <a href="?grinder" data-page-link="grinder" class="text-decoration-underline">regular Grinder</a> to actually use your cards.<br />Get the Caffeine Card of your dreams on <a href="https://www.nftexplorer.app/collection/caffeine-cards" class="text-decoration-underline" target="_blank">secondary market.</a>':'Use your Caffeine Cards to customize your Bathers.<br />Try any Caffeine Card in the <a href="?grinder-simulator" data-page-link="grinder-simulator" class="text-decoration-underline">simulator</a>.'}</p>\n\n    <div class="d-sm-flex flew-row" style="background-color: var(--background-dark);">\n\n        <div class="d-flex flex-column p-3 text-center">\n\n            <img src="assets/default.png" class="mb-2 ms-auto me-auto" id="club-img" style="width: 200px; height: auto">\n\n            <div class="dropdown" id="bath-club-dropdown">\n                <button class="dropdown-toggle button-alt" type="button" data-bs-toggle="dropdown"\n                    aria-expanded="false">\n                    Choose Bather\n                </button>\n            </div>\n            <div class="mb-2 mt-4 ms-auto me-auto justify-content-center row row-cols-2" id="cards" style="width: 200px;">\n              <div class="col text-center" id="default-card" style="width: 200px;">\n                <img src="assets/default-card.png" class="img-fluid" style="width: 200px; height: auto;">\n              </div>\n            </div>\n            <div class="dropdown mb-3" id="cards-dropdown">\n                <button class="dropdown-toggle button-alt mb-2" type="button" data-bs-toggle="dropdown"\n                    aria-expanded="false" id="choose-card-button" disabled>\n                    Add Card\n                </button>\n            </div>\n            ${this.simulator?"":'<button id="button-review" disabled>Review...</button>'}\n\n        </div>\n\n        <div class="d-flex flex-column flex-fill p-3 text-center">\n            <small class="dark-text">preview</small>\n            <img src="assets/default.png" class="w-100 m-auto img-fluid" style="max-width: 480px;" id="merged-img">\n\n        </div>\n\n    </div>`,this.bathersCollection,this.cardsCollection,this.selectedBather,this.selectedCards=[],this.mergedProperties={},this.mergedImgDataURL,this.chooseCardButton=this.ui.querySelector("#choose-card-button"),this.load()}async load(){await this.loadBathers(),this.ui.querySelector("#button-review")?.addEventListener("click",this.review.bind(this));const e=window.location.search,t=new URLSearchParams(e);if(t.has("bather")){const e=parseInt(t.get("bather")),s=this.bathersCollection.nfts.filter((t=>t.assetId===e))?.[0];s&&await this.displayBather(s)}}async loadBathers(){this.bathersCollection=this.holdings.bathers;const e=this.ui.querySelector("#bath-club-dropdown");let t=e.querySelector(".dropdown-menu");t&&t.remove(),t=new d.Z(this.bathersCollection.nfts.filter((e=>e.metadata)),this.didSelectBather.bind(this)),e.append(t.ui)}async didSelectBather(e){e.preventDefault(),this.clearCard();const t=e.currentTarget.dataset.index;if(!t)return;const s=this.bathersCollection.nfts[t];this.mergedProperties=s.metadata.properties,await this.displayBather(s)}async displayBather(e){this.selectedBather=e,this.ui.querySelector("#club-img").src=e.imageUrl,this.validate(),await this.loadCards(),this.chooseCardButton.disabled=!1}clearCard(){this.selectedCards=[],this.chooseCardButton.disabled=!0,this.mergedProperties={},this.ui.querySelector("#default-card").hidden=!1;const e=Array.from(this.ui.querySelector("#cards").children);for(const t of e)"default-card"!==t.id&&t.remove()}async loadCards(){this.simulator?this.cardsCollection||(this.cardsCollection=await this.loadAllCards()):this.cardsCollection=this.holdings.caffeineCards;const e=this.ui.querySelector("#cards-dropdown");let t=e.querySelector("#cards-dropdown-nft");t&&t.remove();let s=[];e:for(const e of this.cardsCollection.nfts)if(e.metadata?.require){for(const t in e.metadata.require)if(this.mergedProperties[t]!=e.metadata.require[t]){s.push(e.assetId);continue e}for(const t of this.selectedCards)if(t.metadata?.properties){for(const a in t.metadata.properties)if(e.metadata.properties[a]){s.push(e.assetId);continue e}}else console.error(new Error(`Error loading properties for card card ${t?.name}`))}else console.error(new Error(`Error loading requirements for card ${e?.name}`));t=new d.Z(this.cardsCollection.nfts.filter((e=>e.metadata)),this.didSelectCard.bind(this),"cards-dropdown-nft",s),e.append(t.ui),new window.bootstrap.Dropdown(this.chooseCardButton)}sleep(e){return new Promise((t=>setTimeout(t,e)))}async loadAllCards(){return new Promise((async(e,t)=>{this.chooseCardButton.textContent="Loading...";const{default:a}=await Promise.resolve().then(s.bind(s,5190)),i=a.filter((e=>"caffeineCards"===e.name))[0],r=new n.tf([i]);await r.load(this.algoIndexer);let d=0;for(const s of r.nfts)this.sleep(5),s.load(this.algoIndexer).then((()=>{this.chooseCardButton.textContent=`Loading ${d+1}/${r.nfts.length}...`,d++,d===r.nfts.length&&(this.chooseCardButton.textContent="Add Card",e(r))})).catch((e=>t(e)))}))}async didSelectCard(e){e.preventDefault();const t=e.currentTarget.dataset.index;if(!t)return;const s=this.cardsCollection.nfts[t];this.selectedCards.push(s);const a=this.ui.querySelector("#default-card");a&&(a.hidden=!0);const n=document.createElement("div");n.className="col text-center",n.id=`card-${t}`,n.innerHTML=`\n    <img style="width: 80px; height: auto" src="${s.imageUrl}">\n    <p><a href="javascript:void(0);" id="rm-${t}" data-index="${t}">Remove</a></p>\n    `,n.querySelector(`#rm-${t}`).addEventListener("click",this.removeCard.bind(this),!1),this.ui.querySelector("#cards").append(n),this.validate(),await this.loadCards()}async removeCard(e){e.preventDefault();const t=e.currentTarget.dataset.index;if(!t)return;const s=this.cardsCollection.nfts[t];if(console.log(this.selectedCards.map((e=>e.name))),this.selectedCards=this.selectedCards.filter((e=>e.assetId!=s.assetId)),console.log(this.selectedCards.map((e=>e.name))),0===this.selectedCards.length){const e=this.ui.querySelector("#default-card");e&&(e.hidden=!1)}this.validate(),await this.loadCards(),this.ui.querySelector(`#card-${t}`).remove()}validate(){let e;this.simulator||(e=this.ui.querySelector("#button-review")),this.selectedBather&&this.selectedCards.length>0?(this.simulator||(e.disabled=!1),this.preview()):this.selectedBather?(this.ui.querySelector("#merged-img").src=this.selectedBather.imageUrl,this.simulator||(e.disabled=!0)):this.simulator||(e.disabled=!0)}review(e){const t=document.createElement("div");t.className="modal",t.tabIndex="-1";let s,a=[];for(const e of this.selectedCards)for(const t in e.metadata.properties)o.duplicateCriteria.includes(t)&&a.push(t);a.length>0&&(s=`&#9888;&#65039; This request contains a modification that can generate a duplicate (${a.join(",")}). If it's the case, the request will be canceled and the cards returned to your wallet.<br>`),t.innerHTML=`\n    <div class="modal-dialog modal-dialog-centered">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h5 class="modal-title">Review Bather modification</h5>\n          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n            <div class="text-center mb-3">\n                <img style="width: 320px; height: auto;" id="preview-merged-img">\n            </div>\n\n          <p>\n          Your <strong>${this.selectedBather.name}</strong> will be updated.<br>\n          Your <strong>${this.selectedCards.map((e=>e.name)).join(", ")}</strong> will be burned &#128293;\n          </p>\n\n          <p>You'll get <strong>${11*this.selectedCards.length} $Roar</strong></p>\n            \n          <p>${s||""}&#128337; As the process requires a manual step, update can take up to 24h.<br>\n          &#128236; You will be notified by a zero Algo transaction when the update is complete.</p>\n        </div>\n        <div class="modal-footer">\n          <button type="button" class="button-alt" data-bs-dismiss="modal">Close</button>\n          <button type="button" id="send-button">Send request</button>\n        </div>\n      </div>\n    </div>\n    `,t.querySelector("#preview-merged-img").src=this.mergedImgDataURL;const n=t.querySelector("#send-button");n.currentModal=t,n.addEventListener("click",this.send.bind(this),!1),new window.bootstrap.Modal(t,{}).show()}async preview(){let e;this.simulator||(e=this.ui.querySelector("#button-review"),e.disabled=!0,e.textContent="Generating...");const t=this.ui.querySelector("#merged-img");this.mergedProperties=Object.assign({},this.selectedBather.metadata.properties);for(const e of this.selectedCards)for(const t in e.metadata.properties)this.mergedProperties[t]=e.metadata.properties[t];let s=await(0,i.i)(this.mergedProperties,o,"layers_images");this.simulator&&(s=await this.applyWipOverlay(s)),this.mergedImgDataURL=s.toDataURL("image/png"),t.src=this.mergedImgDataURL,this.simulator||(e.disabled=!1,e.textContent="Review...")}applyWipOverlay(e){return new Promise(((t,s)=>{let a=document.createElement("canvas");a.width=52,a.height=52;var n=a.getContext("2d");let i=new Image;i.onload=()=>{n.drawImage(e,2,2),n.drawImage(i,0,0),t(a)},i.onerror=e=>{s(e)},i.src="assets/wip.png"}))}async send(e){const t=e.currentTarget;t.disabled=!0,t.textContent="Waiting for signature...";const s=await this.algodClient.getTransactionParams().do(),a={evolve:this.selectedBather.assetId},n=(new TextEncoder).encode(JSON.stringify(a));if(this.selectedCards.length>13)return void alert("No more than 14 cards can be used at once.");let i=[];for(const e of this.selectedCards)i.push(r.makeAssetTransferTxnWithSuggestedParamsFromObject({from:this.walletConnect.walletAddress,to:this.cardsCollection.collections[0].addresses[0],amount:1,assetIndex:e.assetId,suggestedParams:s,note:n}));i.length>1&&r.assignGroupID(i);const d=await this.walletConnect.signTransactions(i),o=t.currentModal;let l;o.innerHTML='\n    <div class="modal-dialog modal-dialog-centered">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body ">\n            <div class="text-center mb-3">\n                <img src="assets/grinder.png" style="width: 128px; height: auto;">\n            </div>\n            <div class="text-center mb-3">\n            Sending Caffeine Card to the Grinder...\n            </div>\n        </div>\n      </div>\n    </div>\n    ';try{l=await this.algodClient.sendRawTransaction(d).do(),await r.waitForConfirmation(this.algodClient,l.txId,4),o.innerHTML='\n    <div class="modal-dialog modal-dialog-centered">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n          <div class="text-center mb-3">\n          <img src="assets/heart-cup.png" width="60"><br><br>\n          We got your card and your evolution request.<br>\n          We\'ll be back to you very soon.\n          </div>\n        </div>\n        <div class="modal-footer">\n          <button type="button" data-bs-dismiss="modal">Close</button>\n        </div>\n      </div>\n    </div>\n    ',o.addEventListener("hidden.bs.modal",(e=>{location.reload()}))}catch(e){o.innerHTML=`\n    <div class="modal-dialog modal-dialog-centered">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n          <div class="text-center mb-3">\n          <div class="alert alert-danger" role="alert">${e.message} </div>\n          </div>\n        </div>\n        <div class="modal-footer">\n          <button type="button" data-bs-dismiss="modal">Close</button>\n        </div>\n      </div>\n    </div>\n    `,console.error(e)}}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtxSSxZQUFZcUIsbUJBQW1CSCxHQUFZaEIsV0FHbEMsc0JBQ3ZCdkksS0FBS3FJLFlBQ0xvQixFQUFHRSxLQUNILEdBR0Y1QyxFQUFhekcsVUFBWSx5cUJBb0J6QnlHLEVBQWE3RixpQkFBaUIsbUJBQW9CMEIsSUFFaERyQixTQUFTcUksUUFBUSxHQXNCckIsQ0FwQkUsTUFBT0MsR0FDUDlDLEVBQWF6RyxVQUFZLDZYQVEwQnVKLEVBQUlDLCtNQVV2RHZGLFFBQVFDLE1BQU1xRixFQUNoQixDQUNGLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkaW8vLi9zcmMvcGFnZXMvZ3JpbmRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlUGFnZSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCBjb2xsZWN0aW9uIGZyb20gXCIuLi9jb2xsZWN0aW9ucy5qc1wiO1xuaW1wb3J0IHsgTkZUQ29sbGVjdGlvbiB9IGZyb20gXCJhbGdvLW5mdC11dGlsc1wiO1xuaW1wb3J0IHsgZHJhdyB9IGZyb20gXCJiYXRoLWNsdWJcIjtcbmltcG9ydCBhbGdvc2RrIGZyb20gXCJhbGdvc2RrXCI7XG5pbXBvcnQgRHJvcGRvd25OZnRzIGZyb20gXCIuLi9jb21tb24vZHJvcGRvd24tbmZ0cy5qc1wiO1xuXG5pbXBvcnQgbGF5ZXJzIGZyb20gXCIuLi8uLi8uLi9iYXRoLWNsdWIvbGF5ZXJzLmpzb25cIjtcblxuZXhwb3J0IGNsYXNzIEdyaW5kZXIgZXh0ZW5kcyBCYXNlUGFnZSB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuXG4gICAgdGhpcy5zaW11bGF0b3IgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG5cbiAgICB0aGlzLnVpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aGlzLnVpLmlubmVySFRNTCA9IGBcbiAgICA8aDE+R3JpbmRlciAke3RoaXMuc2ltdWxhdG9yID8gXCJTaW11bGF0b3JcIiA6IFwiXCJ9PC9oMT5cbiAgICA8cCBjbGFzcz1cImRhcmstdGV4dFwiPiR7XG4gICAgICB0aGlzLnNpbXVsYXRvclxuICAgICAgICA/ICdUcnkgYW55IENhZmZlaW5lIENhcmQuIEdvIHRvIHRoZSA8YSBocmVmPVwiP2dyaW5kZXJcIiBkYXRhLXBhZ2UtbGluaz1cImdyaW5kZXJcIiBjbGFzcz1cInRleHQtZGVjb3JhdGlvbi11bmRlcmxpbmVcIj5yZWd1bGFyIEdyaW5kZXI8L2E+IHRvIGFjdHVhbGx5IHVzZSB5b3VyIGNhcmRzLjxiciAvPkdldCB0aGUgQ2FmZmVpbmUgQ2FyZCBvZiB5b3VyIGRyZWFtcyBvbiA8YSBocmVmPVwiaHR0cHM6Ly93d3cubmZ0ZXhwbG9yZXIuYXBwL2NvbGxlY3Rpb24vY2FmZmVpbmUtY2FyZHNcIiBjbGFzcz1cInRleHQtZGVjb3JhdGlvbi11bmRlcmxpbmVcIiB0YXJnZXQ9XCJfYmxhbmtcIj5zZWNvbmRhcnkgbWFya2V0LjwvYT4nXG4gICAgICAgIDogJ1VzZSB5b3VyIENhZmZlaW5lIENhcmRzIHRvIGN1c3RvbWl6ZSB5b3VyIEJhdGhlcnMuPGJyIC8+VHJ5IGFueSBDYWZmZWluZSBDYXJkIGluIHRoZSA8YSBocmVmPVwiP2dyaW5kZXItc2ltdWxhdG9yXCIgZGF0YS1wYWdlLWxpbms9XCJncmluZGVyLXNpbXVsYXRvclwiIGNsYXNzPVwidGV4dC1kZWNvcmF0aW9uLXVuZGVybGluZVwiPnNpbXVsYXRvcjwvYT4uJ1xuICAgIH08L3A+XG5cbiAgICA8ZGl2IGNsYXNzPVwiZC1zbS1mbGV4IGZsZXctcm93XCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLWRhcmspO1wiPlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXggZmxleC1jb2x1bW4gcC0zIHRleHQtY2VudGVyXCI+XG5cbiAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2RlZmF1bHQucG5nXCIgY2xhc3M9XCJtYi0yIG1zLWF1dG8gbWUtYXV0b1wiIGlkPVwiY2x1Yi1pbWdcIiBzdHlsZT1cIndpZHRoOiAyMDBweDsgaGVpZ2h0OiBhdXRvXCI+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcm9wZG93blwiIGlkPVwiYmF0aC1jbHViLWRyb3Bkb3duXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZSBidXR0b24tYWx0XCIgdHlwZT1cImJ1dHRvblwiIGRhdGEtYnMtdG9nZ2xlPVwiZHJvcGRvd25cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWV4cGFuZGVkPVwiZmFsc2VcIj5cbiAgICAgICAgICAgICAgICAgICAgQ2hvb3NlIEJhdGhlclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWItMiBtdC00IG1zLWF1dG8gbWUtYXV0byBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIHJvdyByb3ctY29scy0yXCIgaWQ9XCJjYXJkc1wiIHN0eWxlPVwid2lkdGg6IDIwMHB4O1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sIHRleHQtY2VudGVyXCIgaWQ9XCJkZWZhdWx0LWNhcmRcIiBzdHlsZT1cIndpZHRoOiAyMDBweDtcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9kZWZhdWx0LWNhcmQucG5nXCIgY2xhc3M9XCJpbWctZmx1aWRcIiBzdHlsZT1cIndpZHRoOiAyMDBweDsgaGVpZ2h0OiBhdXRvO1wiPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyb3Bkb3duIG1iLTNcIiBpZD1cImNhcmRzLWRyb3Bkb3duXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZSBidXR0b24tYWx0IG1iLTJcIiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1icy10b2dnbGU9XCJkcm9wZG93blwiXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiIGlkPVwiY2hvb3NlLWNhcmQtYnV0dG9uXCIgZGlzYWJsZWQ+XG4gICAgICAgICAgICAgICAgICAgIEFkZCBDYXJkXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgIHRoaXMuc2ltdWxhdG9yXG4gICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgOiAnPGJ1dHRvbiBpZD1cImJ1dHRvbi1yZXZpZXdcIiBkaXNhYmxlZD5SZXZpZXcuLi48L2J1dHRvbj4nXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBmbGV4LWNvbHVtbiBmbGV4LWZpbGwgcC0zIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICA8c21hbGwgY2xhc3M9XCJkYXJrLXRleHRcIj5wcmV2aWV3PC9zbWFsbD5cbiAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2RlZmF1bHQucG5nXCIgY2xhc3M9XCJ3LTEwMCBtLWF1dG8gaW1nLWZsdWlkXCIgc3R5bGU9XCJtYXgtd2lkdGg6IDQ4MHB4O1wiIGlkPVwibWVyZ2VkLWltZ1wiPlxuXG4gICAgICAgIDwvZGl2PlxuXG4gICAgPC9kaXY+YDtcblxuICAgIHRoaXMuYmF0aGVyc0NvbGxlY3Rpb247XG4gICAgdGhpcy5jYXJkc0NvbGxlY3Rpb247XG5cbiAgICB0aGlzLnNlbGVjdGVkQmF0aGVyO1xuICAgIHRoaXMuc2VsZWN0ZWRDYXJkcyA9IFtdO1xuICAgIHRoaXMubWVyZ2VkUHJvcGVydGllcyA9IHt9O1xuXG4gICAgdGhpcy5tZXJnZWRJbWdEYXRhVVJMO1xuXG4gICAgdGhpcy5jaG9vc2VDYXJkQnV0dG9uID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2Nob29zZS1jYXJkLWJ1dHRvblwiKTtcblxuICAgIHRoaXMubG9hZCgpO1xuICB9XG5cbiAgYXN5bmMgbG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRCYXRoZXJzKCk7XG5cbiAgICBjb25zdCByZXZpZXdCdXR0b24gPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjYnV0dG9uLXJldmlld1wiKTtcbiAgICByZXZpZXdCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnJldmlldy5iaW5kKHRoaXMpKTtcblxuICAgIC8vY29uc3Qgc2VuZEJ1dHRvbiA9IHRoaXMudWkucXVlcnlTZWxlY3RvcihcIiNzZW5kLWJ0blwiKTtcbiAgICAvL3NlbmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuc2VuZC5iaW5kKHRoaXMpKTtcblxuICAgIC8vY2hlY2sgaWYgYSBiYXRoZXIgd2FzIHJlcXVlc3RlZFxuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5U3RyaW5nKTtcblxuICAgIGlmICh1cmxQYXJhbXMuaGFzKFwiYmF0aGVyXCIpKSB7XG4gICAgICBjb25zdCBiYXRoZXJBc3NldElkID0gcGFyc2VJbnQodXJsUGFyYW1zLmdldChcImJhdGhlclwiKSk7XG5cbiAgICAgIC8vZmluZCBiYXRoZXJcbiAgICAgIGNvbnN0IG5mdCA9IHRoaXMuYmF0aGVyc0NvbGxlY3Rpb24ubmZ0cy5maWx0ZXIoXG4gICAgICAgIChuZnQpID0+IG5mdC5hc3NldElkID09PSBiYXRoZXJBc3NldElkXG4gICAgICApPy5bMF07XG5cbiAgICAgIGlmIChuZnQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kaXNwbGF5QmF0aGVyKG5mdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZEJhdGhlcnMoKSB7XG4gICAgdGhpcy5iYXRoZXJzQ29sbGVjdGlvbiA9IHRoaXMuaG9sZGluZ3NbXCJiYXRoZXJzXCJdO1xuXG4gICAgY29uc3QgZHJvcGRvd25EaXYgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjYmF0aC1jbHViLWRyb3Bkb3duXCIpO1xuXG4gICAgbGV0IGRyb3Bkb3duID0gZHJvcGRvd25EaXYucXVlcnlTZWxlY3RvcihcIi5kcm9wZG93bi1tZW51XCIpO1xuICAgIGlmIChkcm9wZG93bikge1xuICAgICAgZHJvcGRvd24ucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgZHJvcGRvd24gPSBuZXcgRHJvcGRvd25OZnRzKFxuICAgICAgdGhpcy5iYXRoZXJzQ29sbGVjdGlvbi5uZnRzLmZpbHRlcihuID0+IG4ubWV0YWRhdGEpLFxuICAgICAgdGhpcy5kaWRTZWxlY3RCYXRoZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgZHJvcGRvd25EaXYuYXBwZW5kKGRyb3Bkb3duLnVpKTtcblxuICAgIC8qXG4gICAgY29uc3QgYmF0aGVyc0Ryb3Bkb3duTGlzdCA9IHRoaXMudWkucXVlcnlTZWxlY3RvcihcIiNiYXRoLWNsdWItZHJvcGRvd24tbGlzdFwiKTtcbiAgICBiYXRoZXJzRHJvcGRvd25MaXN0LnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgIC8vYWRkIGRlZmF1bHQgdmFsdWVcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgYmF0aGVyc0Ryb3Bkb3duTGlzdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuXG4gICAgaWYgKHRoaXMuYmF0aGVyc0NvbGxlY3Rpb24ubmZ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIG9wdGlvbi5pbm5lckhUTUwgPSAnPGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtIGRpc2FibGVkXCI+Tm8gYmF0aGVyczwvYT4nO1xuICAgIH1cblxuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IG5mdCBvZiB0aGlzLmJhdGhlcnNDb2xsZWN0aW9uLm5mdHMpIHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcblxuICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgYS5jbGFzc05hbWUgPSAnZHJvcGRvd24taXRlbSc7XG4gICAgICBhLmhyZWYgPSAnIyc7XG4gICAgICBhLmRhdGFzZXQuaW5kZXggPSBpO1xuXG4gICAgICBhLmlubmVySFRNTCA9IGA8aW1nIHNyYz1cIiR7bmZ0LmltYWdlVXJsfVwiPiAke25mdC5uYW1lfWA7XG5cbiAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmRpZFNlbGVjdEJhdGhlci5iaW5kKHRoaXMpLCBmYWxzZSk7XG5cbiAgICAgIG9wdGlvbi5hcHBlbmQoYSk7XG4gICAgICBiYXRoZXJzRHJvcGRvd25MaXN0LmFwcGVuZChvcHRpb24pO1xuXG4gICAgICBpKys7XG4gICAgfVxuICAgICovXG4gIH1cblxuICBhc3luYyBkaWRTZWxlY3RCYXRoZXIoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdGhpcy5jbGVhckNhcmQoKTtcblxuICAgIGNvbnN0IG5mdEluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZGV4O1xuXG4gICAgaWYgKCFuZnRJbmRleCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5mdCA9IHRoaXMuYmF0aGVyc0NvbGxlY3Rpb24ubmZ0c1tuZnRJbmRleF07XG5cbiAgICB0aGlzLm1lcmdlZFByb3BlcnRpZXMgPSBuZnQubWV0YWRhdGEucHJvcGVydGllcztcblxuICAgIGF3YWl0IHRoaXMuZGlzcGxheUJhdGhlcihuZnQpO1xuICB9XG5cbiAgYXN5bmMgZGlzcGxheUJhdGhlcihuZnQpIHtcbiAgICB0aGlzLnNlbGVjdGVkQmF0aGVyID0gbmZ0O1xuXG4gICAgLy9kaXNwbGF5IGltYWdlXG4gICAgY29uc3QgYmF0aGVySW1nID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2NsdWItaW1nXCIpO1xuICAgIGJhdGhlckltZy5zcmMgPSBuZnQuaW1hZ2VVcmw7XG5cbiAgICB0aGlzLnZhbGlkYXRlKCk7XG5cbiAgICBhd2FpdCB0aGlzLmxvYWRDYXJkcygpO1xuICAgIHRoaXMuY2hvb3NlQ2FyZEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgY2xlYXJDYXJkKCkge1xuICAgIHRoaXMuc2VsZWN0ZWRDYXJkcyA9IFtdO1xuICAgIHRoaXMuY2hvb3NlQ2FyZEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5tZXJnZWRQcm9wZXJ0aWVzID0ge307XG5cbiAgICBjb25zdCBkZWZhdWx0Q2FyZCA9IHRoaXMudWkucXVlcnlTZWxlY3RvcihcIiNkZWZhdWx0LWNhcmRcIik7XG4gICAgZGVmYXVsdENhcmQuaGlkZGVuID0gZmFsc2U7XG5cbiAgICAvL3JlbW92ZSBhbGwgZGlzcGxheWVkIGNhcmRzXG5cbiAgICBjb25zdCBjaGlsZHJlbiA9IEFycmF5LmZyb20odGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2NhcmRzXCIpLmNoaWxkcmVuKTtcblxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBjaGlsZHJlbikge1xuICAgICAgaWYgKGVsZW1lbnQuaWQgIT09IFwiZGVmYXVsdC1jYXJkXCIpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2FkQ2FyZHMoKSB7XG4gICAgaWYgKCF0aGlzLnNpbXVsYXRvcikge1xuICAgICAgdGhpcy5jYXJkc0NvbGxlY3Rpb24gPSB0aGlzLmhvbGRpbmdzW1wiY2FmZmVpbmVDYXJkc1wiXTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmNhcmRzQ29sbGVjdGlvbikge1xuICAgICAgdGhpcy5jYXJkc0NvbGxlY3Rpb24gPSBhd2FpdCB0aGlzLmxvYWRBbGxDYXJkcygpO1xuICAgIH1cblxuICAgIGNvbnN0IGRyb3Bkb3duRGl2ID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2NhcmRzLWRyb3Bkb3duXCIpO1xuXG4gICAgbGV0IGRyb3Bkb3duID0gZHJvcGRvd25EaXYucXVlcnlTZWxlY3RvcihcIiNjYXJkcy1kcm9wZG93bi1uZnRcIik7XG4gICAgaWYgKGRyb3Bkb3duKSB7XG4gICAgICBkcm9wZG93bi5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBsZXQgZGlzYWJsZWRBc3NldElkcyA9IFtdO1xuICAgIGxldCBpID0gMDtcbiAgICBtYWlubG9vcDogZm9yIChjb25zdCBuZnQgb2YgdGhpcy5jYXJkc0NvbGxlY3Rpb24ubmZ0cykge1xuICAgICAgLy9jaGVjayByZXF1aXJlbWVudFxuICAgICAgaWYgKG5mdC5tZXRhZGF0YT8ucmVxdWlyZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHJlcXVpcmVLZXkgaW4gbmZ0Lm1ldGFkYXRhLnJlcXVpcmUpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLm1lcmdlZFByb3BlcnRpZXNbcmVxdWlyZUtleV0gIT1cbiAgICAgICAgICAgIG5mdC5tZXRhZGF0YS5yZXF1aXJlW3JlcXVpcmVLZXldXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBkaXNhYmxlZEFzc2V0SWRzLnB1c2gobmZ0LmFzc2V0SWQpO1xuICAgICAgICAgICAgY29udGludWUgbWFpbmxvb3A7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKG5ldyBFcnJvcihgRXJyb3IgbG9hZGluZyByZXF1aXJlbWVudHMgZm9yIGNhcmQgJHtuZnQ/Lm5hbWV9YCkpXG4gICAgICAgIGNvbnRpbnVlIG1haW5sb29wO1xuICAgICAgfVxuXG4gICAgICAvL3JlbW92ZSBjYXJkcyBmcm9tIHRoZSBzYW1lIHR5cGVcbiAgICAgIGZvciAoY29uc3Qgc2VsZWN0ZWRDYXJkIG9mIHRoaXMuc2VsZWN0ZWRDYXJkcykge1xuICAgICAgICBpZiAoc2VsZWN0ZWRDYXJkLm1ldGFkYXRhPy5wcm9wZXJ0aWVzKXtcbiAgICAgICAgICBmb3IgKGNvbnN0IHByb3BlcnR5IGluIHNlbGVjdGVkQ2FyZC5tZXRhZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAobmZ0Lm1ldGFkYXRhLnByb3BlcnRpZXNbcHJvcGVydHldKSB7XG4gICAgICAgICAgICAgIGRpc2FibGVkQXNzZXRJZHMucHVzaChuZnQuYXNzZXRJZCk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlIG1haW5sb29wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKG5ldyBFcnJvcihgRXJyb3IgbG9hZGluZyBwcm9wZXJ0aWVzIGZvciBjYXJkIGNhcmQgJHtzZWxlY3RlZENhcmQ/Lm5hbWV9YCkpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICB9XG4gICAgfVxuXG4gICAgZHJvcGRvd24gPSBuZXcgRHJvcGRvd25OZnRzKFxuICAgICAgdGhpcy5jYXJkc0NvbGxlY3Rpb24ubmZ0cy5maWx0ZXIobiA9PiBuLm1ldGFkYXRhKSxcbiAgICAgIHRoaXMuZGlkU2VsZWN0Q2FyZC5iaW5kKHRoaXMpLFxuICAgICAgXCJjYXJkcy1kcm9wZG93bi1uZnRcIixcbiAgICAgIGRpc2FibGVkQXNzZXRJZHNcbiAgICApO1xuICAgIGRyb3Bkb3duRGl2LmFwcGVuZChkcm9wZG93bi51aSk7XG5cbiAgICBuZXcgd2luZG93LmJvb3RzdHJhcC5Ecm9wZG93bih0aGlzLmNob29zZUNhcmRCdXR0b24pO1xuICB9XG5cbiAgc2xlZXAoZGVsYXlUaW1lKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5VGltZSkpO1xuICB9XG5cbiAgYXN5bmMgbG9hZEFsbENhcmRzKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLmNob29zZUNhcmRCdXR0b24udGV4dENvbnRlbnQgPSBcIkxvYWRpbmcuLi5cIjtcblxuICAgICAgY29uc3QgeyBkZWZhdWx0OiBjb2xsZWN0aW9ucyB9ID0gYXdhaXQgaW1wb3J0KFwiLi4vY29sbGVjdGlvbnMuanNcIik7XG5cbiAgICAgIGNvbnN0IGNhcmRDb2xsZWN0aW9uID0gY29sbGVjdGlvbnMuZmlsdGVyKFxuICAgICAgICAoYykgPT4gYy5uYW1lID09PSBcImNhZmZlaW5lQ2FyZHNcIlxuICAgICAgKVswXTtcblxuICAgICAgY29uc3QgbmZ0Q29sbGVjdGlvbiA9IG5ldyBORlRDb2xsZWN0aW9uKFtjYXJkQ29sbGVjdGlvbl0pO1xuXG4gICAgICBhd2FpdCBuZnRDb2xsZWN0aW9uLmxvYWQodGhpcy5hbGdvSW5kZXhlcik7XG5cbiAgICAgIGxldCBpID0gMDtcblxuICAgICAgZm9yIChjb25zdCBuZnQgb2YgbmZ0Q29sbGVjdGlvbi5uZnRzKSB7XG5cbiAgICAgICAgdGhpcy5zbGVlcCg1KTtcblxuICAgICAgICBuZnRcbiAgICAgICAgICAubG9hZCh0aGlzLmFsZ29JbmRleGVyKVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hvb3NlQ2FyZEJ1dHRvbi50ZXh0Q29udGVudCA9IGBMb2FkaW5nICR7aSArIDF9LyR7XG4gICAgICAgICAgICAgIG5mdENvbGxlY3Rpb24ubmZ0cy5sZW5ndGhcbiAgICAgICAgICAgIH0uLi5gO1xuXG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgICBpZiAoaSA9PT0gbmZ0Q29sbGVjdGlvbi5uZnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICB0aGlzLmNob29zZUNhcmRCdXR0b24udGV4dENvbnRlbnQgPSBcIkFkZCBDYXJkXCI7XG4gICAgICAgICAgICAgIHJlc29sdmUobmZ0Q29sbGVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGUpID0+IHJlamVjdChlKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkaWRTZWxlY3RDYXJkKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IG5mdEluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZGV4O1xuXG4gICAgaWYgKCFuZnRJbmRleCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5mdCA9IHRoaXMuY2FyZHNDb2xsZWN0aW9uLm5mdHNbbmZ0SW5kZXhdO1xuICAgIHRoaXMuc2VsZWN0ZWRDYXJkcy5wdXNoKG5mdCk7XG5cbiAgICAvL3JlbW92ZSBkZWZhdWx0IGNhcmQgaWYgbmVlZGVkXG4gICAgY29uc3QgZGVmYXVsdENhcmQgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjZGVmYXVsdC1jYXJkXCIpO1xuXG4gICAgaWYgKGRlZmF1bHRDYXJkKSB7XG4gICAgICBkZWZhdWx0Q2FyZC5oaWRkZW4gPSB0cnVlO1xuICAgIH1cblxuICAgIC8vYWRkIGNhcmRcbiAgICBjb25zdCBuZXdDYXJkRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBuZXdDYXJkRGl2LmNsYXNzTmFtZSA9IFwiY29sIHRleHQtY2VudGVyXCI7XG4gICAgbmV3Q2FyZERpdi5pZCA9IGBjYXJkLSR7bmZ0SW5kZXh9YDtcblxuICAgIG5ld0NhcmREaXYuaW5uZXJIVE1MID0gYFxuICAgIDxpbWcgc3R5bGU9XCJ3aWR0aDogODBweDsgaGVpZ2h0OiBhdXRvXCIgc3JjPVwiJHtuZnQuaW1hZ2VVcmx9XCI+XG4gICAgPHA+PGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBpZD1cInJtLSR7bmZ0SW5kZXh9XCIgZGF0YS1pbmRleD1cIiR7bmZ0SW5kZXh9XCI+UmVtb3ZlPC9hPjwvcD5cbiAgICBgO1xuXG4gICAgbmV3Q2FyZERpdlxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoYCNybS0ke25mdEluZGV4fWApXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMucmVtb3ZlQ2FyZC5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gICAgdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2NhcmRzXCIpLmFwcGVuZChuZXdDYXJkRGl2KTtcblxuICAgIC8vZGlzcGxheSBpbWFnZVxuICAgIC8vY29uc3QgY2FyZEltZyA9IHRoaXMudWkucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltZ1wiKTtcbiAgICAvL2NhcmRJbWcuc3JjID0gbmZ0LmltYWdlVXJsO1xuXG4gICAgdGhpcy52YWxpZGF0ZSgpO1xuXG4gICAgLy9yZWxvYWQgY2FyZHNcbiAgICBhd2FpdCB0aGlzLmxvYWRDYXJkcygpO1xuICB9XG5cbiAgYXN5bmMgcmVtb3ZlQ2FyZChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCBuZnRJbmRleCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmRleDtcblxuICAgIGlmICghbmZ0SW5kZXgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBuZnQgPSB0aGlzLmNhcmRzQ29sbGVjdGlvbi5uZnRzW25mdEluZGV4XTtcblxuICAgIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRDYXJkcy5tYXAoKGMpID0+IGMubmFtZSkpO1xuICAgIHRoaXMuc2VsZWN0ZWRDYXJkcyA9IHRoaXMuc2VsZWN0ZWRDYXJkcy5maWx0ZXIoXG4gICAgICAoYykgPT4gYy5hc3NldElkICE9IG5mdC5hc3NldElkXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkQ2FyZHMubWFwKChjKSA9PiBjLm5hbWUpKTtcblxuICAgIC8vZGlzcGxheSBkZWZhdWx0IGNhcmQgYWdhaW4gaWYgbmVlZGVkXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRDYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRDYXJkID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2RlZmF1bHQtY2FyZFwiKTtcblxuICAgICAgaWYgKGRlZmF1bHRDYXJkKSB7XG4gICAgICAgIGRlZmF1bHRDYXJkLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGUoKTtcblxuICAgIC8vcmVsb2FkIGNhcmRzXG4gICAgYXdhaXQgdGhpcy5sb2FkQ2FyZHMoKTtcblxuICAgIHRoaXMudWkucXVlcnlTZWxlY3RvcihgI2NhcmQtJHtuZnRJbmRleH1gKS5yZW1vdmUoKTtcbiAgfVxuXG4gIHZhbGlkYXRlKCkge1xuICAgIGxldCByZXZpZXdCdXR0b247XG4gICAgaWYgKCF0aGlzLnNpbXVsYXRvcikge1xuICAgICAgcmV2aWV3QnV0dG9uID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2J1dHRvbi1yZXZpZXdcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRCYXRoZXIgJiYgdGhpcy5zZWxlY3RlZENhcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmICghdGhpcy5zaW11bGF0b3IpIHtcbiAgICAgICAgcmV2aWV3QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucHJldmlldygpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZEJhdGhlcikge1xuICAgICAgY29uc3QgbWVyZ2VkSW1nID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI21lcmdlZC1pbWdcIik7XG4gICAgICBtZXJnZWRJbWcuc3JjID0gdGhpcy5zZWxlY3RlZEJhdGhlci5pbWFnZVVybDtcblxuICAgICAgaWYgKCF0aGlzLnNpbXVsYXRvcikge1xuICAgICAgICByZXZpZXdCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXRoaXMuc2ltdWxhdG9yKSB7XG4gICAgICAgIHJldmlld0J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV2aWV3KGV2ZW50KSB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1vZGFsLmNsYXNzTmFtZSA9IFwibW9kYWxcIjtcbiAgICBtb2RhbC50YWJJbmRleCA9IFwiLTFcIjtcblxuICAgIC8vaWYgdGhlIGdyaW5kIGNvbnRhaW4gYSBkb3VibGUtc2Vuc2l0aXZlIG1vZGlmaWNhdGlvbiBkaXNwbGF5IGEgbWVzc2FnZVxuXG4gICAgbGV0IGR1cGxpY2F0ZVNlbnNpdGl2ZUxheWVycyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBjYXJkIG9mIHRoaXMuc2VsZWN0ZWRDYXJkcykge1xuICAgICAgZm9yIChjb25zdCBsYXllck5hbWUgaW4gY2FyZC5tZXRhZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmIChsYXllcnMuZHVwbGljYXRlQ3JpdGVyaWEuaW5jbHVkZXMobGF5ZXJOYW1lKSkge1xuICAgICAgICAgIGR1cGxpY2F0ZVNlbnNpdGl2ZUxheWVycy5wdXNoKGxheWVyTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZHVwbGljYXRlTWVzc2FnZTtcblxuICAgIGlmIChkdXBsaWNhdGVTZW5zaXRpdmVMYXllcnMubGVuZ3RoID4gMCkge1xuICAgICAgZHVwbGljYXRlTWVzc2FnZSA9IGAmIzk4ODg7JiM2NTAzOTsgVGhpcyByZXF1ZXN0IGNvbnRhaW5zIGEgbW9kaWZpY2F0aW9uIHRoYXQgY2FuIGdlbmVyYXRlIGEgZHVwbGljYXRlICgke2R1cGxpY2F0ZVNlbnNpdGl2ZUxheWVycy5qb2luKFxuICAgICAgICBcIixcIlxuICAgICAgKX0pLiBJZiBpdCdzIHRoZSBjYXNlLCB0aGUgcmVxdWVzdCB3aWxsIGJlIGNhbmNlbGVkIGFuZCB0aGUgY2FyZHMgcmV0dXJuZWQgdG8geW91ciB3YWxsZXQuPGJyPmA7XG4gICAgfVxuXG4gICAgbW9kYWwuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2cgbW9kYWwtZGlhbG9nLWNlbnRlcmVkXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgPGg1IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5SZXZpZXcgQmF0aGVyIG1vZGlmaWNhdGlvbjwvaDU+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4tY2xvc2VcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBtYi0zXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzdHlsZT1cIndpZHRoOiAzMjBweDsgaGVpZ2h0OiBhdXRvO1wiIGlkPVwicHJldmlldy1tZXJnZWQtaW1nXCI+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxwPlxuICAgICAgICAgIFlvdXIgPHN0cm9uZz4ke3RoaXMuc2VsZWN0ZWRCYXRoZXIubmFtZX08L3N0cm9uZz4gd2lsbCBiZSB1cGRhdGVkLjxicj5cbiAgICAgICAgICBZb3VyIDxzdHJvbmc+JHt0aGlzLnNlbGVjdGVkQ2FyZHNcbiAgICAgICAgICAgIC5tYXAoKGMpID0+IGMubmFtZSlcbiAgICAgICAgICAgIC5qb2luKFwiLCBcIil9PC9zdHJvbmc+IHdpbGwgYmUgYnVybmVkICYjMTI4MjkzO1xuICAgICAgICAgIDwvcD5cblxuICAgICAgICAgIDxwPllvdSdsbCBnZXQgPHN0cm9uZz4ke1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRzLmxlbmd0aCAqIDExXG4gICAgICAgICAgfSAkUm9hcjwvc3Ryb25nPjwvcD5cbiAgICAgICAgICAgIFxuICAgICAgICAgIDxwPiR7XG4gICAgICAgICAgICBkdXBsaWNhdGVNZXNzYWdlID8gZHVwbGljYXRlTWVzc2FnZSA6IFwiXCJcbiAgICAgICAgICB9JiMxMjgzMzc7IEFzIHRoZSBwcm9jZXNzIHJlcXVpcmVzIGEgbWFudWFsIHN0ZXAsIHVwZGF0ZSBjYW4gdGFrZSB1cCB0byAyNGguPGJyPlxuICAgICAgICAgICYjMTI4MjM2OyBZb3Ugd2lsbCBiZSBub3RpZmllZCBieSBhIHplcm8gQWxnbyB0cmFuc2FjdGlvbiB3aGVuIHRoZSB1cGRhdGUgaXMgY29tcGxldGUuPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnV0dG9uLWFsdFwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCI+Q2xvc2U8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBpZD1cInNlbmQtYnV0dG9uXCI+U2VuZCByZXF1ZXN0PC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgYDtcblxuICAgIGNvbnN0IHByZXZpZXdNZXJnZWRJbWcgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbWVyZ2VkLWltZ1wiKTtcbiAgICBwcmV2aWV3TWVyZ2VkSW1nLnNyYyA9IHRoaXMubWVyZ2VkSW1nRGF0YVVSTDtcblxuICAgIGNvbnN0IHNlbmRCdXR0b24gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3NlbmQtYnV0dG9uXCIpO1xuICAgIHNlbmRCdXR0b24uY3VycmVudE1vZGFsID0gbW9kYWw7XG4gICAgc2VuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5zZW5kLmJpbmQodGhpcyksIGZhbHNlKTtcblxuICAgIGNvbnN0IG15TW9kYWwgPSBuZXcgd2luZG93LmJvb3RzdHJhcC5Nb2RhbChtb2RhbCwge30pO1xuXG4gICAgbXlNb2RhbC5zaG93KCk7XG5cbiAgICByZXR1cm47XG4gIH1cblxuICBhc3luYyBwcmV2aWV3KCkge1xuICAgIGxldCByZXZpZXdCdXR0b247XG4gICAgaWYgKCF0aGlzLnNpbXVsYXRvcikge1xuICAgICAgcmV2aWV3QnV0dG9uID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2J1dHRvbi1yZXZpZXdcIik7XG4gICAgICByZXZpZXdCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgcmV2aWV3QnV0dG9uLnRleHRDb250ZW50ID0gXCJHZW5lcmF0aW5nLi4uXCI7XG4gICAgfVxuXG4gICAgY29uc3QgbWVyZ2VkSW1nID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI21lcmdlZC1pbWdcIik7XG5cbiAgICB0aGlzLm1lcmdlZFByb3BlcnRpZXMgPSBPYmplY3QuYXNzaWduKFxuICAgICAge30sXG4gICAgICB0aGlzLnNlbGVjdGVkQmF0aGVyLm1ldGFkYXRhLnByb3BlcnRpZXNcbiAgICApOyAvL21ha2UgYSBzaGFsbG93IGNvcHlcblxuICAgIGZvciAoY29uc3Qgc2VsZWN0ZWRDYXJkIG9mIHRoaXMuc2VsZWN0ZWRDYXJkcykge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2VsZWN0ZWRDYXJkLm1ldGFkYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgdGhpcy5tZXJnZWRQcm9wZXJ0aWVzW2tleV0gPSBzZWxlY3RlZENhcmQubWV0YWRhdGEucHJvcGVydGllc1trZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vY29uc29sZS5sb2cocHJvcGVydGllcylcbiAgICBsZXQgY2FudmFzID0gYXdhaXQgZHJhdyh0aGlzLm1lcmdlZFByb3BlcnRpZXMsIGxheWVycywgXCJsYXllcnNfaW1hZ2VzXCIpO1xuXG4gICAgaWYgKHRoaXMuc2ltdWxhdG9yKXtcbiAgICAgIGNhbnZhcyA9IGF3YWl0IHRoaXMuYXBwbHlXaXBPdmVybGF5KGNhbnZhcylcbiAgICB9XG5cbiAgICB0aGlzLm1lcmdlZEltZ0RhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO1xuXG4gICAgbWVyZ2VkSW1nLnNyYyA9IHRoaXMubWVyZ2VkSW1nRGF0YVVSTDtcblxuICAgIGlmICghdGhpcy5zaW11bGF0b3IpIHtcbiAgICAgIHJldmlld0J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgcmV2aWV3QnV0dG9uLnRleHRDb250ZW50ID0gXCJSZXZpZXcuLi5cIjtcbiAgICB9XG4gIH1cblxuICBhcHBseVdpcE92ZXJsYXkoY2FudmFzKXtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cbiAgICAgIGxldCB3aXBDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgIHdpcENhbnZhcy53aWR0aCA9IDUyXG4gICAgICB3aXBDYW52YXMuaGVpZ2h0ID0gNTJcbiAgICAgIHZhciBjdHggPSB3aXBDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG5cbiAgICAgICAgY3R4LmRyYXdJbWFnZShjYW52YXMsIDIsIDIpXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApXG4gICAgICAgIHJlc29sdmUod2lwQ2FudmFzKVxuXG4gICAgICB9XG5cbiAgICAgIGltYWdlLm9uZXJyb3IgPSAoZSkgPT4ge1xuICAgICAgICByZWplY3QoZSlcbiAgICAgIH1cblxuICAgICAgaW1hZ2Uuc3JjID0gJ2Fzc2V0cy93aXAucG5nJ1xuXG4gICAgfSlcblxuICAgICAgXG5cbiAgICBcblxuICAgIFxuXG4gIH1cblxuICBhc3luYyBzZW5kKGV2ZW50KSB7XG4gICAgY29uc3Qgc2VuZEJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgc2VuZEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgc2VuZEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiV2FpdGluZyBmb3Igc2lnbmF0dXJlLi4uXCI7XG5cbiAgICBjb25zdCBzdWdnZXN0ZWRQYXJhbXMgPSBhd2FpdCB0aGlzLmFsZ29kQ2xpZW50LmdldFRyYW5zYWN0aW9uUGFyYW1zKCkuZG8oKTtcblxuICAgIC8vZ2VuZXJhdGUgdHhcblxuICAgIGNvbnN0IG5vdGUgPSB7XG4gICAgICBldm9sdmU6IHRoaXMuc2VsZWN0ZWRCYXRoZXIuYXNzZXRJZCxcbiAgICB9O1xuXG4gICAgY29uc3QgdGV4dEVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICBjb25zdCBlbmNvZGVkTm90ZSA9IHRleHRFbmNvZGVyLmVuY29kZShKU09OLnN0cmluZ2lmeShub3RlKSk7XG5cbiAgICBpZiAodGhpcy5zZWxlY3RlZENhcmRzLmxlbmd0aCA+IDEzKSB7XG4gICAgICBhbGVydChcIk5vIG1vcmUgdGhhbiAxNCBjYXJkcyBjYW4gYmUgdXNlZCBhdCBvbmNlLlwiKTsgLy8xNiBtaW51cyBhc3NldCBjb25maWcgdHgsIG1pbnVzIG5vdGlmaWNhdGlvbiB0eCwgbWludSBhc3NldCBzZW5kXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHR4bnMgPSBbXTtcblxuICAgIGZvciAoY29uc3Qgc2VsZWN0ZWRDYXJkIG9mIHRoaXMuc2VsZWN0ZWRDYXJkcykge1xuICAgICAgdHhucy5wdXNoKFxuICAgICAgICBhbGdvc2RrLm1ha2VBc3NldFRyYW5zZmVyVHhuV2l0aFN1Z2dlc3RlZFBhcmFtc0Zyb21PYmplY3Qoe1xuICAgICAgICAgIGZyb206IHRoaXMud2FsbGV0Q29ubmVjdC53YWxsZXRBZGRyZXNzLFxuICAgICAgICAgIHRvOiB0aGlzLmNhcmRzQ29sbGVjdGlvbi5jb2xsZWN0aW9uc1swXS5hZGRyZXNzZXNbMF0sXG4gICAgICAgICAgYW1vdW50OiAxLFxuICAgICAgICAgIGFzc2V0SW5kZXg6IHNlbGVjdGVkQ2FyZC5hc3NldElkLFxuICAgICAgICAgIHN1Z2dlc3RlZFBhcmFtczogc3VnZ2VzdGVkUGFyYW1zLFxuICAgICAgICAgIG5vdGU6IGVuY29kZWROb3RlLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvL2Fzc2lnbiBncm91cFxuICAgIGlmICh0eG5zLmxlbmd0aCA+IDEpIHtcbiAgICAgIGFsZ29zZGsuYXNzaWduR3JvdXBJRCh0eG5zKTtcbiAgICB9XG5cbiAgICBjb25zdCBzaWduZWRUeG5zID0gYXdhaXQgdGhpcy53YWxsZXRDb25uZWN0LnNpZ25UcmFuc2FjdGlvbnModHhucyk7XG5cbiAgICAvL2Rpc3BsYXkgd2FpdCBhbmltYXRpb25cbiAgICBjb25zdCBjdXJyZW50TW9kYWwgPSBzZW5kQnV0dG9uLmN1cnJlbnRNb2RhbDtcblxuICAgIGN1cnJlbnRNb2RhbC5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZyBtb2RhbC1kaWFsb2ctY2VudGVyZWRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keSBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBtYi0zXCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvZ3JpbmRlci5wbmdcIiBzdHlsZT1cIndpZHRoOiAxMjhweDsgaGVpZ2h0OiBhdXRvO1wiPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgbWItM1wiPlxuICAgICAgICAgICAgU2VuZGluZyBDYWZmZWluZSBDYXJkIHRvIHRoZSBHcmluZGVyLi4uXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy9zZW5kIHRyYW5zYWN0aW9uXG4gICAgbGV0IHR4O1xuICAgIHRyeSB7XG4gICAgICB0eCA9IGF3YWl0IHRoaXMuYWxnb2RDbGllbnQuc2VuZFJhd1RyYW5zYWN0aW9uKHNpZ25lZFR4bnMpLmRvKCk7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGNvbmZpcm1hdGlvblxuICAgICAgbGV0IGNvbmZpcm1lZFR4biA9IGF3YWl0IGFsZ29zZGsud2FpdEZvckNvbmZpcm1hdGlvbihcbiAgICAgICAgdGhpcy5hbGdvZENsaWVudCxcbiAgICAgICAgdHgudHhJZCxcbiAgICAgICAgNFxuICAgICAgKTtcblxuICAgICAgY3VycmVudE1vZGFsLmlubmVySFRNTCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nIG1vZGFsLWRpYWxvZy1jZW50ZXJlZFwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuLWNsb3NlXCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIG1iLTNcIj5cbiAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9oZWFydC1jdXAucG5nXCIgd2lkdGg9XCI2MFwiPjxicj48YnI+XG4gICAgICAgICAgV2UgZ290IHlvdXIgY2FyZCBhbmQgeW91ciBldm9sdXRpb24gcmVxdWVzdC48YnI+XG4gICAgICAgICAgV2UnbGwgYmUgYmFjayB0byB5b3UgdmVyeSBzb29uLlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCI+Q2xvc2U8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgICBjdXJyZW50TW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImhpZGRlbi5icy5tb2RhbFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgLy9yZWxvYWQgd2hvbGUgcGFnZSB0byB1cGRhdGUgaG9sZGluZ3NcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGN1cnJlbnRNb2RhbC5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZyBtb2RhbC1kaWFsb2ctY2VudGVyZWRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBtYi0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiIHJvbGU9XCJhbGVydFwiPiR7ZXJyLm1lc3NhZ2V9IDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCI+Q2xvc2U8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiR3JpbmRlciIsIkJhc2VQYWdlIiwiY29uc3RydWN0b3IiLCJhcmdzIiwic3VwZXIiLCJhcmd1bWVudHMiLCJ0aGlzIiwic2ltdWxhdG9yIiwibGVuZ3RoIiwidWkiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJiYXRoZXJzQ29sbGVjdGlvbiIsImNhcmRzQ29sbGVjdGlvbiIsInNlbGVjdGVkQmF0aGVyIiwic2VsZWN0ZWRDYXJkcyIsIm1lcmdlZFByb3BlcnRpZXMiLCJtZXJnZWRJbWdEYXRhVVJMIiwiY2hvb3NlQ2FyZEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJsb2FkIiwiYXN5bmMiLCJsb2FkQmF0aGVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZXZpZXciLCJiaW5kIiwicXVlcnlTdHJpbmciLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInVybFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImhhcyIsImJhdGhlckFzc2V0SWQiLCJwYXJzZUludCIsImdldCIsIm5mdCIsIm5mdHMiLCJmaWx0ZXIiLCJhc3NldElkIiwiZGlzcGxheUJhdGhlciIsImhvbGRpbmdzIiwiZHJvcGRvd25EaXYiLCJkcm9wZG93biIsInJlbW92ZSIsIm4iLCJtZXRhZGF0YSIsImRpZFNlbGVjdEJhdGhlciIsImFwcGVuZCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjbGVhckNhcmQiLCJuZnRJbmRleCIsImN1cnJlbnRUYXJnZXQiLCJkYXRhc2V0IiwiaW5kZXgiLCJwcm9wZXJ0aWVzIiwic3JjIiwiaW1hZ2VVcmwiLCJ2YWxpZGF0ZSIsImxvYWRDYXJkcyIsImRpc2FibGVkIiwiaGlkZGVuIiwiY2hpbGRyZW4iLCJBcnJheSIsImZyb20iLCJlbGVtZW50IiwiaWQiLCJsb2FkQWxsQ2FyZHMiLCJkaXNhYmxlZEFzc2V0SWRzIiwibWFpbmxvb3AiLCJyZXF1aXJlIiwicmVxdWlyZUtleSIsInB1c2giLCJzZWxlY3RlZENhcmQiLCJwcm9wZXJ0eSIsImNvbnNvbGUiLCJlcnJvciIsIkVycm9yIiwibmFtZSIsImRpZFNlbGVjdENhcmQiLCJib290c3RyYXAiLCJEcm9wZG93biIsInNsZWVwIiwiZGVsYXlUaW1lIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwicmVqZWN0IiwidGV4dENvbnRlbnQiLCJkZWZhdWx0IiwiY29sbGVjdGlvbnMiLCJjYXJkQ29sbGVjdGlvbiIsImMiLCJuZnRDb2xsZWN0aW9uIiwiYWxnb0luZGV4ZXIiLCJpIiwidGhlbiIsImNhdGNoIiwiZSIsImRlZmF1bHRDYXJkIiwibmV3Q2FyZERpdiIsImNsYXNzTmFtZSIsInJlbW92ZUNhcmQiLCJsb2ciLCJtYXAiLCJyZXZpZXdCdXR0b24iLCJwcmV2aWV3IiwibW9kYWwiLCJ0YWJJbmRleCIsImR1cGxpY2F0ZU1lc3NhZ2UiLCJkdXBsaWNhdGVTZW5zaXRpdmVMYXllcnMiLCJjYXJkIiwibGF5ZXJOYW1lIiwiam9pbiIsInNlbmRCdXR0b24iLCJjdXJyZW50TW9kYWwiLCJzZW5kIiwiTW9kYWwiLCJzaG93IiwibWVyZ2VkSW1nIiwiT2JqZWN0IiwiYXNzaWduIiwia2V5IiwiY2FudmFzIiwiYXBwbHlXaXBPdmVybGF5IiwidG9EYXRhVVJMIiwid2lwQ2FudmFzIiwid2lkdGgiLCJoZWlnaHQiLCJjdHgiLCJnZXRDb250ZXh0IiwiaW1hZ2UiLCJJbWFnZSIsIm9ubG9hZCIsImRyYXdJbWFnZSIsIm9uZXJyb3IiLCJzdWdnZXN0ZWRQYXJhbXMiLCJhbGdvZENsaWVudCIsImdldFRyYW5zYWN0aW9uUGFyYW1zIiwiZG8iLCJub3RlIiwiZXZvbHZlIiwiZW5jb2RlZE5vdGUiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhbGVydCIsInR4bnMiLCJ3YWxsZXRDb25uZWN0Iiwid2FsbGV0QWRkcmVzcyIsInRvIiwiYWRkcmVzc2VzIiwiYW1vdW50IiwiYXNzZXRJbmRleCIsInNpZ25lZFR4bnMiLCJzaWduVHJhbnNhY3Rpb25zIiwidHgiLCJzZW5kUmF3VHJhbnNhY3Rpb24iLCJ0eElkIiwicmVsb2FkIiwiZXJyIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=