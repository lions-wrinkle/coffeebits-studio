"use strict";(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[810],{6810:(t,a,s)=>{s.d(a,{c:()=>g,a:()=>c});var e=s(194),i=s(1466);const{GIFEncoder:h,quantize:o,applyPalette:r}=i;class n{constructor(t,a,s=1){this.width=t,this.height=a,this.scale=s,this.gifEncoder=h()}addFrame(t,a=300){let{data:s,width:i,height:h}=t.getImageData(0,0,this.width,this.height);const n=o(s,256);if(1!=this.scale){const a=(0,e.vL)(Math.round(this.width*this.scale),Math.round(this.height*this.scale)),o=a.getContext("2d");o.imageSmoothingEnabled=!1,o.scale(this.scale,this.scale),o.drawImage(t.canvas,0,0);const r=o.getImageData(0,0,a.width,a.height);s=r.data,i=r.width,h=r.height}const d=r(s,n);this.gifEncoder.writeFrame(d,i,h,{palette:n,delay:a})}finish(){this.gifEncoder.finish()}getOutput(){return this.gifEncoder.bytes()}}var d=s(7644);class g{constructor(){this.width=48,this.height=48,this.scale=8,this.layersData,this.types=["chatty","shower","sunrise","neon_glitch"]}async drawLayers(t,a,s){this.layersData=await(0,d.i)(t,a,s,!0)}async draw_chatty(){const t=new n(this.width,this.height,this.scale),a=(0,e.vL)(this.width,this.height).getContext("2d"),s=(0,e.vL)(this.width,this.height),i=s.getContext("2d"),h=["./graphic-tools-assets/basic-1.png","./graphic-tools-assets/basic-2.png","./graphic-tools-assets/basic-3.png","./graphic-tools-assets/basic-4.png","./graphic-tools-assets/basic-5.png","./graphic-tools-assets/basic-6.png"];let o=0;for(const r of h){for(const t of this.layersData){const e=t.imageData;i.clearRect(0,0,this.width,this.height),i.putImageData(e,0,0),a.globalCompositeOperation=t.composite,a.save(),o%2==1&&["body","reflection","mouth","beard","clothes","minicup","eyes","head","power","glow"].includes(t.name)&&(a.translate(this.width,0),a.scale(-1,1)),a.drawImage(s,0,0),a.restore()}const h=await(0,e.po)(r);a.drawImage(h,0,0),t.addFrame(a,700),o++}return t.finish(),t.getOutput()}async draw_shower(){const t=new n(this.width,this.height,this.scale),a=(0,e.vL)(this.width,this.height).getContext("2d"),s=(0,e.vL)(this.width,this.height),i=s.getContext("2d"),h=["./graphic-tools-assets/coffee-shower-1.png","./graphic-tools-assets/coffee-shower-2.png","./graphic-tools-assets/coffee-shower-3.png","./graphic-tools-assets/coffee-shower-4.png"];for(const o of h){let h=!1;for(const t of this.layersData){const r=t.imageData;if(i.clearRect(0,0,this.width,this.height),i.putImageData(r,0,0),a.globalCompositeOperation=t.composite,a.drawImage(s,0,0),"head"===t.name){const t=await(0,e.po)(o);a.drawImage(t,0,0),h=!0}}if(!h){const t=await(0,e.po)(o);a.drawImage(t,0,0)}t.addFrame(a,100)}return t.finish(),t.getOutput()}async draw_sunrise(){const t=new n(this.width,this.height,this.scale),a=(0,e.vL)(this.width,this.height).getContext("2d"),s=(0,e.vL)(this.width,this.height),i=s.getContext("2d"),h=[{background:"./graphic-tools-assets/sunrise-1.png",foreground:null,duration:100},{background:"./graphic-tools-assets/sunrise-2.png",foreground:null,duration:100},{background:"./graphic-tools-assets/sunrise-3.png",foreground:"./graphic-tools-assets/sunrise-text-1.png",duration:100},{background:"./graphic-tools-assets/sunrise-4.png",foreground:"./graphic-tools-assets/sunrise-text-2.png",duration:100},{background:"./graphic-tools-assets/sunrise-5.png",foreground:"./graphic-tools-assets/sunrise-text-3.png",duration:100},{background:"./graphic-tools-assets/sunrise-6.png",foreground:"./graphic-tools-assets/sunrise-text-4.png",duration:1200},{background:"./graphic-tools-assets/sunrise-7.png",foreground:"./graphic-tools-assets/sunrise-text-4.png",duration:100},{background:"./graphic-tools-assets/sunrise-8.png",foreground:"./graphic-tools-assets/sunrise-text-5.png",duration:100},{background:"./graphic-tools-assets/sunrise-9.png",foreground:null,duration:100}];for(const o of h){for(const t of this.layersData){const h=t.imageData;if(i.clearRect(0,0,this.width,this.height),i.putImageData(h,0,0),a.globalCompositeOperation=t.composite,a.drawImage(s,0,0),"room"===t.name){const t=await(0,e.po)(o.background);a.drawImage(t,0,0)}}if(o.foreground){const t=await(0,e.po)(o.foreground);a.drawImage(t,0,0)}t.addFrame(a,o.duration)}return t.finish(),t.getOutput()}glitch(t,a,s=!1){const e=t.data.length/4;if(s)return t;let i=a.createImageData(this.width,this.height);i.data.set(t.data);for(let a=0;a<3;a++){let a=Math.floor(Math.random()*e),s=Math.round(Math.random())?"add":"remove";if("add"===s)for(let s=a;s<e;s++)i.data[4*s+0]=t.data[4*(s-1)+0],i.data[4*s+1]=t.data[4*(s-1)+1],i.data[4*s+2]=t.data[4*(s-1)+2],i.data[4*s+3]=t.data[4*(s-1)+3];else if("remove"===s)for(let s=a;s<e;s++)i.data[4*s+0]=t.data[4*(s+1)+0],i.data[4*s+1]=t.data[4*(s+1)+1],i.data[4*s+2]=t.data[4*(s+1)+2],i.data[4*s+3]=t.data[4*(s+1)+3]}return i}async glitchedImage(t,a){const s=(0,e.vL)(this.width,this.height),i=s.getContext("2d"),h=await(0,e.po)(t);i.clearRect(0,0,this.width,this.height),i.drawImage(h,0,0);const o=this.glitch(i.getImageData(0,0,this.width,this.height),i,a);return i.putImageData(o,0,0),s}async draw_neon_glitch(){const t=new n(this.width,this.height,this.scale),a=(0,e.vL)(this.width,this.height).getContext("2d"),s=(0,e.vL)(this.width,this.height),i=s.getContext("2d"),h="./graphic-tools-assets/neon-glitch-g.png",o="./graphic-tools-assets/neon-glitch-m.png";for(let e=0;e<25;e++){let r=!1;(e>=9&&e<=12||e>=20&&e<=21)&&(r=!0);const n="foreground",d="background";for(const t of this.layersData){const e=this.glitch(t.imageData,i,!r);if(i.clearRect(0,0,this.width,this.height),i.putImageData(e,0,0),a.globalCompositeOperation=t.composite,a.drawImage(s,0,0),"room"===t.name){if("background"===n){const t=await this.glitchedImage(h,!r);a.drawImage(t,0,0)}if("background"===d){const t=await this.glitchedImage(o,!r);a.drawImage(t,0,0)}}}if("foreground"===n){const t=await this.glitchedImage(h,!r);a.drawImage(t,0,0)}if("foreground"===d){const t=await this.glitchedImage(o,!r);a.drawImage(t,0,0)}t.addFrame(a,100)}return t.finish(),t.getOutput()}}class c{constructor(t,a,s){this.properties=t,this.layers=a,this.layersFolder=s,this.width=48,this.height=48,this.scale=8,this.layersData}async drawLayers(){this.layersData=await(0,d.i)(this.properties,this.layers,this.layersFolder,!0)}upscale(t,a){const s=(0,e.vL)(this.width*a,this.height*a),i=s.getContext("2d");return i.imageSmoothingEnabled=!1,i.scale(this.scale,this.scale),i.drawImage(t,0,0,this.width,this.height),s}stretchNeck(t,a,s,e){let i=t.createImageData(this.width,this.height+e);for(let t=-e;t<this.height+e;t++)for(let h=0;h<this.width;h++){const o=4*((t+e)*this.width+h);if(t<21-s){const e=4*((t+s)*this.width+h);i.data[o+0]=a.data[e+0],i.data[o+1]=a.data[e+1],i.data[o+2]=a.data[e+2],i.data[o+3]=a.data[e+3]}else if(t<=21&&t>=21-s){const t=4*(21*this.width+h);i.data[o+0]=a.data[t+0],i.data[o+1]=a.data[t+1],i.data[o+2]=a.data[t+2],i.data[o+3]=a.data[t+3]}else{const s=4*(t*this.width+h);i.data[o+0]=a.data[s+0],i.data[o+1]=a.data[s+1],i.data[o+2]=a.data[s+2],i.data[o+3]=a.data[s+3]}}return i}async drawLong(t=9,a=!0){const s=(0,e.vL)(this.width,this.height).getContext("2d"),i=(0,e.vL)(this.width,this.height),h=i.getContext("2d");let o=!1;for(const a of this.layersData){s.save();let e=a.imageData;["body","power","glow"].includes(a.name)?e=this.stretchNeck(s,e,t,5):(!["room","decoration"].includes(a.name)||"room"===a.name&&o)&&s.translate(0,5),"room"===a.name&&(o=!0),["mouth","beard","eyes","head"].includes(a.name)&&s.translate(0,-t),h.clearRect(0,0,this.width,this.height),h.putImageData(e,0,0),s.globalCompositeOperation=a.composite,s.drawImage(i,0,0),s.restore()}if(a){const a=await(0,e.po)("./graphic-tools-assets/basic-3.png");s.drawImage(a,1,7-t)}return s}async drawLongPNG(t=10,a=!1){await this.drawLayers();const s=await this.drawLong(t,a);return this.upscale(s.canvas,this.scale)}async drawLongGif(t=10,a=!1){const s=new n(this.width,this.height,this.scale);for(let e=0;e<2*t;e++){await this.drawLayers();let i=e;e>t&&(i=t-(e-t));const h=await this.drawLong(i,a);s.addFrame(h,70)}return s.finish(),s.getOutput()}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQVNOLEVBQU1PLE9BRWxEdEMsRUFBSXVDLFVBQVUsR0FBSXVDLEdBS3RCbkQsRUFBVUssVUFBVSxFQUFHLEVBQUduQyxLQUFLSCxNQUFPRyxLQUFLRixRQUUzQ2dDLEVBQVVNLGFBQWFyQixFQUFXLEVBQUcsR0FFckNaLEVBQUlrQyx5QkFBMkJILEVBQU1JLFVBRXJDbkMsRUFBSVcsVUFBVWUsRUFBYSxFQUFHLEdBRTlCMUIsRUFBSXdDLFNBRVIsQ0FFQSxHQUFJNEMsRUFBRyxDQUNILE1BQU1FLFFBQWlCLFFBQVUsc0NBQ2pDdEYsRUFBSVcsVUFBVTJFLEVBQVUsRUFBZSxFQUFYUixFQUNoQyxDQUVBLE9BQU85RSxDQUVYLENBRUFxQixrQkFBa0J5RCxFQUFXLEdBQUlNLEdBQUssU0FFNUJ2RixLQUFLMEYsYUFFWCxNQUFNdkYsUUFBWUgsS0FBSzJGLFNBQVNWLEVBQVVNLEdBQzFDLE9BQU92RixLQUFLOEUsUUFBUTNFLEVBQUlLLE9BQVFSLEtBQUtELE1BRXpDLENBRUF5QixrQkFBa0J5RCxFQUFXLEdBQUlNLEdBQUssR0FFbEMsTUFBTTNELEVBQWUsSUFBSWpDLEVBQWFLLEtBQUtILE1BQU9HLEtBQUtGLE9BQVFFLEtBQUtELE9BSXBFLElBQUssSUFBSWlDLEVBQUksRUFBR0EsRUFBYSxFQUFUaUQsRUFBWWpELElBQUksT0FFMUJoQyxLQUFLMEYsYUFFWCxJQUFJRSxFQUFPNUQsRUFDUEEsRUFBSWlELElBQ0pXLEVBQU9YLEdBQVlqRCxFQUFJaUQsSUFJM0IsTUFBTTlFLFFBQVlILEtBQUsyRixTQUFTQyxFQUFNTCxHQUV0QzNELEVBQWExQixTQUFTQyxFQWROLEdBZ0JwQixDQUlBLE9BRkF5QixFQUFhVixTQUVOVSxFQUFhVCxXQUV4QixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZGlvLy4uL2dyYXBoaWMtdG9vbHMvZ2lmLWdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly9zdHVkaW8vLi4vZ3JhcGhpYy10b29scy9nbS1nZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vc3R1ZGlvLy4uL2dyYXBoaWMtdG9vbHMvbG9uZ2JvaS1nZW5lcmF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2FudmFzIH0gZnJvbSBcImNhbnZhc1wiO1xuaW1wb3J0IGdpZmVuYyBmcm9tIFwiZ2lmZW5jXCI7XG5jb25zdCB7IEdJRkVuY29kZXIsIHF1YW50aXplLCBhcHBseVBhbGV0dGUgfSA9IGdpZmVuYztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2lmR2VuZXJhdG9yIHtcbiAgY29uc3RydWN0b3Iod2lkdGgsIGhlaWdodCwgc2NhbGUgPSAxLjApIHtcbiAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuXG4gICAgLy8gQ3JlYXRlIGFuIGVuY29kaW5nIHN0cmVhbVxuICAgIHRoaXMuZ2lmRW5jb2RlciA9IEdJRkVuY29kZXIoKTtcbiAgfVxuXG4gIGFkZEZyYW1lKGN0eCwgZGVsYXkgPSAzMDApIHtcblxuICAgIC8vIEdldCB5b3VyIFJHQkEgaW1hZ2UgaW50byBVaW50OEFycmF5IGRhdGFcbiAgICBsZXQgeyBkYXRhLCB3aWR0aCwgaGVpZ2h0IH0gPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblxuICAgIC8vIFF1YW50aXplIGNvbG9ycyB0byBhIDI1Ni1jb2xvciBSR0IgcGFsZXR0ZSBwYWxldHRlXG4gICAgY29uc3QgcGFsZXR0ZSA9IHF1YW50aXplKGRhdGEsIDI1Nik7XG5cbiAgICBpZiAodGhpcy5zY2FsZSAhPSAxLjApe1xuICAgICAgY29uc3QgY2FudmFzID0gY3JlYXRlQ2FudmFzKE1hdGgucm91bmQodGhpcy53aWR0aCp0aGlzLnNjYWxlKSwgTWF0aC5yb3VuZCh0aGlzLmhlaWdodCp0aGlzLnNjYWxlKSk7XG4gICAgICBjb25zdCBzY2FsZUN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgc2NhbGVDdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG5cbiAgICAgIHNjYWxlQ3R4LnNjYWxlKHRoaXMuc2NhbGUsIHRoaXMuc2NhbGUpO1xuICAgICAgc2NhbGVDdHguZHJhd0ltYWdlKGN0eC5jYW52YXMsIDAsIDApO1xuXG4gICAgICBjb25zdCBpbWFnZURhdGEgPSBzY2FsZUN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIGRhdGEgPSBpbWFnZURhdGEuZGF0YTtcbiAgICAgIHdpZHRoID0gaW1hZ2VEYXRhLndpZHRoO1xuICAgICAgaGVpZ2h0ID0gaW1hZ2VEYXRhLmhlaWdodDtcbiAgICB9XG5cbiAgICAvLyBHZXQgYW4gaW5kZXhlZCBiaXRtYXAgYnkgcmVkdWNpbmcgZWFjaCBwaXhlbCB0byB0aGUgbmVhcmVzdCBjb2xvciBwYWxldHRlXG4gICAgY29uc3QgaW5kZXggPSBhcHBseVBhbGV0dGUoZGF0YSwgcGFsZXR0ZSk7XG5cbiAgICAvLyBXcml0ZSBhIHNpbmdsZSBmcmFtZVxuICAgIHRoaXMuZ2lmRW5jb2Rlci53cml0ZUZyYW1lKGluZGV4LCB3aWR0aCwgaGVpZ2h0LCB7IHBhbGV0dGUsIGRlbGF5OiBkZWxheSB9KTtcblxuICB9XG5cbiAgZmluaXNoKCl7XG5cbiAgICB0aGlzLmdpZkVuY29kZXIuZmluaXNoKCk7XG4gIH1cblxuICBnZXRPdXRwdXQoKXtcblxuICAgIHJldHVybiB0aGlzLmdpZkVuY29kZXIuYnl0ZXMoKTtcbiAgfVxufVxuIiwiaW1wb3J0IEdpZkdlbmVyYXRvciBmcm9tICcuL2dpZi1nZW5lcmF0b3IuanMnO1xuaW1wb3J0IHsgZHJhdyB9IGZyb20gJ2JhdGgtY2x1Yic7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXMsIGxvYWRJbWFnZSB9IGZyb20gJ2NhbnZhcyc7XG5cbmV4cG9ydCBjbGFzcyBHbUdlbmVyYXRvciB7XG4gICAgY29uc3RydWN0b3IoKXtcblxuICAgICAgICB0aGlzLndpZHRoID0gNDg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gNDg7XG5cbiAgICAgICAgdGhpcy5zY2FsZSA9IDg7XG5cbiAgICAgICAgLy9kcmF3IGxheWVycyBzZXBhcmF0ZWx5XG4gICAgICAgIHRoaXMubGF5ZXJzRGF0YTtcblxuICAgICAgICB0aGlzLnR5cGVzID0gWydjaGF0dHknLCAnc2hvd2VyJywgJ3N1bnJpc2UnLCAnbmVvbl9nbGl0Y2gnXTtcblxuICAgIH1cblxuICAgIGFzeW5jIGRyYXdMYXllcnMocHJvcGVydGllcywgbGF5ZXJzLCBsYXllcnNGb2xkZXIpe1xuXG4gICAgICAgIHRoaXMubGF5ZXJzRGF0YSA9IGF3YWl0IGRyYXcocHJvcGVydGllcywgbGF5ZXJzLCBsYXllcnNGb2xkZXIsIHRydWUpO1xuXG4gICAgfVxuXG4gICAgYXN5bmMgZHJhd19jaGF0dHkoKXtcblxuICAgICAgICBjb25zdCBnaWZHZW5lcmF0b3IgPSBuZXcgR2lmR2VuZXJhdG9yKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnNjYWxlKTtcblxuICAgICAgICBjb25zdCBjYW52YXMgPSBjcmVhdGVDYW52YXModGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICBjb25zdCBsYXllckNhbnZhcyA9IGNyZWF0ZUNhbnZhcyh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgICAgIGNvbnN0IGxheWVyc0N0eCA9IGxheWVyQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgY29uc3QgYnViYmxlSW1hZ2VzID0gW1xuICAgICAgICAgICAgJy4vZ3JhcGhpYy10b29scy1hc3NldHMvYmFzaWMtMS5wbmcnLFxuICAgICAgICAgICAgJy4vZ3JhcGhpYy10b29scy1hc3NldHMvYmFzaWMtMi5wbmcnLFxuICAgICAgICAgICAgJy4vZ3JhcGhpYy10b29scy1hc3NldHMvYmFzaWMtMy5wbmcnLFxuICAgICAgICAgICAgJy4vZ3JhcGhpYy10b29scy1hc3NldHMvYmFzaWMtNC5wbmcnLFxuICAgICAgICAgICAgJy4vZ3JhcGhpYy10b29scy1hc3NldHMvYmFzaWMtNS5wbmcnLFxuICAgICAgICAgICAgJy4vZ3JhcGhpYy10b29scy1hc3NldHMvYmFzaWMtNi5wbmcnXG4gICAgICAgIF1cblxuICAgICAgICBjb25zdCBmcmFtZUR1cmF0aW9uID0gNzAwO1xuXG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBidWJibGVJbWFnZUZpbGVwYXRoIG9mIGJ1YmJsZUltYWdlcyl7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbGF5ZXIgb2YgdGhpcy5sYXllcnNEYXRhKXtcblxuXG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gbGF5ZXIuaW1hZ2VEYXRhO1xuICAgICAgICAgICAgICAgIGxheWVyc0N0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGxheWVyc0N0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTsgXG4gICAgICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IGxheWVyLmNvbXBvc2l0ZTtcblxuICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaSUyID09PSAxICYmIFsnYm9keScsICdyZWZsZWN0aW9uJywgJ21vdXRoJywgJ2JlYXJkJywgJ2Nsb3RoZXMnLCAnbWluaWN1cCcsICdleWVzJywgJ2hlYWQnLCAncG93ZXInLCAnZ2xvdyddLmluY2x1ZGVzKGxheWVyLm5hbWUpKXtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vZmxpcCBpbWFnZVxuICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKHRoaXMud2lkdGgsIDApO1xuICAgICAgICAgICAgICAgICAgICBjdHguc2NhbGUoLTEsIDEpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShsYXllckNhbnZhcywgMCwgMCk7XG5cbiAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYnViYmxlSW1hZ2UgPSBhd2FpdCBsb2FkSW1hZ2UoYnViYmxlSW1hZ2VGaWxlcGF0aCk7XG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGJ1YmJsZUltYWdlLCAwLCAwKTtcblxuICAgICAgICAgICAgZ2lmR2VuZXJhdG9yLmFkZEZyYW1lKGN0eCwgZnJhbWVEdXJhdGlvbik7XG4gICAgICAgICAgICBpKys7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGdpZkdlbmVyYXRvci5maW5pc2goKTtcblxuICAgICAgICByZXR1cm4gZ2lmR2VuZXJhdG9yLmdldE91dHB1dCgpO1xuXG4gICAgfVxuXG4gICAgYXN5bmMgZHJhd19zaG93ZXIoKXtcblxuICAgICAgICBjb25zdCBnaWZHZW5lcmF0b3IgPSBuZXcgR2lmR2VuZXJhdG9yKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnNjYWxlKTtcblxuICAgICAgICBjb25zdCBjYW52YXMgPSBjcmVhdGVDYW52YXModGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICBjb25zdCBsYXllckNhbnZhcyA9IGNyZWF0ZUNhbnZhcyh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgICAgIGNvbnN0IGxheWVyc0N0eCA9IGxheWVyQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgY29uc3Qgc2hvd2VySW1hZ2VzID0gW1xuICAgICAgICAgICAgJy4vZ3JhcGhpYy10b29scy1hc3NldHMvY29mZmVlLXNob3dlci0xLnBuZycsXG4gICAgICAgICAgICAnLi9ncmFwaGljLXRvb2xzLWFzc2V0cy9jb2ZmZWUtc2hvd2VyLTIucG5nJyxcbiAgICAgICAgICAgICcuL2dyYXBoaWMtdG9vbHMtYXNzZXRzL2NvZmZlZS1zaG93ZXItMy5wbmcnLFxuICAgICAgICAgICAgJy4vZ3JhcGhpYy10b29scy1hc3NldHMvY29mZmVlLXNob3dlci00LnBuZydcbiAgICAgICAgXVxuXG4gICAgICAgIGNvbnN0IGZyYW1lRHVyYXRpb24gPSAxMDA7XG5cbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHNob3dlckltYWdlRmlsZXBhdGggb2Ygc2hvd2VySW1hZ2VzKXtcblxuICAgICAgICAgICAgbGV0IGRpZERyYXdTaG93ZXIgPSBmYWxzZTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBsYXllciBvZiB0aGlzLmxheWVyc0RhdGEpe1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gbGF5ZXIuaW1hZ2VEYXRhO1xuICAgICAgICAgICAgICAgIGxheWVyc0N0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGxheWVyc0N0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTsgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IGxheWVyLmNvbXBvc2l0ZTtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGxheWVyQ2FudmFzLCAwLCAwKTtcblxuICAgICAgICAgICAgICAgIGlmIChsYXllci5uYW1lID09PSAnaGVhZCcpe1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG93ZXJJbWFnZSA9IGF3YWl0IGxvYWRJbWFnZShzaG93ZXJJbWFnZUZpbGVwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShzaG93ZXJJbWFnZSwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGRpZERyYXdTaG93ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZGlkRHJhd1Nob3dlcil7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvd2VySW1hZ2UgPSBhd2FpdCBsb2FkSW1hZ2Uoc2hvd2VySW1hZ2VGaWxlcGF0aCk7XG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShzaG93ZXJJbWFnZSwgMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgZ2lmR2VuZXJhdG9yLmFkZEZyYW1lKGN0eCwgZnJhbWVEdXJhdGlvbik7XG4gICAgICAgICAgICBpKys7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGdpZkdlbmVyYXRvci5maW5pc2goKTtcblxuICAgICAgICByZXR1cm4gZ2lmR2VuZXJhdG9yLmdldE91dHB1dCgpO1xuXG4gICAgfVxuXG4gICAgYXN5bmMgZHJhd19zdW5yaXNlKCl7XG5cbiAgICAgICAgY29uc3QgZ2lmR2VuZXJhdG9yID0gbmV3IEdpZkdlbmVyYXRvcih0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgdGhpcy5zY2FsZSk7XG5cbiAgICAgICAgY29uc3QgY2FudmFzID0gY3JlYXRlQ2FudmFzKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgY29uc3QgbGF5ZXJDYW52YXMgPSBjcmVhdGVDYW52YXModGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICBjb25zdCBsYXllcnNDdHggPSBsYXllckNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgIGNvbnN0IHN1bnJpc2VJbWFnZXMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJy4vZ3JhcGhpYy10b29scy1hc3NldHMvc3VucmlzZS0xLnBuZycsXG4gICAgICAgICAgICAgICAgZm9yZWdyb3VuZDogbnVsbCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICcuL2dyYXBoaWMtdG9vbHMtYXNzZXRzL3N1bnJpc2UtMi5wbmcnLFxuICAgICAgICAgICAgICAgIGZvcmVncm91bmQ6IG51bGwsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnLi9ncmFwaGljLXRvb2xzLWFzc2V0cy9zdW5yaXNlLTMucG5nJyxcbiAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kOiAnLi9ncmFwaGljLXRvb2xzLWFzc2V0cy9zdW5yaXNlLXRleHQtMS5wbmcnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJy4vZ3JhcGhpYy10b29scy1hc3NldHMvc3VucmlzZS00LnBuZycsXG4gICAgICAgICAgICAgICAgZm9yZWdyb3VuZDogJy4vZ3JhcGhpYy10b29scy1hc3NldHMvc3VucmlzZS10ZXh0LTIucG5nJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICcuL2dyYXBoaWMtdG9vbHMtYXNzZXRzL3N1bnJpc2UtNS5wbmcnLFxuICAgICAgICAgICAgICAgIGZvcmVncm91bmQ6ICcuL2dyYXBoaWMtdG9vbHMtYXNzZXRzL3N1bnJpc2UtdGV4dC0zLnBuZycsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnLi9ncmFwaGljLXRvb2xzLWFzc2V0cy9zdW5yaXNlLTYucG5nJyxcbiAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kOiAnLi9ncmFwaGljLXRvb2xzLWFzc2V0cy9zdW5yaXNlLXRleHQtNC5wbmcnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMjAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICcuL2dyYXBoaWMtdG9vbHMtYXNzZXRzL3N1bnJpc2UtNy5wbmcnLFxuICAgICAgICAgICAgICAgIGZvcmVncm91bmQ6ICcuL2dyYXBoaWMtdG9vbHMtYXNzZXRzL3N1bnJpc2UtdGV4dC00LnBuZycsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnLi9ncmFwaGljLXRvb2xzLWFzc2V0cy9zdW5yaXNlLTgucG5nJyxcbiAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kOiAnLi9ncmFwaGljLXRvb2xzLWFzc2V0cy9zdW5yaXNlLXRleHQtNS5wbmcnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJy4vZ3JhcGhpYy10b29scy1hc3NldHMvc3VucmlzZS05LnBuZycsXG4gICAgICAgICAgICAgICAgZm9yZWdyb3VuZDogbnVsbCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgXVxuXG4gICAgICAgIGNvbnN0IGZyYW1lRHVyYXRpb24gPSAyMDA7XG5cbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHN1bnJpc2VJbWFnZUluZm8gb2Ygc3VucmlzZUltYWdlcyl7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbGF5ZXIgb2YgdGhpcy5sYXllcnNEYXRhKXtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGxheWVyLmltYWdlRGF0YTtcbiAgICAgICAgICAgICAgICBsYXllcnNDdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBsYXllcnNDdHgucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7IFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBsYXllci5jb21wb3NpdGU7XG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShsYXllckNhbnZhcywgMCwgMCk7XG5cbiAgICAgICAgICAgICAgICBpZiAobGF5ZXIubmFtZSA9PT0gJ3Jvb20nKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VucmlzZUltYWdlID0gYXdhaXQgbG9hZEltYWdlKHN1bnJpc2VJbWFnZUluZm8uYmFja2dyb3VuZCk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2Uoc3VucmlzZUltYWdlLCAwLCAwKTtcblxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3VucmlzZUltYWdlSW5mby5mb3JlZ3JvdW5kKXtcbiAgICAgICAgICAgICAgICBjb25zdCBzdW5yaXNlSW1hZ2UgPSBhd2FpdCBsb2FkSW1hZ2Uoc3VucmlzZUltYWdlSW5mby5mb3JlZ3JvdW5kKTtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHN1bnJpc2VJbWFnZSwgMCwgMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICBnaWZHZW5lcmF0b3IuYWRkRnJhbWUoY3R4LCBzdW5yaXNlSW1hZ2VJbmZvLmR1cmF0aW9uKTtcbiAgICAgICAgICAgIGkrKztcblxuICAgICAgICB9XG5cbiAgICAgICAgZ2lmR2VuZXJhdG9yLmZpbmlzaCgpO1xuXG4gICAgICAgIHJldHVybiBnaWZHZW5lcmF0b3IuZ2V0T3V0cHV0KCk7XG5cbiAgICB9XG5cbiAgICBnbGl0Y2goaW1hZ2VEYXRhLCBjdHgsIGRpc2FibGVkID0gZmFsc2Upe1xuXG4gICAgICAgIFxuICAgICAgICBjb25zdCBudW1HbGl0Y2hlcyA9IDM7XG4gICAgICAgIGNvbnN0IG51bVBpeGVscyA9IGltYWdlRGF0YS5kYXRhLmxlbmd0aC80O1xuXG4gICAgICAgIGlmIChkaXNhYmxlZCl7XG4gICAgICAgICAgICByZXR1cm4gaW1hZ2VEYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJldHVybkltYWdlRGF0YSA9IGN0eC5jcmVhdGVJbWFnZURhdGEodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICByZXR1cm5JbWFnZURhdGEuZGF0YS5zZXQoaW1hZ2VEYXRhLmRhdGEpO1xuXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBudW1HbGl0Y2hlczsgaSsrKXtcblxuICAgICAgICAgICAgLy9jaG9vc2UgYW4gaW5kZXhcbiAgICAgICAgICAgIGxldCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpudW1QaXhlbHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgdHlwZSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSkgPyAnYWRkJyA6ICdyZW1vdmUnO1xuXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2FkZCcpe1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHJhbmRvbUluZGV4OyBqIDwgbnVtUGl4ZWxzOyBqKyspe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5JbWFnZURhdGEuZGF0YVtqKjQgKyAwXSA9IGltYWdlRGF0YS5kYXRhWyhqIC0gMSkqNCArIDBdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5JbWFnZURhdGEuZGF0YVtqKjQgKyAxXSA9IGltYWdlRGF0YS5kYXRhWyhqIC0gMSkqNCArIDFdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5JbWFnZURhdGEuZGF0YVtqKjQgKyAyXSA9IGltYWdlRGF0YS5kYXRhWyhqIC0gMSkqNCArIDJdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5JbWFnZURhdGEuZGF0YVtqKjQgKyAzXSA9IGltYWdlRGF0YS5kYXRhWyhqIC0gMSkqNCArIDNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3JlbW92ZScpe1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHJhbmRvbUluZGV4OyBqIDwgbnVtUGl4ZWxzOyBqKyspe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5JbWFnZURhdGEuZGF0YVtqKjQgKyAwXSA9IGltYWdlRGF0YS5kYXRhWyhqICsgMSkqNCArIDBdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5JbWFnZURhdGEuZGF0YVtqKjQgKyAxXSA9IGltYWdlRGF0YS5kYXRhWyhqICsgMSkqNCArIDFdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5JbWFnZURhdGEuZGF0YVtqKjQgKyAyXSA9IGltYWdlRGF0YS5kYXRhWyhqICsgMSkqNCArIDJdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5JbWFnZURhdGEuZGF0YVtqKjQgKyAzXSA9IGltYWdlRGF0YS5kYXRhWyhqICsgMSkqNCArIDNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cbiAgICAgICAgXG5cbiAgICAgICAgcmV0dXJuIHJldHVybkltYWdlRGF0YTtcblxuICAgIH1cblxuICAgIGFzeW5jIGdsaXRjaGVkSW1hZ2UoaW1hZ2VGaWxlcGF0aCwgZGlzYWJsZWQpIHtcblxuICAgICAgICBjb25zdCBjYW52YXMgPSBjcmVhdGVDYW52YXModGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IGxvYWRJbWFnZShpbWFnZUZpbGVwYXRoKTtcblxuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpbWFnZURhdGEgPSB0aGlzLmdsaXRjaChjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSwgY3R4LCBkaXNhYmxlZCk7XG4gICAgICAgIGN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTsgXG5cbiAgICAgICAgcmV0dXJuIGNhbnZhcztcblxuICAgIH1cblxuICAgIGFzeW5jIGRyYXdfbmVvbl9nbGl0Y2goKXtcblxuICAgICAgICBjb25zdCBnaWZHZW5lcmF0b3IgPSBuZXcgR2lmR2VuZXJhdG9yKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnNjYWxlKTtcblxuICAgICAgICBjb25zdCBjYW52YXMgPSBjcmVhdGVDYW52YXModGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICBjb25zdCBsYXllckNhbnZhcyA9IGNyZWF0ZUNhbnZhcyh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgICAgIGNvbnN0IGxheWVyc0N0eCA9IGxheWVyQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgY29uc3QgZ0ltYWdlRmlsZXBhdGggPSAnLi9ncmFwaGljLXRvb2xzLWFzc2V0cy9uZW9uLWdsaXRjaC1nLnBuZyc7XG4gICAgICAgIGNvbnN0IG1JbWFnZUZpbGVwYXRoID0gJy4vZ3JhcGhpYy10b29scy1hc3NldHMvbmVvbi1nbGl0Y2gtbS5wbmcnO1xuXG4gICAgICAgIGNvbnN0IG51bUZyYW1lcyA9IDI1O1xuICAgICAgICBjb25zdCBmcmFtZUR1cmF0aW9uID0gMTAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtRnJhbWVzOyBpKyspe1xuXG4gICAgICAgICAgICBsZXQgc2hvdWxkR2xpdGNoID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8qaWYgKE1hdGgucmFuZG9tKCkgPCBnbGl0Y2hGcmVxdWVuY3kpe1xuICAgICAgICAgICAgICAgIHNob3VsZEdsaXRjaCA9IHRydWU7XG4gICAgICAgICAgICB9Ki9cblxuICAgICAgICAgICAgaWYgKChpID49IDkgJiYgaSA8PSAxMikgfHwgKGkgPj0gMjAgJiYgaSA8PSAyMSkpe1xuICAgICAgICAgICAgICAgIHNob3VsZEdsaXRjaCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vY29uc3QgZ0xheWVyID0gTWF0aC5yYW5kb20oKSA+IDAuMTAgPyAnZm9yZWdyb3VuZCcgOiAnYmFja2dyb3VuZCc7XG4gICAgICAgICAgICAvL2NvbnN0IG1MYXllciA9IE1hdGgucmFuZG9tKCkgPiAwLjEwID8gJ2JhY2tncm91bmQnIDogJ2ZvcmVncm91bmQnO1xuXG4gICAgICAgICAgICBjb25zdCBnTGF5ZXIgPSAnZm9yZWdyb3VuZCc7XG4gICAgICAgICAgICBjb25zdCBtTGF5ZXIgPSAnYmFja2dyb3VuZCc7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbGF5ZXIgb2YgdGhpcy5sYXllcnNEYXRhKXtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IHRoaXMuZ2xpdGNoKGxheWVyLmltYWdlRGF0YSwgbGF5ZXJzQ3R4LCAhc2hvdWxkR2xpdGNoKTtcblxuICAgICAgICAgICAgICAgIGxheWVyc0N0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGxheWVyc0N0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTsgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IGxheWVyLmNvbXBvc2l0ZTtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGxheWVyQ2FudmFzLCAwLCAwKTtcblxuICAgICAgICAgICAgICAgIGlmIChsYXllci5uYW1lID09PSAncm9vbScpe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChnTGF5ZXIgPT09ICdiYWNrZ3JvdW5kJyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnSW1hZ2VDYW52YXMgPSBhd2FpdCB0aGlzLmdsaXRjaGVkSW1hZ2UoZ0ltYWdlRmlsZXBhdGgsICFzaG91bGRHbGl0Y2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShnSW1hZ2VDYW52YXMsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1MYXllciA9PT0gJ2JhY2tncm91bmQnKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1JbWFnZUNhbnZhcyA9IGF3YWl0IHRoaXMuZ2xpdGNoZWRJbWFnZShtSW1hZ2VGaWxlcGF0aCwgIXNob3VsZEdsaXRjaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKG1JbWFnZUNhbnZhcywgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGdMYXllciA9PT0gJ2ZvcmVncm91bmQnKXtcbiAgICAgICAgICAgICAgICBjb25zdCBnSW1hZ2VDYW52YXMgPSBhd2FpdCB0aGlzLmdsaXRjaGVkSW1hZ2UoZ0ltYWdlRmlsZXBhdGgsICFzaG91bGRHbGl0Y2gpO1xuICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZ0ltYWdlQ2FudmFzLCAwLCAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1MYXllciA9PT0gJ2ZvcmVncm91bmQnKXtcbiAgICAgICAgICAgICAgICBjb25zdCBtSW1hZ2VDYW52YXMgPSBhd2FpdCB0aGlzLmdsaXRjaGVkSW1hZ2UobUltYWdlRmlsZXBhdGgsICFzaG91bGRHbGl0Y2gpO1xuICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobUltYWdlQ2FudmFzLCAwLCAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIGdpZkdlbmVyYXRvci5hZGRGcmFtZShjdHgsIGZyYW1lRHVyYXRpb24pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBnaWZHZW5lcmF0b3IuZmluaXNoKCk7XG5cbiAgICAgICAgcmV0dXJuIGdpZkdlbmVyYXRvci5nZXRPdXRwdXQoKTtcblxuICAgIH1cblxuXG59IiwiaW1wb3J0IHsgZHJhdyB9IGZyb20gJ2JhdGgtY2x1Yic7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXMsIGxvYWRJbWFnZSB9IGZyb20gJ2NhbnZhcyc7XG5pbXBvcnQgR2lmR2VuZXJhdG9yIGZyb20gJy4vZ2lmLWdlbmVyYXRvci5qcyc7XG5cblxuZXhwb3J0IGNsYXNzIExvbmdCb2lHZW5lcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXMsIGxheWVycywgbGF5ZXJzRm9sZGVyKXtcblxuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAgICAgICB0aGlzLmxheWVycyA9IGxheWVycztcbiAgICAgICAgdGhpcy5sYXllcnNGb2xkZXIgPSBsYXllcnNGb2xkZXJcblxuICAgICAgICB0aGlzLndpZHRoID0gNDg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gNDg7XG5cbiAgICAgICAgdGhpcy5zY2FsZSA9IDg7XG5cbiAgICAgICAgLy9kcmF3IGxheWVycyBzZXBhcmF0ZWx5XG4gICAgICAgIHRoaXMubGF5ZXJzRGF0YTtcblxuICAgIH1cblxuICAgIGFzeW5jIGRyYXdMYXllcnMoKXtcblxuICAgICAgICB0aGlzLmxheWVyc0RhdGEgPSBhd2FpdCBkcmF3KHRoaXMucHJvcGVydGllcywgdGhpcy5sYXllcnMsIHRoaXMubGF5ZXJzRm9sZGVyLCB0cnVlKTtcblxuICAgIH1cblxuICAgIHVwc2NhbGUoY2FudmFzLCBzY2FsZSl7XG4gICAgICAgIGNvbnN0IHVwc2NhbGVkQ2FudmFzID0gY3JlYXRlQ2FudmFzKHRoaXMud2lkdGgqc2NhbGUsIHRoaXMuaGVpZ2h0KnNjYWxlKTtcbiAgICAgICAgY29uc3QgY3R4ID0gdXBzY2FsZWRDYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuICAgICAgICBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG5cbiAgICAgICAgY3R4LnNjYWxlKHRoaXMuc2NhbGUsIHRoaXMuc2NhbGUpO1xuICAgICAgICBjdHguZHJhd0ltYWdlKGNhbnZhcywgMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgICAgIHJldHVybiB1cHNjYWxlZENhbnZhcztcblxuICAgIH1cblxuICAgIHN0cmV0Y2hOZWNrKGN0eCwgaW1hZ2VEYXRhLCBuZWNrU2l6ZSwgYWRkSGVpZ2h0KXtcblxuICAgICAgICBsZXQgbmV3SW1hZ2VEYXRhID0gY3R4LmNyZWF0ZUltYWdlRGF0YSh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCArIGFkZEhlaWdodCk7XG5cbiAgICAgICAgY29uc3QgbGluZVkgPSAyMTtcblxuICAgICAgICBmb3IgKGxldCB5ID0gLWFkZEhlaWdodDsgeSA8IHRoaXMuaGVpZ2h0ICsgYWRkSGVpZ2h0OyB5Kyspe1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4Kyspe1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSAoKHkgKyBhZGRIZWlnaHQpKnRoaXMud2lkdGggKyB4KSo0O1xuXG4gICAgICAgICAgICAgICAgaWYgKHkgPCBsaW5lWSAtIG5lY2tTaXplICl7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0SW5kZXggPSAoKHkgKyBuZWNrU2l6ZSkqdGhpcy53aWR0aCArIHgpKjQ7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3SW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAwXSA9IGltYWdlRGF0YS5kYXRhW29mZnNldEluZGV4ICsgMF07IC8vclxuICAgICAgICAgICAgICAgICAgICBuZXdJbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0SW5kZXggKyAxXTsgLy9nXG4gICAgICAgICAgICAgICAgICAgIG5ld0ltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSBpbWFnZURhdGEuZGF0YVtvZmZzZXRJbmRleCArIDJdOyAvL2JcbiAgICAgICAgICAgICAgICAgICAgbmV3SW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IGltYWdlRGF0YS5kYXRhW29mZnNldEluZGV4ICsgM107IC8vYVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh5IDw9IGxpbmVZICYmIHkgPj0gbGluZVkgLSBuZWNrU2l6ZSl7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0SW5kZXggPSAoKGxpbmVZKSp0aGlzLndpZHRoICsgeCkqNDtcblxuICAgICAgICAgICAgICAgICAgICBuZXdJbWFnZURhdGEuZGF0YVtpbmRleCArIDBdID0gaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0SW5kZXggKyAwXTsgLy9yXG4gICAgICAgICAgICAgICAgICAgIG5ld0ltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSBpbWFnZURhdGEuZGF0YVtvZmZzZXRJbmRleCArIDFdOyAvL2dcbiAgICAgICAgICAgICAgICAgICAgbmV3SW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IGltYWdlRGF0YS5kYXRhW29mZnNldEluZGV4ICsgMl07IC8vYlxuICAgICAgICAgICAgICAgICAgICBuZXdJbWFnZURhdGEuZGF0YVtpbmRleCArIDNdID0gaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0SW5kZXggKyAzXTsgLy9hXG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldEluZGV4ID0gKCh5KSp0aGlzLndpZHRoICsgeCkqNDtcblxuICAgICAgICAgICAgICAgICAgICBuZXdJbWFnZURhdGEuZGF0YVtpbmRleCArIDBdID0gaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0SW5kZXggKyAwXTsgLy9yXG4gICAgICAgICAgICAgICAgICAgIG5ld0ltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSBpbWFnZURhdGEuZGF0YVtvZmZzZXRJbmRleCArIDFdOyAvL2dcbiAgICAgICAgICAgICAgICAgICAgbmV3SW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IGltYWdlRGF0YS5kYXRhW29mZnNldEluZGV4ICsgMl07IC8vYlxuICAgICAgICAgICAgICAgICAgICBuZXdJbWFnZURhdGEuZGF0YVtpbmRleCArIDNdID0gaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0SW5kZXggKyAzXTsgLy9hXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3SW1hZ2VEYXRhO1xuICAgIH1cblxuICAgIGFzeW5jIGRyYXdMb25nKG5lY2tTaXplID0gOSwgZ20gPSB0cnVlKXtcblxuICAgICAgICBjb25zdCBjYW52YXMgPSBjcmVhdGVDYW52YXModGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICBjb25zdCBsYXllckNhbnZhcyA9IGNyZWF0ZUNhbnZhcyh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgICAgIGNvbnN0IGxheWVyc0N0eCA9IGxheWVyQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgY29uc3Qgb2Zmc2V0QWxsID0gNTtcblxuICAgICAgICBsZXQgYmFja2dyb3VuZERyYXduID0gZmFsc2U7XG5cbiAgICAgICAgZm9yIChjb25zdCBsYXllciBvZiB0aGlzLmxheWVyc0RhdGEpe1xuXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuXG4gICAgICAgICAgICBsZXQgaW1hZ2VEYXRhID0gbGF5ZXIuaW1hZ2VEYXRhO1xuXG4gICAgICAgICAgICBpZiAoWydib2R5JywgJ3Bvd2VyJywgJ2dsb3cnXS5pbmNsdWRlcyhsYXllci5uYW1lKSl7XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhID0gdGhpcy5zdHJldGNoTmVjayhjdHgsIGltYWdlRGF0YSwgbmVja1NpemUsIG9mZnNldEFsbCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFbJ3Jvb20nLCAnZGVjb3JhdGlvbiddLmluY2x1ZGVzKGxheWVyLm5hbWUpIHx8IChsYXllci5uYW1lID09PSAncm9vbScgJiYgYmFja2dyb3VuZERyYXduKSl7XG4gICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgwLCBvZmZzZXRBbGwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobGF5ZXIubmFtZSA9PT0gJ3Jvb20nKXtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kRHJhd24gPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoWydtb3V0aCcsICdiZWFyZCcsICdleWVzJywgJ2hlYWQnXS5pbmNsdWRlcyhsYXllci5uYW1lKSl7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoMCwgLW5lY2tTaXplKTtcbiAgICAgICAgICAgICAgICAvL2N0eC5nbG9iYWxBbHBoYSA9IDBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGF5ZXJzQ3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG5cbiAgICAgICAgICAgIGxheWVyc0N0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTsgXG4gICAgICAgICAgIFxuICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IGxheWVyLmNvbXBvc2l0ZTtcblxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShsYXllckNhbnZhcywgMCwgMCk7XG5cbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ20pe1xuICAgICAgICAgICAgY29uc3QgZ21CdWJibGUgPSBhd2FpdCBsb2FkSW1hZ2UoJy4vZ3JhcGhpYy10b29scy1hc3NldHMvYmFzaWMtMy5wbmcnKTtcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZ21CdWJibGUsIDEsIC1uZWNrU2l6ZSArIDcpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY3R4O1xuXG4gICAgfVxuXG4gICAgYXN5bmMgZHJhd0xvbmdQTkcobmVja1NpemUgPSAxMCwgZ20gPSBmYWxzZSl7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5kcmF3TGF5ZXJzKCk7XG5cbiAgICAgICAgY29uc3QgY3R4ID0gYXdhaXQgdGhpcy5kcmF3TG9uZyhuZWNrU2l6ZSwgZ20pXG4gICAgICAgIHJldHVybiB0aGlzLnVwc2NhbGUoY3R4LmNhbnZhcywgdGhpcy5zY2FsZSk7XG5cbiAgICB9XG5cbiAgICBhc3luYyBkcmF3TG9uZ0dpZihuZWNrU2l6ZSA9IDEwLCBnbSA9IGZhbHNlKXtcblxuICAgICAgICBjb25zdCBnaWZHZW5lcmF0b3IgPSBuZXcgR2lmR2VuZXJhdG9yKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnNjYWxlKTtcblxuICAgICAgICBsZXQgZnJhbWVEdXJhdGlvbiA9IDcwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmVja1NpemUqMjsgaSsrKXtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kcmF3TGF5ZXJzKCk7XG5cbiAgICAgICAgICAgIGxldCBzaXplID0gaTtcbiAgICAgICAgICAgIGlmIChpID4gbmVja1NpemUpe1xuICAgICAgICAgICAgICAgIHNpemUgPSBuZWNrU2l6ZSAtIChpIC0gbmVja1NpemUpXG4gICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IGF3YWl0IHRoaXMuZHJhd0xvbmcoc2l6ZSwgZ20pXG5cbiAgICAgICAgICAgIGdpZkdlbmVyYXRvci5hZGRGcmFtZShjdHgsIGZyYW1lRHVyYXRpb24pXG5cbiAgICAgICAgfVxuXG4gICAgICAgIGdpZkdlbmVyYXRvci5maW5pc2goKTtcblxuICAgICAgICByZXR1cm4gZ2lmR2VuZXJhdG9yLmdldE91dHB1dCgpO1xuXG4gICAgfVxufSJdLCJuYW1lcyI6WyJHSUZFbmNvZGVyIiwicXVhbnRpemUiLCJhcHBseVBhbGV0dGUiLCJnaWZlbmMiLCJHaWZHZW5lcmF0b3IiLCJjb25zdHJ1Y3RvciIsIndpZHRoIiwiaGVpZ2h0Iiwic2NhbGUiLCJ0aGlzIiwiZ2lmRW5jb2RlciIsImFkZEZyYW1lIiwiY3R4IiwiZGVsYXkiLCJkYXRhIiwiZ2V0SW1hZ2VEYXRhIiwicGFsZXR0ZSIsImNhbnZhcyIsIk1hdGgiLCJyb3VuZCIsInNjYWxlQ3R4IiwiZ2V0Q29udGV4dCIsImltYWdlU21vb3RoaW5nRW5hYmxlZCIsImRyYXdJbWFnZSIsImltYWdlRGF0YSIsImluZGV4Iiwid3JpdGVGcmFtZSIsImZpbmlzaCIsImdldE91dHB1dCIsImJ5dGVzIiwiR21HZW5lcmF0b3IiLCJsYXllcnNEYXRhIiwidHlwZXMiLCJhc3luYyIsInByb3BlcnRpZXMiLCJsYXllcnMiLCJsYXllcnNGb2xkZXIiLCJnaWZHZW5lcmF0b3IiLCJsYXllckNhbnZhcyIsImxheWVyc0N0eCIsImJ1YmJsZUltYWdlcyIsImkiLCJidWJibGVJbWFnZUZpbGVwYXRoIiwibGF5ZXIiLCJjbGVhclJlY3QiLCJwdXRJbWFnZURhdGEiLCJnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24iLCJjb21wb3NpdGUiLCJzYXZlIiwiaW5jbHVkZXMiLCJuYW1lIiwidHJhbnNsYXRlIiwicmVzdG9yZSIsImJ1YmJsZUltYWdlIiwic2hvd2VySW1hZ2VzIiwic2hvd2VySW1hZ2VGaWxlcGF0aCIsImRpZERyYXdTaG93ZXIiLCJzaG93ZXJJbWFnZSIsInN1bnJpc2VJbWFnZXMiLCJiYWNrZ3JvdW5kIiwiZm9yZWdyb3VuZCIsImR1cmF0aW9uIiwic3VucmlzZUltYWdlSW5mbyIsInN1bnJpc2VJbWFnZSIsImdsaXRjaCIsImRpc2FibGVkIiwibnVtUGl4ZWxzIiwibGVuZ3RoIiwicmV0dXJuSW1hZ2VEYXRhIiwiY3JlYXRlSW1hZ2VEYXRhIiwic2V0IiwicmFuZG9tSW5kZXgiLCJmbG9vciIsInJhbmRvbSIsInR5cGUiLCJqIiwiaW1hZ2VGaWxlcGF0aCIsImltYWdlIiwiZ0ltYWdlRmlsZXBhdGgiLCJtSW1hZ2VGaWxlcGF0aCIsInNob3VsZEdsaXRjaCIsImdMYXllciIsIm1MYXllciIsImdJbWFnZUNhbnZhcyIsImdsaXRjaGVkSW1hZ2UiLCJtSW1hZ2VDYW52YXMiLCJMb25nQm9pR2VuZXJhdG9yIiwidXBzY2FsZSIsInVwc2NhbGVkQ2FudmFzIiwic3RyZXRjaE5lY2siLCJuZWNrU2l6ZSIsImFkZEhlaWdodCIsIm5ld0ltYWdlRGF0YSIsInkiLCJ4Iiwib2Zmc2V0SW5kZXgiLCJnbSIsImJhY2tncm91bmREcmF3biIsImdtQnViYmxlIiwiZHJhd0xheWVycyIsImRyYXdMb25nIiwic2l6ZSJdLCJzb3VyY2VSb290IjoiIn0=