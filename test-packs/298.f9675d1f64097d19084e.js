"use strict";(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[298,998],{6998:(t,e,a)=>{a.r(e),a.d(e,{BasePage:()=>s});class s{constructor(t,e,a,s){this.walletConnect=t,this.algodClient=a,this.algoIndexer=s,this.holdings=e}}},5298:(t,e,a)=>{a.r(e),a.d(e,{Packs:()=>h,loadPacks:()=>c});var s=a(6998),i=a(7304),n=a(4050),o=a(4393);const r="https://api.atomixwap.xyz";async function c(t){let e=await fetch(`${r}/caffeine-card-pack/get-all`);if(200===e.status){let a=await e.json();const s=t.bathers.nfts.map((t=>t.assetId));let i=[];for(const t of a.packs)s.includes(t[0])&&i.push(t);return{claimablePacks:i,escrowAddress:a.escrowAddress}}throw new Error(`Can't load packs. Error ${e.status}`)}class h extends s.BasePage{constructor(){super(...arguments),this.ui=document.createElement("div"),this.ui.innerHTML='\n    <h1>Caffeine Cards Packs</h1>\n    <p id="packs-status" class="dark-text text-center">Loading packs...</p>\n    ',this.claimablePacks,this.escrowAddress,this.fetchPacks()}sleep(t){return new Promise((e=>setTimeout(e,t)))}async fetchPacks(){const t=this.ui.querySelector("#packs-status");try{const e=await c(this.holdings);if(this.claimablePacks=e.claimablePacks,this.escrowAddress=e.escrowAddress,this.claimablePacks.length>0){let e="";this.claimablePacks.length>1&&(e="s"),t.textContent=`${this.claimablePacks.length} pack${e} to claim!`}else t.innerHTML='<img src="assets/pack0-0.png" style="width: 240px; opacity: 0.2;" class="mb-3"><br>\n        No pack to open.<br>\n        Make sure Bathers are not listed on marketplaces to see your packs.<br><br>\n        A Caffeine Card is given for every Bather bought in the <a href="https://instantshuffle.com/shuffle/yUSbzq61ZvqTIsSvLycS" target="_blank">Instant Shuffle.</a>\n        ';const a=document.createElement("div");a.className="row row-cols-2 row-cols-md-3 row-cols-lg-4 gy-4 mb-5 justify-content-center",this.ui.append(a);for(const t of this.claimablePacks){const e=document.createElement("div");e.className="col text-center ps-3 pe-3",a.append(e);const s=document.createElement("canvas");s.className="w-100 mb-0";const i=new l(s,t[1],this.algoIndexer);e.append(s),await i.load().then((()=>{const a=document.createElement("div");a.className="dark-text mt-0 pt-0 mb-2 hidden-pack-name",a.style.opacity="0",a.style["max-height"]="0",a.textContent=i.nft.name,e.append(a);const s=document.createElement("button");s.className="open-pack-button",s.textContent="Open",s.dataset.batherId=t[0],s.dataset.caffeineCardId=t[1],s.addEventListener("click",this.openPack.bind(this,i,a),!1),e.append(s)})).catch((t=>{console.log(t)})),this.sleep(300)}}catch(e){console.error(e),t.textContent=e.message}}disableAllButtons(t){this.ui.querySelectorAll(".open-pack-button").forEach((e=>{e===t||e.dataset.opened||(e.className="open-pack-button soft-disabled",e.disabled=!0)}))}enableAllButtons(t){this.ui.querySelectorAll(".open-pack-button").forEach((e=>{e===t||e.dataset.opened||(e.className="open-pack-button",e.disabled=!1)}))}async openPack(t,e,a){const s=a.currentTarget;this.disableAllButtons(s);const i=s.dataset.batherId,o=s.dataset.caffeineCardId;try{s.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>',s.disabled=!0;let a=await this.algodClient.getTransactionParams().do(),c=[n.makeAssetTransferTxnWithSuggestedParamsFromObject({from:this.walletConnect.walletAddress,to:this.walletConnect.walletAddress,amount:0,assetIndex:parseInt(o),suggestedParams:a}),n.makeAssetTransferTxnWithSuggestedParamsFromObject({from:this.escrowAddress,to:this.walletConnect.walletAddress,amount:1,assetIndex:parseInt(o),suggestedParams:a})];n.assignGroupID(c);const h=await this.walletConnect.signTransactions(c),l={batherId:i,txn:btoa(String.fromCharCode.apply(null,h[0])),suggestedParams:a};this.sleep(100),s.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n      Opening...',s.disabled=!0;const d=await fetch(r+"/caffeine-card-pack/claim/",{method:"POST",body:JSON.stringify(l),headers:{Accept:"application/json","Content-Type":"application/json"}});if(200!==d.status){let t;try{t=await d.json()}catch(t){}throw t&&t.error?new Error(t.error):new Error(`Error ${d.status}`)}s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">\n        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>\n      </svg>\n        Opened',s.disabled=!0,s.dataset.opened=!0,t.animate(),e.style.opacity="1",e.style["max-height"]="500px",this.enableAllButtons(s)}catch(t){console.error(t),alert(t.message),s.textContent="Open",s.disabled=!1,this.enableAllButtons(s)}}}class l{constructor(t,e,a){this.caffeineCardId=e,this.algoIndexer=a,this.width=660,this.height=960,this.imageWidth=960,this.numAnimationImage=4,this.canvas=t,this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.context.translate(-(this.imageWidth-this.width)/2,0),this.nft,this.cardImage,this.cardMask,this.animationImages}async load(){await this.loadAllImage()}static loadImage(t){return new Promise(((e,a)=>{const s=new Image;s.onload=()=>{e(s)},s.onerror=a,s.src=t}))}async loadAllImage(){this.animationImages=[];const t=this.caffeineCardId%4,e=await l.loadImage(`assets/pack${t}-0.png`);this.animationImages.push(e),this.drawPack(),this.cardMask=await l.loadImage("assets/card-mask.png");const a=await this.algoIndexer.lookupAssetByID(this.caffeineCardId).do();this.nft=new i.Sm(this.caffeineCardId,a.asset),await this.nft.load(this.algoIndexer);try{this.cardImage=await l.loadImage(this.nft.imageUrl)}catch(t){console.log("Error loading image from primary, trying secondary");try{this.cardImage=await l.loadImage(this.nft.imageUrlAlternate)}catch(t){this.cardImage=await l.loadImage("assets/empty-card.png")}}for(let e=1;e<=this.numAnimationImage;e++){const a=await l.loadImage(`assets/pack${t}-${e}.png`);this.animationImages.push(a)}}async drawPack(){this.context.drawImage(this.animationImages[0],0,0,this.imageWidth,this.height)}static easeInOutQuad(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}async animate(){let t=.15,e=1;const a=setInterval((()=>{if(this.context.clearRect(0,0,this.imageWidth,this.height),this.context.drawImage(this.cardMask,0,0,this.imageWidth,this.height),this.context.globalCompositeOperation="source-in",this.context.drawImage(this.cardImage,0,0,this.imageWidth,this.height),this.context.globalCompositeOperation="source-over",this.context.drawImage(this.animationImages[e],0,0,this.imageWidth,this.height),e===this.numAnimationImage){clearInterval(a),o.sparkles(this.canvas),t=.05;const e=.8;let s=0;const i=setInterval((()=>{const a=l.easeInOutQuad(s/e)*this.height;this.context.clearRect(0,0,this.imageWidth,this.height),this.context.drawImage(this.cardMask,0,0,this.imageWidth,this.height),this.context.globalCompositeOperation="source-in",this.context.drawImage(this.cardImage,0,0,this.imageWidth,this.height),this.context.globalCompositeOperation="source-over",this.context.drawImage(this.animationImages[this.numAnimationImage],0,a,this.imageWidth,this.height),s+=t,s>=e&&clearInterval(i)}),1e3*t)}e++}),1e3*t)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNQyxFQUFjTixhQUFZLEtBRTlCLE1BQU1PLEVBQVV4RyxFQUFxQnlHLGNBQWNILEVBQVlELEdBQW1CbEosS0FBSzJHLE9BR3ZGM0csS0FBSzhHLFFBQVFpQyxVQUFVLEVBQUcsRUFBRy9JLEtBQUs0RyxXQUFZNUcsS0FBSzJHLFFBR25EM0csS0FBSzhHLFFBQVF5QixVQUFVdkksS0FBS21ILFNBQVUsRUFBRyxFQUFHbkgsS0FBSzRHLFdBQVk1RyxLQUFLMkcsUUFFbEUzRyxLQUFLOEcsUUFBUWtDLHlCQUEyQixZQUd4Q2hKLEtBQUs4RyxRQUFReUIsVUFBVXZJLEtBQUtrSCxVQUFXLEVBQUcsRUFBR2xILEtBQUs0RyxXQUFZNUcsS0FBSzJHLFFBRW5FM0csS0FBSzhHLFFBQVFrQyx5QkFBMkIsY0FHeENoSixLQUFLOEcsUUFBUXlCLFVBQVV2SSxLQUFLb0gsZ0JBQWdCcEgsS0FBSzZHLG1CQUFvQixFQUFHd0MsRUFBU3JKLEtBQUs0RyxXQUFZNUcsS0FBSzJHLFFBRXZHd0MsR0FBZVIsRUFFWFEsR0FBZUQsR0FDakJELGNBQWNHLEVBSWhCLEdBRWUsSUFBZFQsRUFFTCxDQUVBQyxHQUFjLEdBRUMsSUFBZEQsRUFJTCxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZGlvLy4vc3JjL3BhZ2VzL2Jhc2UuanMiLCJ3ZWJwYWNrOi8vc3R1ZGlvLy4vc3JjL3BhZ2VzL3BhY2tzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGNsYXNzIEJhc2VQYWdlIHtcblxuICAgIGNvbnN0cnVjdG9yKHdhbGxldENvbm5lY3QsIGhvbGRpbmdzLCBhbGdvZENsaWVudCwgYWxnb0luZGV4ZXIpe1xuXG4gICAgICAgIHRoaXMud2FsbGV0Q29ubmVjdCA9IHdhbGxldENvbm5lY3Q7XG4gICAgICAgIHRoaXMuYWxnb2RDbGllbnQgPSBhbGdvZENsaWVudDtcbiAgICAgICAgdGhpcy5hbGdvSW5kZXhlciA9IGFsZ29JbmRleGVyO1xuICAgICAgICB0aGlzLmhvbGRpbmdzID0gaG9sZGluZ3M7XG5cbiAgICAgICAgXG5cbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBCYXNlUGFnZSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IE5GVENvbGxlY3Rpb24gfSBmcm9tIFwiYWxnby1uZnQtdXRpbHNcIjtcbmltcG9ydCBhbGdvc2RrIGZyb20gJ2FsZ29zZGsnO1xuaW1wb3J0IHsgTkZUIH0gZnJvbSBcImFsZ28tbmZ0LXV0aWxzXCI7XG5pbXBvcnQgcGFydHkgZnJvbSBcInBhcnR5LWpzXCI7XG5cbmNvbnN0IFBBQ0tTX0FQSV9VUkwgPSBcImh0dHBzOi8vYXBpLmF0b21peHdhcC54eXpcIjtcbi8vY29uc3QgUEFDS1NfQVBJX1VSTCA9IFwiaHR0cHM6Ly9sb2NhbGhvc3RcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRQYWNrcyhob2xkaW5ncykge1xuICBsZXQgcmVzdWx0ID0gYXdhaXQgZmV0Y2goYCR7UEFDS1NfQVBJX1VSTH0vY2FmZmVpbmUtY2FyZC1wYWNrL2dldC1hbGxgKTtcblxuICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgbGV0IGpzb24gPSBhd2FpdCByZXN1bHQuanNvbigpO1xuXG4gICAgLy9jb21wYXJlIHdpdGggaG9sZGluZ3NcbiAgICBjb25zdCBiYXRoZXJzSWRzID0gaG9sZGluZ3MuYmF0aGVycy5uZnRzLm1hcCgobmZ0KSA9PiBuZnQuYXNzZXRJZCk7XG5cbiAgICBsZXQgY2xhaW1hYmxlUGFja3MgPSBbXTtcblxuICAgIGZvciAoY29uc3QgcGFjayBvZiBqc29uLnBhY2tzKSB7XG4gICAgICBpZiAoYmF0aGVyc0lkcy5pbmNsdWRlcyhwYWNrWzBdKSkge1xuICAgICAgICBjbGFpbWFibGVQYWNrcy5wdXNoKHBhY2spO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBjbGFpbWFibGVQYWNrczogY2xhaW1hYmxlUGFja3MsXG4gICAgICBlc2Nyb3dBZGRyZXNzOiBqc29uLmVzY3Jvd0FkZHJlc3MsXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhblxcJ3QgbG9hZCBwYWNrcy4gRXJyb3IgJHtyZXN1bHQuc3RhdHVzfWApO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQYWNrcyBleHRlbmRzIEJhc2VQYWdlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcblxuICAgIHRoaXMudWkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRoaXMudWkuaW5uZXJIVE1MID0gYFxuICAgIDxoMT5DYWZmZWluZSBDYXJkcyBQYWNrczwvaDE+XG4gICAgPHAgaWQ9XCJwYWNrcy1zdGF0dXNcIiBjbGFzcz1cImRhcmstdGV4dCB0ZXh0LWNlbnRlclwiPkxvYWRpbmcgcGFja3MuLi48L3A+XG4gICAgYDtcblxuICAgIHRoaXMuY2xhaW1hYmxlUGFja3M7XG4gICAgdGhpcy5lc2Nyb3dBZGRyZXNzO1xuXG4gICAgdGhpcy5mZXRjaFBhY2tzKCk7XG4gIH1cblxuICBzbGVlcChkZWxheVRpbWUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5VGltZSkpO1xuICB9IFxuXG4gIGFzeW5jIGZldGNoUGFja3MoKSB7XG5cbiAgICBjb25zdCBwYWNrU3RhdHVzUCA9IHRoaXMudWkucXVlcnlTZWxlY3RvcihcIiNwYWNrcy1zdGF0dXNcIik7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbG9hZFBhY2tzKHRoaXMuaG9sZGluZ3MpO1xuXG4gICAgICB0aGlzLmNsYWltYWJsZVBhY2tzID0gcmVzdWx0LmNsYWltYWJsZVBhY2tzO1xuICAgICAgdGhpcy5lc2Nyb3dBZGRyZXNzID0gcmVzdWx0LmVzY3Jvd0FkZHJlc3M7XG5cbiAgICAgIGlmICh0aGlzLmNsYWltYWJsZVBhY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IHBsdXJhbCA9ICcnO1xuICAgICAgICBpZiAodGhpcy5jbGFpbWFibGVQYWNrcy5sZW5ndGggPiAxKXtcbiAgICAgICAgICBwbHVyYWwgPSAncyc7XG4gICAgICAgIH1cbiAgICAgICAgcGFja1N0YXR1c1AudGV4dENvbnRlbnQgPSBgJHt0aGlzLmNsYWltYWJsZVBhY2tzLmxlbmd0aH0gcGFjayR7cGx1cmFsfSB0byBjbGFpbSFgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFja1N0YXR1c1AuaW5uZXJIVE1MID0gYDxpbWcgc3JjPVwiYXNzZXRzL3BhY2swLTAucG5nXCIgc3R5bGU9XCJ3aWR0aDogMjQwcHg7IG9wYWNpdHk6IDAuMjtcIiBjbGFzcz1cIm1iLTNcIj48YnI+XG4gICAgICAgIE5vIHBhY2sgdG8gb3Blbi48YnI+XG4gICAgICAgIE1ha2Ugc3VyZSBCYXRoZXJzIGFyZSBub3QgbGlzdGVkIG9uIG1hcmtldHBsYWNlcyB0byBzZWUgeW91ciBwYWNrcy48YnI+PGJyPlxuICAgICAgICBBIENhZmZlaW5lIENhcmQgaXMgZ2l2ZW4gZm9yIGV2ZXJ5IEJhdGhlciBib3VnaHQgaW4gdGhlIDxhIGhyZWY9XCJodHRwczovL2luc3RhbnRzaHVmZmxlLmNvbS9zaHVmZmxlL3lVU2J6cTYxWnZxVElzU3ZMeWNTXCIgdGFyZ2V0PVwiX2JsYW5rXCI+SW5zdGFudCBTaHVmZmxlLjwvYT5cbiAgICAgICAgYDtcbiAgICAgIH1cblxuICAgICAgLy9kaXNwbGF5IHBhY2sgbGlzdFxuICAgICAgY29uc3QgcGFja3NEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgcGFja3NEaXYuY2xhc3NOYW1lID1cbiAgICAgICAgXCJyb3cgcm93LWNvbHMtMiByb3ctY29scy1tZC0zIHJvdy1jb2xzLWxnLTQgZ3ktNCBtYi01IGp1c3RpZnktY29udGVudC1jZW50ZXJcIjtcbiAgICAgIHRoaXMudWkuYXBwZW5kKHBhY2tzRGl2KTtcblxuICAgICAgZm9yIChjb25zdCBwYWNrIG9mIHRoaXMuY2xhaW1hYmxlUGFja3MpIHtcbiAgICAgICAgY29uc3QgcGFja0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHBhY2tEaXYuY2xhc3NOYW1lID0gXCJjb2wgdGV4dC1jZW50ZXIgcHMtMyBwZS0zXCI7XG4gICAgICAgIHBhY2tzRGl2LmFwcGVuZChwYWNrRGl2KTtcblxuICAgICAgICAvKmNvbnN0IGdyYXBoaWNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBncmFwaGljRGl2LmNsYXNzTmFtZSA9ICcnO1xuICAgICAgICBncmFwaGljRGl2LmlubmVySFRNTCA9IGA8aW1nIHNyYz1cImFzc2V0cy9wYWNrMC5wbmdcIiBjbGFzcz1cInctMTAwIG1iLTJcIj5gO1xuICAgICAgICBwYWNrRGl2LmFwcGVuZChncmFwaGljRGl2KTsqL1xuXG4gICAgICAgIGNvbnN0IHBhY2tDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICBwYWNrQ2FudmFzLmNsYXNzTmFtZSA9ICd3LTEwMCBtYi0wJztcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBQYWNrQ2FudmFzQ29udHJvbGxlcihwYWNrQ2FudmFzLCBwYWNrWzFdLCB0aGlzLmFsZ29JbmRleGVyKTtcbiAgICAgICAgcGFja0Rpdi5hcHBlbmQocGFja0NhbnZhcyk7XG5cbiAgICAgICAgYXdhaXQgY29udHJvbGxlci5sb2FkKCkudGhlbigoKSA9PiB7XG5cbiAgICAgICAgICBjb25zdCBoaWRkZW5OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICBoaWRkZW5OYW1lLmNsYXNzTmFtZSA9IFwiZGFyay10ZXh0IG10LTAgcHQtMCBtYi0yIGhpZGRlbi1wYWNrLW5hbWVcIjtcbiAgICAgICAgICBoaWRkZW5OYW1lLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgICAgaGlkZGVuTmFtZS5zdHlsZVsnbWF4LWhlaWdodCddID0gJzAnO1xuICAgICAgICAgIC8vaGlkZGVuTmFtZS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICAgIGhpZGRlbk5hbWUudGV4dENvbnRlbnQgPSBjb250cm9sbGVyLm5mdC5uYW1lO1xuICAgICAgICAgIHBhY2tEaXYuYXBwZW5kKGhpZGRlbk5hbWUpO1xuXG4gICAgICAgICAgY29uc3Qgb3BlbkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgb3BlbkJ1dHRvbi5jbGFzc05hbWUgPSBcIm9wZW4tcGFjay1idXR0b25cIlxuICAgICAgICAgIG9wZW5CdXR0b24udGV4dENvbnRlbnQgPSBcIk9wZW5cIjtcbiAgICAgICAgICBvcGVuQnV0dG9uLmRhdGFzZXQuYmF0aGVySWQgPSBwYWNrWzBdO1xuICAgICAgICAgIG9wZW5CdXR0b24uZGF0YXNldC5jYWZmZWluZUNhcmRJZCA9IHBhY2tbMV07XG4gICAgICAgICAgb3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5vcGVuUGFjay5iaW5kKHRoaXMsIGNvbnRyb2xsZXIsIGhpZGRlbk5hbWUpLCBmYWxzZSk7XG4gICAgICAgICAgcGFja0Rpdi5hcHBlbmQob3BlbkJ1dHRvbik7XG5cbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2xlZXAoMzAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcblxuICAgICAgcGFja1N0YXR1c1AudGV4dENvbnRlbnQgPSBlcnIubWVzc2FnZTtcbiAgICAgIC8vYWxlcnQoZXJyLm1lc3NhZ2UpO1xuICAgIH1cblxuICB9XG5cbiAgZGlzYWJsZUFsbEJ1dHRvbnMoZXhjZXB0KXtcblxuICAgIGNvbnN0IGJ1dHRvbnMgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcGVuLXBhY2stYnV0dG9uJyk7XG4gICAgXG4gICAgYnV0dG9ucy5mb3JFYWNoKGIgPT4ge1xuXG4gICAgICBpZiAoYiAhPT0gZXhjZXB0ICYmICFiLmRhdGFzZXQub3BlbmVkKXtcbiAgICAgICAgYi5jbGFzc05hbWUgPSBcIm9wZW4tcGFjay1idXR0b24gc29mdC1kaXNhYmxlZFwiO1xuICAgICAgICBiLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlQWxsQnV0dG9ucyhleGNlcHQpe1xuXG4gICAgY29uc3QgYnV0dG9ucyA9IHRoaXMudWkucXVlcnlTZWxlY3RvckFsbCgnLm9wZW4tcGFjay1idXR0b24nKTtcbiAgICBcbiAgICBidXR0b25zLmZvckVhY2goYiA9PiB7XG5cbiAgICAgIGlmIChiICE9PSBleGNlcHQgJiYgIWIuZGF0YXNldC5vcGVuZWQpe1xuICAgICAgICBiLmNsYXNzTmFtZSA9IFwib3Blbi1wYWNrLWJ1dHRvblwiO1xuICAgICAgICBiLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICAgIFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgb3BlblBhY2socGFja0NhbnZhc0NvbnRyb2xsZXIsIGhpZGRlbk5hbWUsIGV2ZW50KSB7XG5cbiAgICBjb25zdCBjYWxsaW5nQnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldDsgXG5cbiAgICB0aGlzLmRpc2FibGVBbGxCdXR0b25zKGNhbGxpbmdCdXR0b24pO1xuXG4gICAgY29uc3QgYmF0aGVySWQgPSBjYWxsaW5nQnV0dG9uLmRhdGFzZXQuYmF0aGVySWQ7XG4gICAgY29uc3QgY2FmZmVpbmVDYXJkSWQgPSBjYWxsaW5nQnV0dG9uLmRhdGFzZXQuY2FmZmVpbmVDYXJkSWQ7XG5cbiAgICB0cnkge1xuXG4gICAgICBjYWxsaW5nQnV0dG9uLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLXNtXCIgcm9sZT1cInN0YXR1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj5gO1xuICAgICAgY2FsbGluZ0J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgIGxldCBzdWdnZXN0ZWRQYXJhbXMgPSBhd2FpdCB0aGlzLmFsZ29kQ2xpZW50LmdldFRyYW5zYWN0aW9uUGFyYW1zKCkuZG8oKTtcblxuICAgICAgLy9wcmVwYXJlIG9wdGluIHR4blxuICAgICAgbGV0IG9wdGluVHhuID1cbiAgICAgIGFsZ29zZGsubWFrZUFzc2V0VHJhbnNmZXJUeG5XaXRoU3VnZ2VzdGVkUGFyYW1zRnJvbU9iamVjdCh7XG4gICAgICAgIGZyb206IHRoaXMud2FsbGV0Q29ubmVjdC53YWxsZXRBZGRyZXNzLFxuICAgICAgICB0bzogdGhpcy53YWxsZXRDb25uZWN0LndhbGxldEFkZHJlc3MsXG4gICAgICAgIGFtb3VudDogMCxcbiAgICAgICAgYXNzZXRJbmRleDogcGFyc2VJbnQoY2FmZmVpbmVDYXJkSWQpLFxuICAgICAgICBzdWdnZXN0ZWRQYXJhbXM6IHN1Z2dlc3RlZFBhcmFtcyxcbiAgICAgIH0pO1xuXG4gICAgLy9wcmVwYXJlIHRyYW5zZmVyIHR4blxuICAgIGxldCB0cmFuc2ZlclR4biA9XG4gICAgICBhbGdvc2RrLm1ha2VBc3NldFRyYW5zZmVyVHhuV2l0aFN1Z2dlc3RlZFBhcmFtc0Zyb21PYmplY3Qoe1xuICAgICAgICBmcm9tOiB0aGlzLmVzY3Jvd0FkZHJlc3MsXG4gICAgICAgIHRvOiB0aGlzLndhbGxldENvbm5lY3Qud2FsbGV0QWRkcmVzcyxcbiAgICAgICAgYW1vdW50OiAxLFxuICAgICAgICBhc3NldEluZGV4OiBwYXJzZUludChjYWZmZWluZUNhcmRJZCksXG4gICAgICAgIHN1Z2dlc3RlZFBhcmFtczogc3VnZ2VzdGVkUGFyYW1zLFxuICAgICAgfSk7XG5cbiAgICAgIGxldCBhbGxUeG5zID0gW29wdGluVHhuLCB0cmFuc2ZlclR4bl07XG4gICAgICBhbGdvc2RrLmFzc2lnbkdyb3VwSUQoYWxsVHhucyk7XG5cbiAgICAgIGNvbnN0IHNpZ25lZFR4bnMgPSBhd2FpdCB0aGlzLndhbGxldENvbm5lY3Quc2lnblRyYW5zYWN0aW9ucyhhbGxUeG5zKTtcblxuICAgICAgY29uc3Qgc2lnbmVkVHhuSnNvbiA9IHtcbiAgICAgICAgYmF0aGVySWQ6IGJhdGhlcklkLFxuICAgICAgICB0eG46IGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBzaWduZWRUeG5zWzBdKSksXG4gICAgICAgIHN1Z2dlc3RlZFBhcmFtczogc3VnZ2VzdGVkUGFyYW1zXG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2xlZXAoMTAwKTtcbiAgICAgIFxuICAgICAgY2FsbGluZ0J1dHRvbi5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJzcGlubmVyLWJvcmRlciBzcGlubmVyLWJvcmRlci1zbVwiIHJvbGU9XCJzdGF0dXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+XG4gICAgICBPcGVuaW5nLi4uYDtcbiAgICAgIGNhbGxpbmdCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXG4gICAgICAvL2NhbGwgYXBpXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFBBQ0tTX0FQSV9VUkwgKyBcIi9jYWZmZWluZS1jYXJkLXBhY2svY2xhaW0vXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc2lnbmVkVHhuSnNvbiksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cblxuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcblxuICAgICAgICAvL2NvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgY2FsbGluZ0J1dHRvbi5pbm5lckhUTUwgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGNsYXNzPVwiYmkgYmktY2hlY2stY2lyY2xlLWZpbGxcIiB2aWV3Qm94PVwiMCAwIDE2IDE2XCI+XG4gICAgICAgIDxwYXRoIGQ9XCJNMTYgOEE4IDggMCAxIDEgMCA4YTggOCAwIDAgMSAxNiAwem0tMy45Ny0zLjAzYS43NS43NSAwIDAgMC0xLjA4LjAyMkw3LjQ3NyA5LjQxNyA1LjM4NCA3LjMyM2EuNzUuNzUgMCAwIDAtMS4wNiAxLjA2TDYuOTcgMTEuMDNhLjc1Ljc1IDAgMCAwIDEuMDc5LS4wMmwzLjk5Mi00Ljk5YS43NS43NSAwIDAgMC0uMDEtMS4wNXpcIi8+XG4gICAgICA8L3N2Zz5cbiAgICAgICAgT3BlbmVkYDtcbiAgICAgICAgY2FsbGluZ0J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGNhbGxpbmdCdXR0b24uZGF0YXNldC5vcGVuZWQgPSB0cnVlO1xuXG4gICAgICAgIC8vYW5pbWF0ZSBwYWNrIG9wZW5pbmdcbiAgICAgICAgcGFja0NhbnZhc0NvbnRyb2xsZXIuYW5pbWF0ZSgpO1xuXG4gICAgICAgIGhpZGRlbk5hbWUuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgICAgaGlkZGVuTmFtZS5zdHlsZVsnbWF4LWhlaWdodCddID0gJzUwMHB4JztcblxuICAgICAgICB0aGlzLmVuYWJsZUFsbEJ1dHRvbnMoY2FsbGluZ0J1dHRvbik7XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgbGV0IGRhdGE7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9IGNhdGNoKGVycikge31cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmVycm9yKXtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnIpIHtcblxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgYWxlcnQoZXJyLm1lc3NhZ2UpO1xuXG4gICAgICBjYWxsaW5nQnV0dG9uLnRleHRDb250ZW50ID0gXCJPcGVuXCI7XG4gICAgICBjYWxsaW5nQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuZW5hYmxlQWxsQnV0dG9ucyhjYWxsaW5nQnV0dG9uKTtcblxuICAgIH1cblxuICB9XG4gIFxufVxuXG5cbmNsYXNzIFBhY2tDYW52YXNDb250cm9sbGVye1xuXG4gIGNvbnN0cnVjdG9yKGNhbnZhcywgY2FmZmVpbmVDYXJkSWQsIGFsZ29JbmRleGVyKXtcblxuICAgIHRoaXMuY2FmZmVpbmVDYXJkSWQgPSBjYWZmZWluZUNhcmRJZDtcbiAgICB0aGlzLmFsZ29JbmRleGVyID0gYWxnb0luZGV4ZXI7XG5cbiAgICB0aGlzLndpZHRoID0gNjYwO1xuICAgIHRoaXMuaGVpZ2h0ID0gOTYwXG4gICAgdGhpcy5pbWFnZVdpZHRoID0gOTYwO1xuXG4gICAgdGhpcy5udW1BbmltYXRpb25JbWFnZSA9IDQ7XG5cbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cbiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIHRoaXMuY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcblxuICAgIC8vdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICdyZWQnO1xuICAgIC8vdGhpcy5jb250ZXh0LmZpbGxSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblxuICAgIHRoaXMuY29udGV4dC50cmFuc2xhdGUoLSh0aGlzLmltYWdlV2lkdGggLSB0aGlzLndpZHRoKS8yLCAwKTtcblxuICAgIC8vbG9hZCBhbmltYXRpb24gaW1hZ2VzXG4gICAgLy9sb2FkIGNhZmZlaW5lIGNhcmQgaW1hZ2VcblxuICAgIHRoaXMubmZ0O1xuXG4gICAgdGhpcy5jYXJkSW1hZ2U7XG4gICAgdGhpcy5jYXJkTWFzaztcbiAgICB0aGlzLmFuaW1hdGlvbkltYWdlcztcblxuXG4gIH1cblxuICBhc3luYyBsb2FkKCl7XG4gICAgYXdhaXQgdGhpcy5sb2FkQWxsSW1hZ2UoKTtcbiAgfVxuXG4gIHN0YXRpYyBsb2FkSW1hZ2UocGF0aCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cbiAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG5cbiAgICAgIC8vaW1hZ2UuY3Jvc3NPcmlnaW4gPSAnQW5vbnltb3VzJztcblxuICAgICAgaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAgICByZXNvbHZlKGltYWdlKTtcbiAgICAgIH1cblxuICAgICAgaW1hZ2Uub25lcnJvciA9IHJlamVjdFxuXG4gICAgICBpbWFnZS5zcmMgPSBwYXRoO1xuXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGxvYWRBbGxJbWFnZSgpe1xuXG4gICAgdGhpcy5hbmltYXRpb25JbWFnZXMgPSBbXTtcblxuICAgIC8vY2hvb3NlIGEgY29sb3IgcmFuZG9tbHkgZGVwZW5kaW5nIG9uIGNhcmQgYXNzZXQgaWRcbiAgICBjb25zdCBjb2xvckluZGV4ID0gdGhpcy5jYWZmZWluZUNhcmRJZCAlIDQ7XG4gICAgLy9jb25zdCBjb2xvckluZGV4ID0gMDtcblxuICAgIC8vbG9hZCBmaXJzdCBpbWFnZSBhbmQgZGlzcGxheSBpdCBhcyBzb29uIGFzIHBvc3NpYmxlXG4gICAgY29uc3QgaW5pdGlhbEltYWdlID0gYXdhaXQgUGFja0NhbnZhc0NvbnRyb2xsZXIubG9hZEltYWdlKGBhc3NldHMvcGFjayR7Y29sb3JJbmRleH0tMC5wbmdgKTtcbiAgICB0aGlzLmFuaW1hdGlvbkltYWdlcy5wdXNoKGluaXRpYWxJbWFnZSlcbiAgICB0aGlzLmRyYXdQYWNrKCk7XG5cbiAgICAvL2xvYWQgbWFza1xuICAgIHRoaXMuY2FyZE1hc2sgPSBhd2FpdCBQYWNrQ2FudmFzQ29udHJvbGxlci5sb2FkSW1hZ2UoYGFzc2V0cy9jYXJkLW1hc2sucG5nYCk7XG5cbiAgICAvL2xvYWQgbmZ0IGltYWdlXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5hbGdvSW5kZXhlci5sb29rdXBBc3NldEJ5SUQodGhpcy5jYWZmZWluZUNhcmRJZCkuZG8oKTtcbiAgICB0aGlzLm5mdCA9IG5ldyBORlQodGhpcy5jYWZmZWluZUNhcmRJZCwgcmVzdWx0Wydhc3NldCddKTtcbiAgICBhd2FpdCB0aGlzLm5mdC5sb2FkKHRoaXMuYWxnb0luZGV4ZXIpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICB0aGlzLmNhcmRJbWFnZSA9IGF3YWl0IFBhY2tDYW52YXNDb250cm9sbGVyLmxvYWRJbWFnZSh0aGlzLm5mdC5pbWFnZVVybCk7XG4gICAgfSBjYXRjaCAoZXJyKXtcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBsb2FkaW5nIGltYWdlIGZyb20gcHJpbWFyeSwgdHJ5aW5nIHNlY29uZGFyeWApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5jYXJkSW1hZ2UgPSBhd2FpdCBQYWNrQ2FudmFzQ29udHJvbGxlci5sb2FkSW1hZ2UodGhpcy5uZnQuaW1hZ2VVcmxBbHRlcm5hdGUpO1xuICAgICAgfSBjYXRjaCAoZXJyKXtcbiAgICAgICAgdGhpcy5jYXJkSW1hZ2UgPSBhd2FpdCBQYWNrQ2FudmFzQ29udHJvbGxlci5sb2FkSW1hZ2UoJ2Fzc2V0cy9lbXB0eS1jYXJkLnBuZycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vbG9hZCBhbmltYXRpb24gaW1hZ2VzXG4gICAgXG4gICAgXG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0aGlzLm51bUFuaW1hdGlvbkltYWdlOyBpKyspe1xuICAgICAgY29uc3QgYW5pbWF0aW9uSW1hZ2UgPSBhd2FpdCBQYWNrQ2FudmFzQ29udHJvbGxlci5sb2FkSW1hZ2UoYGFzc2V0cy9wYWNrJHtjb2xvckluZGV4fS0ke2l9LnBuZ2ApO1xuICAgICAgdGhpcy5hbmltYXRpb25JbWFnZXMucHVzaChhbmltYXRpb25JbWFnZSk7XG4gICAgfVxuXG4gIH1cblxuICBcblxuICBhc3luYyBkcmF3UGFjaygpe1xuXG4gICAgLy9sb2FkIGltYWdlXG4gICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLmFuaW1hdGlvbkltYWdlc1swXSwgMCwgMCwgdGhpcy5pbWFnZVdpZHRoLCB0aGlzLmhlaWdodCk7XG5cbiAgfVxuXG4gIHN0YXRpYyBlYXNlSW5PdXRRdWFkKHgpIHtcbiAgICByZXR1cm4geCA8IDAuNSA/IDIgKiB4ICogeCA6IDEgLSBNYXRoLnBvdygtMiAqIHggKyAyLCAyKSAvIDI7XG4gIH1cblxuICBhc3luYyBhbmltYXRlKCl7XG5cbiAgICBsZXQgZnJhbWVEdXJhdGlvbiA9IDAuMTU7XG5cbiAgICBsZXQgY3VycmVudEZyYW1lID0gMTtcblxuICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG5cbiAgICAgIC8vY2xlYXIgY29udGV4dFxuICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmltYWdlV2lkdGgsIHRoaXMuaGVpZ2h0KTtcblxuICAgICAgLy9kcmF3IG1hc2tcbiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5jYXJkTWFzaywgMCwgMCwgdGhpcy5pbWFnZVdpZHRoLCB0aGlzLmhlaWdodCk7XG5cbiAgICAgIHRoaXMuY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLWluJztcblxuICAgICAgLy9kcmF3IGNhcmRcbiAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5jYXJkSW1hZ2UsIDAsIDAsIHRoaXMuaW1hZ2VXaWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcblxuICAgICAgLy9kcmF3IHBhY2sgYW5pbWF0aW9uXG4gICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMuYW5pbWF0aW9uSW1hZ2VzW2N1cnJlbnRGcmFtZV0sIDAsIDAsIHRoaXMuaW1hZ2VXaWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgICBpZiAoY3VycmVudEZyYW1lID09PSB0aGlzLm51bUFuaW1hdGlvbkltYWdlKXtcblxuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xuXG4gICAgICAgIHBhcnR5LnNwYXJrbGVzKHRoaXMuY2FudmFzKTtcblxuICAgICAgICAvL3N0YXJ0IHNsaWRlIGFuaW1hdGlvblxuICAgICAgICBmcmFtZUR1cmF0aW9uID0gMC4wNTtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uRHVyYXRpb24gPSAwLjg7XG4gICAgICAgIGxldCBjdXJyZW50VGltZSA9IDA7XG5cbiAgICAgICAgY29uc3QgaW50ZXJ2YWxJZDIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG5cbiAgICAgICAgICBjb25zdCB5T2Zmc2V0ID0gUGFja0NhbnZhc0NvbnRyb2xsZXIuZWFzZUluT3V0UXVhZChjdXJyZW50VGltZS9hbmltYXRpb25EdXJhdGlvbikqdGhpcy5oZWlnaHQ7XG5cbiAgICAgICAgICAvL2NsZWFyIGNvbnRleHRcbiAgICAgICAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuaW1hZ2VXaWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgICAgICAgLy9kcmF3IG1hc2tcbiAgICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMuY2FyZE1hc2ssIDAsIDAsIHRoaXMuaW1hZ2VXaWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2UtaW4nO1xuXG4gICAgICAgICAgLy9kcmF3IGNhcmRcbiAgICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMuY2FyZEltYWdlLCAwLCAwLCB0aGlzLmltYWdlV2lkdGgsIHRoaXMuaGVpZ2h0KTtcblxuICAgICAgICAgIHRoaXMuY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuXG4gICAgICAgICAgLy9kcmF3IHBhY2sgYW5pbWF0aW9uXG4gICAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLmFuaW1hdGlvbkltYWdlc1t0aGlzLm51bUFuaW1hdGlvbkltYWdlXSwgMCwgeU9mZnNldCwgdGhpcy5pbWFnZVdpZHRoLCB0aGlzLmhlaWdodCk7XG5cbiAgICAgICAgICBjdXJyZW50VGltZSArPSBmcmFtZUR1cmF0aW9uO1xuXG4gICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID49IGFuaW1hdGlvbkR1cmF0aW9uKXtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZDIpO1xuXG4gICAgICAgICAgICBcblxuICAgICAgICAgIH1cblxuICAgICAgICB9LCBmcmFtZUR1cmF0aW9uKjEwMDApO1xuXG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnRGcmFtZSsrO1xuXG4gICAgfSwgZnJhbWVEdXJhdGlvbioxMDAwKVxuXG5cblxuICB9XG5cbn1cbiJdLCJuYW1lcyI6WyJCYXNlUGFnZSIsImNvbnN0cnVjdG9yIiwid2FsbGV0Q29ubmVjdCIsImhvbGRpbmdzIiwiYWxnb2RDbGllbnQiLCJhbGdvSW5kZXhlciIsInRoaXMiLCJQQUNLU19BUElfVVJMIiwiYXN5bmMiLCJsb2FkUGFja3MiLCJyZXN1bHQiLCJmZXRjaCIsInN0YXR1cyIsImpzb24iLCJiYXRoZXJzSWRzIiwiYmF0aGVycyIsIm5mdHMiLCJtYXAiLCJuZnQiLCJhc3NldElkIiwiY2xhaW1hYmxlUGFja3MiLCJwYWNrIiwicGFja3MiLCJpbmNsdWRlcyIsInB1c2giLCJlc2Nyb3dBZGRyZXNzIiwiRXJyb3IiLCJQYWNrcyIsInN1cGVyIiwiYXJndW1lbnRzIiwidWkiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJmZXRjaFBhY2tzIiwic2xlZXAiLCJkZWxheVRpbWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJwYWNrU3RhdHVzUCIsInF1ZXJ5U2VsZWN0b3IiLCJsZW5ndGgiLCJwbHVyYWwiLCJ0ZXh0Q29udGVudCIsInBhY2tzRGl2IiwiY2xhc3NOYW1lIiwiYXBwZW5kIiwicGFja0RpdiIsInBhY2tDYW52YXMiLCJjb250cm9sbGVyIiwiUGFja0NhbnZhc0NvbnRyb2xsZXIiLCJsb2FkIiwidGhlbiIsImhpZGRlbk5hbWUiLCJzdHlsZSIsIm9wYWNpdHkiLCJuYW1lIiwib3BlbkJ1dHRvbiIsImRhdGFzZXQiLCJiYXRoZXJJZCIsImNhZmZlaW5lQ2FyZElkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9wZW5QYWNrIiwiYmluZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwibWVzc2FnZSIsImRpc2FibGVBbGxCdXR0b25zIiwiZXhjZXB0IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJiIiwib3BlbmVkIiwiZGlzYWJsZWQiLCJlbmFibGVBbGxCdXR0b25zIiwicGFja0NhbnZhc0NvbnRyb2xsZXIiLCJldmVudCIsImNhbGxpbmdCdXR0b24iLCJjdXJyZW50VGFyZ2V0Iiwic3VnZ2VzdGVkUGFyYW1zIiwiZ2V0VHJhbnNhY3Rpb25QYXJhbXMiLCJkbyIsImFsbFR4bnMiLCJmcm9tIiwid2FsbGV0QWRkcmVzcyIsInRvIiwiYW1vdW50IiwiYXNzZXRJbmRleCIsInBhcnNlSW50Iiwic2lnbmVkVHhucyIsInNpZ25UcmFuc2FjdGlvbnMiLCJzaWduZWRUeG5Kc29uIiwidHhuIiwiYnRvYSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImFwcGx5IiwicmVzcG9uc2UiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJBY2NlcHQiLCJkYXRhIiwiYW5pbWF0ZSIsImFsZXJ0IiwiY2FudmFzIiwid2lkdGgiLCJoZWlnaHQiLCJpbWFnZVdpZHRoIiwibnVtQW5pbWF0aW9uSW1hZ2UiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImltYWdlU21vb3RoaW5nRW5hYmxlZCIsInRyYW5zbGF0ZSIsImNhcmRJbWFnZSIsImNhcmRNYXNrIiwiYW5pbWF0aW9uSW1hZ2VzIiwibG9hZEFsbEltYWdlIiwic3RhdGljIiwicGF0aCIsInJlamVjdCIsImltYWdlIiwiSW1hZ2UiLCJvbmxvYWQiLCJvbmVycm9yIiwic3JjIiwiY29sb3JJbmRleCIsImluaXRpYWxJbWFnZSIsImxvYWRJbWFnZSIsImRyYXdQYWNrIiwibG9va3VwQXNzZXRCeUlEIiwiaW1hZ2VVcmwiLCJpbWFnZVVybEFsdGVybmF0ZSIsImkiLCJhbmltYXRpb25JbWFnZSIsImRyYXdJbWFnZSIsIngiLCJNYXRoIiwicG93IiwiZnJhbWVEdXJhdGlvbiIsImN1cnJlbnRGcmFtZSIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsImNsZWFyUmVjdCIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsImNsZWFySW50ZXJ2YWwiLCJhbmltYXRpb25EdXJhdGlvbiIsImN1cnJlbnRUaW1lIiwiaW50ZXJ2YWxJZDIiLCJ5T2Zmc2V0IiwiZWFzZUluT3V0UXVhZCJdLCJzb3VyY2VSb290IjoiIn0=