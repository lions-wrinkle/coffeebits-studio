"use strict";(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[126],{4126:(e,t,n)=>{n.r(t),n.d(t,{LongBoi:()=>d});var i=n(6998),o=n(6810),s=n(2871),a=n(4714);class d extends i.BasePage{constructor(){super(...arguments),this.ui=document.createElement("div"),this.ui.innerHTML='\n        <h1>Long Bois</h1>\n        <p class="dark-text">Generate LongBois Bathers</p>\n\n        <div class="d-sm-flex flew-row" style="background-color: var(--background-dark);">\n\n            <div class="d-flex flex-column p-3 text-center justify-content-between">\n\n                <div>\n                    <img src="assets/default.png" class="mb-2 ms-auto me-auto" id="club-img" style="width: 200px; height: auto">\n\n                    <div class="dropdown mb-3" id="bath-club-dropdown">\n                        <button class="dropdown-toggle button-alt" type="button" data-bs-toggle="dropdown"\n                            aria-expanded="false">\n                            Choose Bather\n                        </button>\n\n                    </div>\n                    <input type="checkbox" id="checkbox_gif"> <label for="checkbox_gif">GIF</label>\n\n                </div>\n                \n                <button id="button-download" disabled>Download gif</button>\n\n            </div>\n\n            <div class="d-flex flex-column flex-fill p-3 text-center">\n\n                <img src="assets/default.png" class="w-100 m-auto img-fluid" style="max-width: 384px;" id="merged-img">\n\n            </div>\n\n        </div>',this.bathersCollection,this.selectedBather,this.load()}async load(){await this.loadBathers(),this.ui.querySelector("#button-download").addEventListener("click",this.downloadGif.bind(this),!1),this.ui.querySelector("#checkbox_gif").addEventListener("change",this.gifCheckboxChanged.bind(this),!1)}async loadBathers(){this.bathersCollection=this.holdings.bathers;const e=this.ui.querySelector("#bath-club-dropdown");let t=e.querySelector(".dropdown-menu");t&&t.remove(),t=new s.Z(this.bathersCollection.nfts,this.didSelectBather.bind(this)),e.append(t.ui)}didSelectBather(e){const t=e.currentTarget.dataset.index;if(!t)return;const n=this.bathersCollection.nfts[t];this.selectedBather=n,this.ui.querySelector("#club-img").src=n.imageUrl,this.generateLongBoi(),e.preventDefault()}async gifCheckboxChanged(e){await this.generateLongBoi()}async generateLongBoi(){if(this.selectedBather){const e=this.ui.querySelector("#button-download");e.disabled=!0;const t=this.ui.querySelector("#merged-img");t.src="assets/default.png";const n=this.selectedBather.metadata.properties,i=new o.a(n,a,"./layers_images");if(this.ui.querySelector("#checkbox_gif").checked){e.textContent="Generating GIF...";const n=await i.drawLongGif();t.src=URL.createObjectURL(new Blob([n.buffer],{type:"image/gif"})),e.disabled=!1,e.textContent="Download GIF"}else{e.textContent="Generating image...";const n=await i.drawLongPNG();t.src=n.toDataURL(),e.disabled=!1,e.textContent="Download PNG"}}}downloadGif(){const e=this.ui.querySelector("#merged-img"),t=document.createElement("a");t.href=e.src,t.download="good-morning.gif",t.click()}}}}]);