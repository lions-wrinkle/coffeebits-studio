"use strict";(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[538],{6538:(e,t,s)=>{s.r(t),s.d(t,{Grinder:()=>l});var a=s(6998),n=(s(5190),s(7304)),i=s(7644),d=s(4050),r=s(2871),o=s(4714);class l extends a.BasePage{constructor(...e){super(...arguments),this.simulator=e[e.length-1],this.ui=document.createElement("div"),this.ui.innerHTML=`\n    <h1>Grinder ${this.simulator?"Simulator":""}</h1>\n    <p class="dark-text">${this.simulator?'Try any Caffeine Card. Go to the <a href="?grinder" data-page-link="grinder" class="text-decoration-underline">regular Grinder</a> to actually use your cards.<br />Get the Caffeine Card of your dreams on <a href="https://www.nftexplorer.app/collection/caffeine-cards" class="text-decoration-underline" target="_blank">secondary market.</a>':'Use your Caffeine Cards to customize your Bathers.<br />Try any Caffeine Card in the <a href="?grinder-simulator" data-page-link="grinder-simulator" class="text-decoration-underline">simulator</a>.'}</p>\n\n    <div class="d-sm-flex flew-row" style="background-color: var(--background-dark);">\n\n        <div class="d-flex flex-column p-3 text-center">\n\n            <img src="assets/default.png" class="mb-2 ms-auto me-auto" id="club-img" style="width: 200px; height: auto">\n\n            <div class="dropdown" id="bath-club-dropdown">\n                <button class="dropdown-toggle button-alt" type="button" data-bs-toggle="dropdown"\n                    aria-expanded="false">\n                    Choose Bather\n                </button>\n            </div>\n            <div class="mb-2 mt-4 ms-auto me-auto justify-content-center row row-cols-2" id="cards" style="width: 200px;">\n              <div class="col text-center" id="default-card" style="width: 200px;">\n                <img src="assets/default-card.png" class="img-fluid" style="width: 200px; height: auto;">\n              </div>\n            </div>\n            <div class="dropdown mb-3" id="cards-dropdown">\n                <button class="dropdown-toggle button-alt mb-2" type="button" data-bs-toggle="dropdown"\n                    aria-expanded="false" id="choose-card-button" disabled>\n                    Add Card\n                </button>\n            </div>\n            ${this.simulator?"":'<button id="button-review" disabled>Review...</button>'}\n\n        </div>\n\n        <div class="d-flex flex-column flex-fill p-3 text-center">\n            <small class="dark-text">preview</small>\n            <img src="assets/default.png" class="w-100 m-auto img-fluid" style="max-width: 480px;" id="merged-img">\n\n        </div>\n\n    </div>`,this.bathersCollection,this.cardsCollection,this.selectedBather,this.selectedCards=[],this.mergedProperties={},this.mergedImgDataURL,this.chooseCardButton=this.ui.querySelector("#choose-card-button"),this.load()}async load(){await this.loadBathers(),this.ui.querySelector("#button-review")?.addEventListener("click",this.review.bind(this));const e=window.location.search,t=new URLSearchParams(e);if(t.has("bather")){const e=parseInt(t.get("bather")),s=this.bathersCollection.nfts.filter((t=>t.assetId===e))?.[0];s&&await this.displayBather(s)}}async loadBathers(){this.bathersCollection=this.holdings.bathers;const e=this.ui.querySelector("#bath-club-dropdown");let t=e.querySelector(".dropdown-menu");t&&t.remove(),t=new r.Z(this.bathersCollection.nfts.filter((e=>e.metadata)),this.didSelectBather.bind(this)),e.append(t.ui)}async didSelectBather(e){e.preventDefault(),this.clearCard();const t=e.currentTarget.dataset.index;if(!t)return;const s=this.bathersCollection.nfts[t];this.mergedProperties=s.metadata.properties,await this.displayBather(s)}async displayBather(e){this.selectedBather=e,this.ui.querySelector("#club-img").src=e.imageUrl,this.validate(),await this.loadCards(),this.chooseCardButton.disabled=!1}clearCard(){this.selectedCards=[],this.chooseCardButton.disabled=!0,this.mergedProperties={},this.ui.querySelector("#default-card").hidden=!1;const e=Array.from(this.ui.querySelector("#cards").children);for(const t of e)"default-card"!==t.id&&t.remove()}async loadCards(){this.simulator?this.cardsCollection||(this.cardsCollection=await this.loadAllCards()):this.cardsCollection=this.holdings.caffeineCards;const e=this.ui.querySelector("#cards-dropdown");let t=e.querySelector("#cards-dropdown-nft");t&&t.remove();let s=[];e:for(const e of this.cardsCollection.nfts){if(console.log(e.metadata),e.metadata?.require)for(const t in e.metadata.require)if(this.mergedProperties[t]!=e.metadata.require[t]){s.push(e.assetId);continue e}for(const t of this.selectedCards)if(t.metadata?.properties){for(const a in t.metadata.properties)if(e.metadata.properties[a]){s.push(e.assetId);continue e}}else console.error(new Error(`Error loading properties for card card ${t?.name}`))}t=new r.Z(this.cardsCollection.nfts.filter((e=>e.metadata)),this.didSelectCard.bind(this),"cards-dropdown-nft",s),e.append(t.ui),new window.bootstrap.Dropdown(this.chooseCardButton)}sleep(e){return new Promise((t=>setTimeout(t,e)))}async loadAllCards(){return new Promise((async(e,t)=>{this.chooseCardButton.textContent="Loading...";const{default:a}=await Promise.resolve().then(s.bind(s,5190)),i=a.filter((e=>"caffeineCards"===e.name))[0],d=new n.tf([i]);await d.load(this.algoIndexer);let r=0;for(const s of d.nfts)this.sleep(5),s.load(this.algoIndexer).then((()=>{this.chooseCardButton.textContent=`Loading ${r+1}/${d.nfts.length}...`,r++,r===d.nfts.length&&(this.chooseCardButton.textContent="Add Card",e(d))})).catch((e=>t(e)))}))}async didSelectCard(e){e.preventDefault();const t=e.currentTarget.dataset.index;if(!t)return;const s=this.cardsCollection.nfts[t];this.selectedCards.push(s);const a=this.ui.querySelector("#default-card");a&&(a.hidden=!0);const n=document.createElement("div");n.className="col text-center",n.id=`card-${t}`,n.innerHTML=`\n    <img style="width: 80px; height: auto" src="${s.imageUrl}">\n    <p><a href="javascript:void(0);" id="rm-${t}" data-index="${t}">Remove</a></p>\n    `,n.querySelector(`#rm-${t}`).addEventListener("click",this.removeCard.bind(this),!1),this.ui.querySelector("#cards").append(n),this.validate(),await this.loadCards()}async removeCard(e){e.preventDefault();const t=e.currentTarget.dataset.index;if(!t)return;const s=this.cardsCollection.nfts[t];if(console.log(this.selectedCards.map((e=>e.name))),this.selectedCards=this.selectedCards.filter((e=>e.assetId!=s.assetId)),console.log(this.selectedCards.map((e=>e.name))),0===this.selectedCards.length){const e=this.ui.querySelector("#default-card");e&&(e.hidden=!1)}this.validate(),await this.loadCards(),this.ui.querySelector(`#card-${t}`).remove()}validate(){let e;this.simulator||(e=this.ui.querySelector("#button-review")),this.selectedBather&&this.selectedCards.length>0?(this.simulator||(e.disabled=!1),this.preview()):this.selectedBather?(this.ui.querySelector("#merged-img").src=this.selectedBather.imageUrl,this.simulator||(e.disabled=!0)):this.simulator||(e.disabled=!0)}review(e){const t=document.createElement("div");t.className="modal",t.tabIndex="-1";let s,a=[];for(const e of this.selectedCards)for(const t in e.metadata.properties)o.duplicateCriteria.includes(t)&&a.push(t);a.length>0&&(s=`&#9888;&#65039; This request contains a modification that can generate a duplicate (${a.join(",")}). If it's the case, the request will be canceled and the cards returned to your wallet.<br>`),t.innerHTML=`\n    <div class="modal-dialog modal-dialog-centered">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h5 class="modal-title">Review Bather modification</h5>\n          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n            <div class="text-center mb-3">\n                <img style="width: 320px; height: auto;" id="preview-merged-img">\n            </div>\n\n          <p>\n          Your <strong>${this.selectedBather.name}</strong> will be updated.<br>\n          Your <strong>${this.selectedCards.map((e=>e.name)).join(", ")}</strong> will be burned &#128293;\n          </p>\n\n          <p>You'll get <strong>${11*this.selectedCards.length} $Roar</strong></p>\n            \n          <p>${s||""}&#128337; As the process requires a manual step, update can take up to 24h.<br>\n          &#128236; You will be notified by a zero Algo transaction when the update is complete.</p>\n        </div>\n        <div class="modal-footer">\n          <button type="button" class="button-alt" data-bs-dismiss="modal">Close</button>\n          <button type="button" id="send-button">Send request</button>\n        </div>\n      </div>\n    </div>\n    `,t.querySelector("#preview-merged-img").src=this.mergedImgDataURL;const n=t.querySelector("#send-button");n.currentModal=t,n.addEventListener("click",this.send.bind(this),!1),new window.bootstrap.Modal(t,{}).show()}async preview(){let e;this.simulator||(e=this.ui.querySelector("#button-review"),e.disabled=!0,e.textContent="Generating...");const t=this.ui.querySelector("#merged-img");this.mergedProperties=Object.assign({},this.selectedBather.metadata.properties);for(const e of this.selectedCards)for(const t in e.metadata.properties)this.mergedProperties[t]=e.metadata.properties[t];let s=await(0,i.i)(this.mergedProperties,o,"layers_images");this.simulator&&(s=await this.applyWipOverlay(s)),this.mergedImgDataURL=s.toDataURL("image/png"),t.src=this.mergedImgDataURL,this.simulator||(e.disabled=!1,e.textContent="Review...")}applyWipOverlay(e){return new Promise(((t,s)=>{let a=document.createElement("canvas");a.width=52,a.height=52;var n=a.getContext("2d");let i=new Image;i.onload=()=>{n.drawImage(e,2,2),n.drawImage(i,0,0),t(a)},i.onerror=e=>{s(e)},i.src="assets/wip.png"}))}async send(e){const t=e.currentTarget;t.disabled=!0,t.textContent="Waiting for signature...";const s=await this.algodClient.getTransactionParams().do(),a={evolve:this.selectedBather.assetId},n=(new TextEncoder).encode(JSON.stringify(a));if(this.selectedCards.length>13)return void alert("No more than 14 cards can be used at once.");let i=[];for(const e of this.selectedCards)i.push(d.makeAssetTransferTxnWithSuggestedParamsFromObject({from:this.walletConnect.walletAddress,to:this.cardsCollection.collections[0].addresses[0],amount:1,assetIndex:e.assetId,suggestedParams:s,note:n}));i.length>1&&d.assignGroupID(i);const r=await this.walletConnect.signTransactions(i),o=t.currentModal;let l;o.innerHTML='\n    <div class="modal-dialog modal-dialog-centered">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body ">\n            <div class="text-center mb-3">\n                <img src="assets/grinder.png" style="width: 128px; height: auto;">\n            </div>\n            <div class="text-center mb-3">\n            Sending Caffeine Card to the Grinder...\n            </div>\n        </div>\n      </div>\n    </div>\n    ';try{l=await this.algodClient.sendRawTransaction(r).do(),await d.waitForConfirmation(this.algodClient,l.txId,4),o.innerHTML='\n    <div class="modal-dialog modal-dialog-centered">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n          <div class="text-center mb-3">\n          <img src="assets/heart-cup.png" width="60"><br><br>\n          We got your card and your evolution request.<br>\n          We\'ll be back to you very soon.\n          </div>\n        </div>\n        <div class="modal-footer">\n          <button type="button" data-bs-dismiss="modal">Close</button>\n        </div>\n      </div>\n    </div>\n    ',o.addEventListener("hidden.bs.modal",(e=>{location.reload()}))}catch(e){o.innerHTML=`\n    <div class="modal-dialog modal-dialog-centered">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n          <div class="text-center mb-3">\n          <div class="alert alert-danger" role="alert">${e.message} </div>\n          </div>\n        </div>\n        <div class="modal-footer">\n          <button type="button" data-bs-dismiss="modal">Close</button>\n        </div>\n      </div>\n    </div>\n    `,console.error(e)}}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVloQixXQUdsQyxzQkFDdkJ2SSxLQUFLcUksWUFDTG9CLEVBQUdFLEtBQ0gsR0FHRjVDLEVBQWF6RyxVQUFZLHlxQkFvQnpCeUcsRUFBYTdGLGlCQUFpQixtQkFBb0IwQixJQUVoRHJCLFNBQVNxSSxRQUFRLEdBc0JyQixDQXBCRSxNQUFPQyxHQUNQOUMsRUFBYXpHLFVBQVksNlhBUTBCdUosRUFBSUMsK01BVXZENUYsUUFBUU8sTUFBTW9GLEVBQ2hCLENBQ0YsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3N0dWRpby8uL3NyYy9wYWdlcy9ncmluZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VQYWdlIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IGNvbGxlY3Rpb24gZnJvbSBcIi4uL2NvbGxlY3Rpb25zLmpzXCI7XG5pbXBvcnQgeyBORlRDb2xsZWN0aW9uIH0gZnJvbSBcImFsZ28tbmZ0LXV0aWxzXCI7XG5pbXBvcnQgeyBkcmF3IH0gZnJvbSBcImJhdGgtY2x1YlwiO1xuaW1wb3J0IGFsZ29zZGsgZnJvbSBcImFsZ29zZGtcIjtcbmltcG9ydCBEcm9wZG93bk5mdHMgZnJvbSBcIi4uL2NvbW1vbi9kcm9wZG93bi1uZnRzLmpzXCI7XG5cbmltcG9ydCBsYXllcnMgZnJvbSBcIi4uLy4uLy4uL2JhdGgtY2x1Yi9sYXllcnMuanNvblwiO1xuXG5leHBvcnQgY2xhc3MgR3JpbmRlciBleHRlbmRzIEJhc2VQYWdlIHtcbiAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLnNpbXVsYXRvciA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcblxuICAgIHRoaXMudWkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRoaXMudWkuaW5uZXJIVE1MID0gYFxuICAgIDxoMT5HcmluZGVyICR7dGhpcy5zaW11bGF0b3IgPyBcIlNpbXVsYXRvclwiIDogXCJcIn08L2gxPlxuICAgIDxwIGNsYXNzPVwiZGFyay10ZXh0XCI+JHtcbiAgICAgIHRoaXMuc2ltdWxhdG9yXG4gICAgICAgID8gJ1RyeSBhbnkgQ2FmZmVpbmUgQ2FyZC4gR28gdG8gdGhlIDxhIGhyZWY9XCI/Z3JpbmRlclwiIGRhdGEtcGFnZS1saW5rPVwiZ3JpbmRlclwiIGNsYXNzPVwidGV4dC1kZWNvcmF0aW9uLXVuZGVybGluZVwiPnJlZ3VsYXIgR3JpbmRlcjwvYT4gdG8gYWN0dWFsbHkgdXNlIHlvdXIgY2FyZHMuPGJyIC8+R2V0IHRoZSBDYWZmZWluZSBDYXJkIG9mIHlvdXIgZHJlYW1zIG9uIDxhIGhyZWY9XCJodHRwczovL3d3dy5uZnRleHBsb3Jlci5hcHAvY29sbGVjdGlvbi9jYWZmZWluZS1jYXJkc1wiIGNsYXNzPVwidGV4dC1kZWNvcmF0aW9uLXVuZGVybGluZVwiIHRhcmdldD1cIl9ibGFua1wiPnNlY29uZGFyeSBtYXJrZXQuPC9hPidcbiAgICAgICAgOiAnVXNlIHlvdXIgQ2FmZmVpbmUgQ2FyZHMgdG8gY3VzdG9taXplIHlvdXIgQmF0aGVycy48YnIgLz5UcnkgYW55IENhZmZlaW5lIENhcmQgaW4gdGhlIDxhIGhyZWY9XCI/Z3JpbmRlci1zaW11bGF0b3JcIiBkYXRhLXBhZ2UtbGluaz1cImdyaW5kZXItc2ltdWxhdG9yXCIgY2xhc3M9XCJ0ZXh0LWRlY29yYXRpb24tdW5kZXJsaW5lXCI+c2ltdWxhdG9yPC9hPi4nXG4gICAgfTwvcD5cblxuICAgIDxkaXYgY2xhc3M9XCJkLXNtLWZsZXggZmxldy1yb3dcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtZGFyayk7XCI+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBmbGV4LWNvbHVtbiBwLTMgdGV4dC1jZW50ZXJcIj5cblxuICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvZGVmYXVsdC5wbmdcIiBjbGFzcz1cIm1iLTIgbXMtYXV0byBtZS1hdXRvXCIgaWQ9XCJjbHViLWltZ1wiIHN0eWxlPVwid2lkdGg6IDIwMHB4OyBoZWlnaHQ6IGF1dG9cIj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyb3Bkb3duXCIgaWQ9XCJiYXRoLWNsdWItZHJvcGRvd25cIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlIGJ1dHRvbi1hbHRcIiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1icy10b2dnbGU9XCJkcm9wZG93blwiXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiPlxuICAgICAgICAgICAgICAgICAgICBDaG9vc2UgQmF0aGVyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi0yIG10LTQgbXMtYXV0byBtZS1hdXRvIGp1c3RpZnktY29udGVudC1jZW50ZXIgcm93IHJvdy1jb2xzLTJcIiBpZD1cImNhcmRzXCIgc3R5bGU9XCJ3aWR0aDogMjAwcHg7XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wgdGV4dC1jZW50ZXJcIiBpZD1cImRlZmF1bHQtY2FyZFwiIHN0eWxlPVwid2lkdGg6IDIwMHB4O1wiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2RlZmF1bHQtY2FyZC5wbmdcIiBjbGFzcz1cImltZy1mbHVpZFwiIHN0eWxlPVwid2lkdGg6IDIwMHB4OyBoZWlnaHQ6IGF1dG87XCI+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJvcGRvd24gbWItM1wiIGlkPVwiY2FyZHMtZHJvcGRvd25cIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlIGJ1dHRvbi1hbHQgbWItMlwiIHR5cGU9XCJidXR0b25cIiBkYXRhLWJzLXRvZ2dsZT1cImRyb3Bkb3duXCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1leHBhbmRlZD1cImZhbHNlXCIgaWQ9XCJjaG9vc2UtY2FyZC1idXR0b25cIiBkaXNhYmxlZD5cbiAgICAgICAgICAgICAgICAgICAgQWRkIENhcmRcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgJHtcbiAgICAgICAgICAgICAgdGhpcy5zaW11bGF0b3JcbiAgICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgICA6ICc8YnV0dG9uIGlkPVwiYnV0dG9uLXJldmlld1wiIGRpc2FibGVkPlJldmlldy4uLjwvYnV0dG9uPidcbiAgICAgICAgICAgIH1cblxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IGZsZXgtY29sdW1uIGZsZXgtZmlsbCBwLTMgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxzbWFsbCBjbGFzcz1cImRhcmstdGV4dFwiPnByZXZpZXc8L3NtYWxsPlxuICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvZGVmYXVsdC5wbmdcIiBjbGFzcz1cInctMTAwIG0tYXV0byBpbWctZmx1aWRcIiBzdHlsZT1cIm1heC13aWR0aDogNDgwcHg7XCIgaWQ9XCJtZXJnZWQtaW1nXCI+XG5cbiAgICAgICAgPC9kaXY+XG5cbiAgICA8L2Rpdj5gO1xuXG4gICAgdGhpcy5iYXRoZXJzQ29sbGVjdGlvbjtcbiAgICB0aGlzLmNhcmRzQ29sbGVjdGlvbjtcblxuICAgIHRoaXMuc2VsZWN0ZWRCYXRoZXI7XG4gICAgdGhpcy5zZWxlY3RlZENhcmRzID0gW107XG4gICAgdGhpcy5tZXJnZWRQcm9wZXJ0aWVzID0ge307XG5cbiAgICB0aGlzLm1lcmdlZEltZ0RhdGFVUkw7XG5cbiAgICB0aGlzLmNob29zZUNhcmRCdXR0b24gPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjY2hvb3NlLWNhcmQtYnV0dG9uXCIpO1xuXG4gICAgdGhpcy5sb2FkKCk7XG4gIH1cblxuICBhc3luYyBsb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZEJhdGhlcnMoKTtcblxuICAgIGNvbnN0IHJldmlld0J1dHRvbiA9IHRoaXMudWkucXVlcnlTZWxlY3RvcihcIiNidXR0b24tcmV2aWV3XCIpO1xuICAgIHJldmlld0J1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMucmV2aWV3LmJpbmQodGhpcykpO1xuXG4gICAgLy9jb25zdCBzZW5kQnV0dG9uID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI3NlbmQtYnRuXCIpO1xuICAgIC8vc2VuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5zZW5kLmJpbmQodGhpcykpO1xuXG4gICAgLy9jaGVjayBpZiBhIGJhdGhlciB3YXMgcmVxdWVzdGVkXG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnlTdHJpbmcpO1xuXG4gICAgaWYgKHVybFBhcmFtcy5oYXMoXCJiYXRoZXJcIikpIHtcbiAgICAgIGNvbnN0IGJhdGhlckFzc2V0SWQgPSBwYXJzZUludCh1cmxQYXJhbXMuZ2V0KFwiYmF0aGVyXCIpKTtcblxuICAgICAgLy9maW5kIGJhdGhlclxuICAgICAgY29uc3QgbmZ0ID0gdGhpcy5iYXRoZXJzQ29sbGVjdGlvbi5uZnRzLmZpbHRlcihcbiAgICAgICAgKG5mdCkgPT4gbmZ0LmFzc2V0SWQgPT09IGJhdGhlckFzc2V0SWRcbiAgICAgICk/LlswXTtcblxuICAgICAgaWYgKG5mdCkge1xuICAgICAgICBhd2FpdCB0aGlzLmRpc3BsYXlCYXRoZXIobmZ0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2FkQmF0aGVycygpIHtcbiAgICB0aGlzLmJhdGhlcnNDb2xsZWN0aW9uID0gdGhpcy5ob2xkaW5nc1tcImJhdGhlcnNcIl07XG5cbiAgICBjb25zdCBkcm9wZG93bkRpdiA9IHRoaXMudWkucXVlcnlTZWxlY3RvcihcIiNiYXRoLWNsdWItZHJvcGRvd25cIik7XG5cbiAgICBsZXQgZHJvcGRvd24gPSBkcm9wZG93bkRpdi5xdWVyeVNlbGVjdG9yKFwiLmRyb3Bkb3duLW1lbnVcIik7XG4gICAgaWYgKGRyb3Bkb3duKSB7XG4gICAgICBkcm9wZG93bi5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBkcm9wZG93biA9IG5ldyBEcm9wZG93bk5mdHMoXG4gICAgICB0aGlzLmJhdGhlcnNDb2xsZWN0aW9uLm5mdHMuZmlsdGVyKG4gPT4gbi5tZXRhZGF0YSksXG4gICAgICB0aGlzLmRpZFNlbGVjdEJhdGhlci5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICBkcm9wZG93bkRpdi5hcHBlbmQoZHJvcGRvd24udWkpO1xuXG4gICAgLypcbiAgICBjb25zdCBiYXRoZXJzRHJvcGRvd25MaXN0ID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2JhdGgtY2x1Yi1kcm9wZG93bi1saXN0XCIpO1xuICAgIGJhdGhlcnNEcm9wZG93bkxpc3QudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gICAgLy9hZGQgZGVmYXVsdCB2YWx1ZVxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBiYXRoZXJzRHJvcGRvd25MaXN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG5cbiAgICBpZiAodGhpcy5iYXRoZXJzQ29sbGVjdGlvbi5uZnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgb3B0aW9uLmlubmVySFRNTCA9ICc8YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW0gZGlzYWJsZWRcIj5ObyBiYXRoZXJzPC9hPic7XG4gICAgfVxuXG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoY29uc3QgbmZ0IG9mIHRoaXMuYmF0aGVyc0NvbGxlY3Rpb24ubmZ0cykge1xuICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuXG4gICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICBhLmNsYXNzTmFtZSA9ICdkcm9wZG93bi1pdGVtJztcbiAgICAgIGEuaHJlZiA9ICcjJztcbiAgICAgIGEuZGF0YXNldC5pbmRleCA9IGk7XG5cbiAgICAgIGEuaW5uZXJIVE1MID0gYDxpbWcgc3JjPVwiJHtuZnQuaW1hZ2VVcmx9XCI+ICR7bmZ0Lm5hbWV9YDtcblxuICAgICAgYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZGlkU2VsZWN0QmF0aGVyLmJpbmQodGhpcyksIGZhbHNlKTtcblxuICAgICAgb3B0aW9uLmFwcGVuZChhKTtcbiAgICAgIGJhdGhlcnNEcm9wZG93bkxpc3QuYXBwZW5kKG9wdGlvbik7XG5cbiAgICAgIGkrKztcbiAgICB9XG4gICAgKi9cbiAgfVxuXG4gIGFzeW5jIGRpZFNlbGVjdEJhdGhlcihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLmNsZWFyQ2FyZCgpO1xuXG4gICAgY29uc3QgbmZ0SW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5kZXg7XG5cbiAgICBpZiAoIW5mdEluZGV4KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmZ0ID0gdGhpcy5iYXRoZXJzQ29sbGVjdGlvbi5uZnRzW25mdEluZGV4XTtcblxuICAgIHRoaXMubWVyZ2VkUHJvcGVydGllcyA9IG5mdC5tZXRhZGF0YS5wcm9wZXJ0aWVzO1xuXG4gICAgYXdhaXQgdGhpcy5kaXNwbGF5QmF0aGVyKG5mdCk7XG4gIH1cblxuICBhc3luYyBkaXNwbGF5QmF0aGVyKG5mdCkge1xuICAgIHRoaXMuc2VsZWN0ZWRCYXRoZXIgPSBuZnQ7XG5cbiAgICAvL2Rpc3BsYXkgaW1hZ2VcbiAgICBjb25zdCBiYXRoZXJJbWcgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjY2x1Yi1pbWdcIik7XG4gICAgYmF0aGVySW1nLnNyYyA9IG5mdC5pbWFnZVVybDtcblxuICAgIHRoaXMudmFsaWRhdGUoKTtcblxuICAgIGF3YWl0IHRoaXMubG9hZENhcmRzKCk7XG4gICAgdGhpcy5jaG9vc2VDYXJkQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBjbGVhckNhcmQoKSB7XG4gICAgdGhpcy5zZWxlY3RlZENhcmRzID0gW107XG4gICAgdGhpcy5jaG9vc2VDYXJkQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLm1lcmdlZFByb3BlcnRpZXMgPSB7fTtcblxuICAgIGNvbnN0IGRlZmF1bHRDYXJkID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2RlZmF1bHQtY2FyZFwiKTtcbiAgICBkZWZhdWx0Q2FyZC5oaWRkZW4gPSBmYWxzZTtcblxuICAgIC8vcmVtb3ZlIGFsbCBkaXNwbGF5ZWQgY2FyZHNcblxuICAgIGNvbnN0IGNoaWxkcmVuID0gQXJyYXkuZnJvbSh0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZHNcIikuY2hpbGRyZW4pO1xuXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGNoaWxkcmVuKSB7XG4gICAgICBpZiAoZWxlbWVudC5pZCAhPT0gXCJkZWZhdWx0LWNhcmRcIikge1xuICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvYWRDYXJkcygpIHtcbiAgICBpZiAoIXRoaXMuc2ltdWxhdG9yKSB7XG4gICAgICB0aGlzLmNhcmRzQ29sbGVjdGlvbiA9IHRoaXMuaG9sZGluZ3NbXCJjYWZmZWluZUNhcmRzXCJdO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuY2FyZHNDb2xsZWN0aW9uKSB7XG4gICAgICB0aGlzLmNhcmRzQ29sbGVjdGlvbiA9IGF3YWl0IHRoaXMubG9hZEFsbENhcmRzKCk7XG4gICAgfVxuXG4gICAgY29uc3QgZHJvcGRvd25EaXYgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZHMtZHJvcGRvd25cIik7XG5cbiAgICBsZXQgZHJvcGRvd24gPSBkcm9wZG93bkRpdi5xdWVyeVNlbGVjdG9yKFwiI2NhcmRzLWRyb3Bkb3duLW5mdFwiKTtcbiAgICBpZiAoZHJvcGRvd24pIHtcbiAgICAgIGRyb3Bkb3duLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIGxldCBkaXNhYmxlZEFzc2V0SWRzID0gW107XG4gICAgbGV0IGkgPSAwO1xuICAgIG1haW5sb29wOiBmb3IgKGNvbnN0IG5mdCBvZiB0aGlzLmNhcmRzQ29sbGVjdGlvbi5uZnRzKSB7XG5cbiAgICAgIGNvbnNvbGUubG9nKG5mdC5tZXRhZGF0YSlcbiAgICAgIC8vY2hlY2sgcmVxdWlyZW1lbnRcbiAgICAgIGlmIChuZnQubWV0YWRhdGE/LnJlcXVpcmUpIHtcbiAgICAgICAgZm9yIChjb25zdCByZXF1aXJlS2V5IGluIG5mdC5tZXRhZGF0YS5yZXF1aXJlKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5tZXJnZWRQcm9wZXJ0aWVzW3JlcXVpcmVLZXldICE9XG4gICAgICAgICAgICBuZnQubWV0YWRhdGEucmVxdWlyZVtyZXF1aXJlS2V5XVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZGlzYWJsZWRBc3NldElkcy5wdXNoKG5mdC5hc3NldElkKTtcbiAgICAgICAgICAgIGNvbnRpbnVlIG1haW5sb29wO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSAvKmVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKG5ldyBFcnJvcihgRXJyb3IgbG9hZGluZyByZXF1aXJlbWVudHMgZm9yIGNhcmQgJHtuZnQ/Lm5hbWV9YCkpXG4gICAgICAgIGNvbnRpbnVlIG1haW5sb29wO1xuICAgICAgfSovXG5cbiAgICAgIC8vcmVtb3ZlIGNhcmRzIGZyb20gdGhlIHNhbWUgdHlwZVxuICAgICAgZm9yIChjb25zdCBzZWxlY3RlZENhcmQgb2YgdGhpcy5zZWxlY3RlZENhcmRzKSB7XG4gICAgICAgIGlmIChzZWxlY3RlZENhcmQubWV0YWRhdGE/LnByb3BlcnRpZXMpe1xuICAgICAgICAgIGZvciAoY29uc3QgcHJvcGVydHkgaW4gc2VsZWN0ZWRDYXJkLm1ldGFkYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChuZnQubWV0YWRhdGEucHJvcGVydGllc1twcm9wZXJ0eV0pIHtcbiAgICAgICAgICAgICAgZGlzYWJsZWRBc3NldElkcy5wdXNoKG5mdC5hc3NldElkKTtcbiAgICAgICAgICAgICAgY29udGludWUgbWFpbmxvb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKGBFcnJvciBsb2FkaW5nIHByb3BlcnRpZXMgZm9yIGNhcmQgY2FyZCAke3NlbGVjdGVkQ2FyZD8ubmFtZX1gKSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkcm9wZG93biA9IG5ldyBEcm9wZG93bk5mdHMoXG4gICAgICB0aGlzLmNhcmRzQ29sbGVjdGlvbi5uZnRzLmZpbHRlcihuID0+IG4ubWV0YWRhdGEpLFxuICAgICAgdGhpcy5kaWRTZWxlY3RDYXJkLmJpbmQodGhpcyksXG4gICAgICBcImNhcmRzLWRyb3Bkb3duLW5mdFwiLFxuICAgICAgZGlzYWJsZWRBc3NldElkc1xuICAgICk7XG4gICAgZHJvcGRvd25EaXYuYXBwZW5kKGRyb3Bkb3duLnVpKTtcblxuICAgIG5ldyB3aW5kb3cuYm9vdHN0cmFwLkRyb3Bkb3duKHRoaXMuY2hvb3NlQ2FyZEJ1dHRvbik7XG4gIH1cblxuICBzbGVlcChkZWxheVRpbWUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXlUaW1lKSk7XG4gIH1cblxuICBhc3luYyBsb2FkQWxsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuY2hvb3NlQ2FyZEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiTG9hZGluZy4uLlwiO1xuXG4gICAgICBjb25zdCB7IGRlZmF1bHQ6IGNvbGxlY3Rpb25zIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9jb2xsZWN0aW9ucy5qc1wiKTtcblxuICAgICAgY29uc3QgY2FyZENvbGxlY3Rpb24gPSBjb2xsZWN0aW9ucy5maWx0ZXIoXG4gICAgICAgIChjKSA9PiBjLm5hbWUgPT09IFwiY2FmZmVpbmVDYXJkc1wiXG4gICAgICApWzBdO1xuXG4gICAgICBjb25zdCBuZnRDb2xsZWN0aW9uID0gbmV3IE5GVENvbGxlY3Rpb24oW2NhcmRDb2xsZWN0aW9uXSk7XG5cbiAgICAgIGF3YWl0IG5mdENvbGxlY3Rpb24ubG9hZCh0aGlzLmFsZ29JbmRleGVyKTtcblxuICAgICAgbGV0IGkgPSAwO1xuXG4gICAgICBmb3IgKGNvbnN0IG5mdCBvZiBuZnRDb2xsZWN0aW9uLm5mdHMpIHtcblxuICAgICAgICB0aGlzLnNsZWVwKDUpO1xuXG4gICAgICAgIG5mdFxuICAgICAgICAgIC5sb2FkKHRoaXMuYWxnb0luZGV4ZXIpXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaG9vc2VDYXJkQnV0dG9uLnRleHRDb250ZW50ID0gYExvYWRpbmcgJHtpICsgMX0vJHtcbiAgICAgICAgICAgICAgbmZ0Q29sbGVjdGlvbi5uZnRzLmxlbmd0aFxuICAgICAgICAgICAgfS4uLmA7XG5cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGlmIChpID09PSBuZnRDb2xsZWN0aW9uLm5mdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHRoaXMuY2hvb3NlQ2FyZEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkIENhcmRcIjtcbiAgICAgICAgICAgICAgcmVzb2x2ZShuZnRDb2xsZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZSkgPT4gcmVqZWN0KGUpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRpZFNlbGVjdENhcmQoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgbmZ0SW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5kZXg7XG5cbiAgICBpZiAoIW5mdEluZGV4KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmZ0ID0gdGhpcy5jYXJkc0NvbGxlY3Rpb24ubmZ0c1tuZnRJbmRleF07XG4gICAgdGhpcy5zZWxlY3RlZENhcmRzLnB1c2gobmZ0KTtcblxuICAgIC8vcmVtb3ZlIGRlZmF1bHQgY2FyZCBpZiBuZWVkZWRcbiAgICBjb25zdCBkZWZhdWx0Q2FyZCA9IHRoaXMudWkucXVlcnlTZWxlY3RvcihcIiNkZWZhdWx0LWNhcmRcIik7XG5cbiAgICBpZiAoZGVmYXVsdENhcmQpIHtcbiAgICAgIGRlZmF1bHRDYXJkLmhpZGRlbiA9IHRydWU7XG4gICAgfVxuXG4gICAgLy9hZGQgY2FyZFxuICAgIGNvbnN0IG5ld0NhcmREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5ld0NhcmREaXYuY2xhc3NOYW1lID0gXCJjb2wgdGV4dC1jZW50ZXJcIjtcbiAgICBuZXdDYXJkRGl2LmlkID0gYGNhcmQtJHtuZnRJbmRleH1gO1xuXG4gICAgbmV3Q2FyZERpdi5pbm5lckhUTUwgPSBgXG4gICAgPGltZyBzdHlsZT1cIndpZHRoOiA4MHB4OyBoZWlnaHQ6IGF1dG9cIiBzcmM9XCIke25mdC5pbWFnZVVybH1cIj5cbiAgICA8cD48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGlkPVwicm0tJHtuZnRJbmRleH1cIiBkYXRhLWluZGV4PVwiJHtuZnRJbmRleH1cIj5SZW1vdmU8L2E+PC9wPlxuICAgIGA7XG5cbiAgICBuZXdDYXJkRGl2XG4gICAgICAucXVlcnlTZWxlY3RvcihgI3JtLSR7bmZ0SW5kZXh9YClcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5yZW1vdmVDYXJkLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZHNcIikuYXBwZW5kKG5ld0NhcmREaXYpO1xuXG4gICAgLy9kaXNwbGF5IGltYWdlXG4gICAgLy9jb25zdCBjYXJkSW1nID0gdGhpcy51aS5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1nXCIpO1xuICAgIC8vY2FyZEltZy5zcmMgPSBuZnQuaW1hZ2VVcmw7XG5cbiAgICB0aGlzLnZhbGlkYXRlKCk7XG5cbiAgICAvL3JlbG9hZCBjYXJkc1xuICAgIGF3YWl0IHRoaXMubG9hZENhcmRzKCk7XG4gIH1cblxuICBhc3luYyByZW1vdmVDYXJkKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IG5mdEluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZGV4O1xuXG4gICAgaWYgKCFuZnRJbmRleCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5mdCA9IHRoaXMuY2FyZHNDb2xsZWN0aW9uLm5mdHNbbmZ0SW5kZXhdO1xuXG4gICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RlZENhcmRzLm1hcCgoYykgPT4gYy5uYW1lKSk7XG4gICAgdGhpcy5zZWxlY3RlZENhcmRzID0gdGhpcy5zZWxlY3RlZENhcmRzLmZpbHRlcihcbiAgICAgIChjKSA9PiBjLmFzc2V0SWQgIT0gbmZ0LmFzc2V0SWRcbiAgICApO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRDYXJkcy5tYXAoKGMpID0+IGMubmFtZSkpO1xuXG4gICAgLy9kaXNwbGF5IGRlZmF1bHQgY2FyZCBhZ2FpbiBpZiBuZWVkZWRcbiAgICBpZiAodGhpcy5zZWxlY3RlZENhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgZGVmYXVsdENhcmQgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjZGVmYXVsdC1jYXJkXCIpO1xuXG4gICAgICBpZiAoZGVmYXVsdENhcmQpIHtcbiAgICAgICAgZGVmYXVsdENhcmQuaGlkZGVuID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZSgpO1xuXG4gICAgLy9yZWxvYWQgY2FyZHNcbiAgICBhd2FpdCB0aGlzLmxvYWRDYXJkcygpO1xuXG4gICAgdGhpcy51aS5xdWVyeVNlbGVjdG9yKGAjY2FyZC0ke25mdEluZGV4fWApLnJlbW92ZSgpO1xuICB9XG5cbiAgdmFsaWRhdGUoKSB7XG4gICAgbGV0IHJldmlld0J1dHRvbjtcbiAgICBpZiAoIXRoaXMuc2ltdWxhdG9yKSB7XG4gICAgICByZXZpZXdCdXR0b24gPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjYnV0dG9uLXJldmlld1wiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZWxlY3RlZEJhdGhlciAmJiB0aGlzLnNlbGVjdGVkQ2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKCF0aGlzLnNpbXVsYXRvcikge1xuICAgICAgICByZXZpZXdCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wcmV2aWV3KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkQmF0aGVyKSB7XG4gICAgICBjb25zdCBtZXJnZWRJbWcgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjbWVyZ2VkLWltZ1wiKTtcbiAgICAgIG1lcmdlZEltZy5zcmMgPSB0aGlzLnNlbGVjdGVkQmF0aGVyLmltYWdlVXJsO1xuXG4gICAgICBpZiAoIXRoaXMuc2ltdWxhdG9yKSB7XG4gICAgICAgIHJldmlld0J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghdGhpcy5zaW11bGF0b3IpIHtcbiAgICAgICAgcmV2aWV3QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXZpZXcoZXZlbnQpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbW9kYWwuY2xhc3NOYW1lID0gXCJtb2RhbFwiO1xuICAgIG1vZGFsLnRhYkluZGV4ID0gXCItMVwiO1xuXG4gICAgLy9pZiB0aGUgZ3JpbmQgY29udGFpbiBhIGRvdWJsZS1zZW5zaXRpdmUgbW9kaWZpY2F0aW9uIGRpc3BsYXkgYSBtZXNzYWdlXG5cbiAgICBsZXQgZHVwbGljYXRlU2Vuc2l0aXZlTGF5ZXJzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGNhcmQgb2YgdGhpcy5zZWxlY3RlZENhcmRzKSB7XG4gICAgICBmb3IgKGNvbnN0IGxheWVyTmFtZSBpbiBjYXJkLm1ldGFkYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKGxheWVycy5kdXBsaWNhdGVDcml0ZXJpYS5pbmNsdWRlcyhsYXllck5hbWUpKSB7XG4gICAgICAgICAgZHVwbGljYXRlU2Vuc2l0aXZlTGF5ZXJzLnB1c2gobGF5ZXJOYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBkdXBsaWNhdGVNZXNzYWdlO1xuXG4gICAgaWYgKGR1cGxpY2F0ZVNlbnNpdGl2ZUxheWVycy5sZW5ndGggPiAwKSB7XG4gICAgICBkdXBsaWNhdGVNZXNzYWdlID0gYCYjOTg4ODsmIzY1MDM5OyBUaGlzIHJlcXVlc3QgY29udGFpbnMgYSBtb2RpZmljYXRpb24gdGhhdCBjYW4gZ2VuZXJhdGUgYSBkdXBsaWNhdGUgKCR7ZHVwbGljYXRlU2Vuc2l0aXZlTGF5ZXJzLmpvaW4oXG4gICAgICAgIFwiLFwiXG4gICAgICApfSkuIElmIGl0J3MgdGhlIGNhc2UsIHRoZSByZXF1ZXN0IHdpbGwgYmUgY2FuY2VsZWQgYW5kIHRoZSBjYXJkcyByZXR1cm5lZCB0byB5b3VyIHdhbGxldC48YnI+YDtcbiAgICB9XG5cbiAgICBtb2RhbC5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZyBtb2RhbC1kaWFsb2ctY2VudGVyZWRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICAgICA8aDUgY2xhc3M9XCJtb2RhbC10aXRsZVwiPlJldmlldyBCYXRoZXIgbW9kaWZpY2F0aW9uPC9oNT5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIG1iLTNcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHN0eWxlPVwid2lkdGg6IDMyMHB4OyBoZWlnaHQ6IGF1dG87XCIgaWQ9XCJwcmV2aWV3LW1lcmdlZC1pbWdcIj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPHA+XG4gICAgICAgICAgWW91ciA8c3Ryb25nPiR7dGhpcy5zZWxlY3RlZEJhdGhlci5uYW1lfTwvc3Ryb25nPiB3aWxsIGJlIHVwZGF0ZWQuPGJyPlxuICAgICAgICAgIFlvdXIgPHN0cm9uZz4ke3RoaXMuc2VsZWN0ZWRDYXJkc1xuICAgICAgICAgICAgLm1hcCgoYykgPT4gYy5uYW1lKVxuICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX08L3N0cm9uZz4gd2lsbCBiZSBidXJuZWQgJiMxMjgyOTM7XG4gICAgICAgICAgPC9wPlxuXG4gICAgICAgICAgPHA+WW91J2xsIGdldCA8c3Ryb25nPiR7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZHMubGVuZ3RoICogMTFcbiAgICAgICAgICB9ICRSb2FyPC9zdHJvbmc+PC9wPlxuICAgICAgICAgICAgXG4gICAgICAgICAgPHA+JHtcbiAgICAgICAgICAgIGR1cGxpY2F0ZU1lc3NhZ2UgPyBkdXBsaWNhdGVNZXNzYWdlIDogXCJcIlxuICAgICAgICAgIH0mIzEyODMzNzsgQXMgdGhlIHByb2Nlc3MgcmVxdWlyZXMgYSBtYW51YWwgc3RlcCwgdXBkYXRlIGNhbiB0YWtlIHVwIHRvIDI0aC48YnI+XG4gICAgICAgICAgJiMxMjgyMzY7IFlvdSB3aWxsIGJlIG5vdGlmaWVkIGJ5IGEgemVybyBBbGdvIHRyYW5zYWN0aW9uIHdoZW4gdGhlIHVwZGF0ZSBpcyBjb21wbGV0ZS48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidXR0b24tYWx0XCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIj5DbG9zZTwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGlkPVwic2VuZC1idXR0b25cIj5TZW5kIHJlcXVlc3Q8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgY29uc3QgcHJldmlld01lcmdlZEltZyA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tZXJnZWQtaW1nXCIpO1xuICAgIHByZXZpZXdNZXJnZWRJbWcuc3JjID0gdGhpcy5tZXJnZWRJbWdEYXRhVVJMO1xuXG4gICAgY29uc3Qgc2VuZEJ1dHRvbiA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjc2VuZC1idXR0b25cIik7XG4gICAgc2VuZEJ1dHRvbi5jdXJyZW50TW9kYWwgPSBtb2RhbDtcbiAgICBzZW5kQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnNlbmQuYmluZCh0aGlzKSwgZmFsc2UpO1xuXG4gICAgY29uc3QgbXlNb2RhbCA9IG5ldyB3aW5kb3cuYm9vdHN0cmFwLk1vZGFsKG1vZGFsLCB7fSk7XG5cbiAgICBteU1vZGFsLnNob3coKTtcblxuICAgIHJldHVybjtcbiAgfVxuXG4gIGFzeW5jIHByZXZpZXcoKSB7XG4gICAgbGV0IHJldmlld0J1dHRvbjtcbiAgICBpZiAoIXRoaXMuc2ltdWxhdG9yKSB7XG4gICAgICByZXZpZXdCdXR0b24gPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjYnV0dG9uLXJldmlld1wiKTtcbiAgICAgIHJldmlld0J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICByZXZpZXdCdXR0b24udGV4dENvbnRlbnQgPSBcIkdlbmVyYXRpbmcuLi5cIjtcbiAgICB9XG5cbiAgICBjb25zdCBtZXJnZWRJbWcgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjbWVyZ2VkLWltZ1wiKTtcblxuICAgIHRoaXMubWVyZ2VkUHJvcGVydGllcyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICB7fSxcbiAgICAgIHRoaXMuc2VsZWN0ZWRCYXRoZXIubWV0YWRhdGEucHJvcGVydGllc1xuICAgICk7IC8vbWFrZSBhIHNoYWxsb3cgY29weVxuXG4gICAgZm9yIChjb25zdCBzZWxlY3RlZENhcmQgb2YgdGhpcy5zZWxlY3RlZENhcmRzKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBzZWxlY3RlZENhcmQubWV0YWRhdGEucHJvcGVydGllcykge1xuICAgICAgICB0aGlzLm1lcmdlZFByb3BlcnRpZXNba2V5XSA9IHNlbGVjdGVkQ2FyZC5tZXRhZGF0YS5wcm9wZXJ0aWVzW2tleV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9jb25zb2xlLmxvZyhwcm9wZXJ0aWVzKVxuICAgIGxldCBjYW52YXMgPSBhd2FpdCBkcmF3KHRoaXMubWVyZ2VkUHJvcGVydGllcywgbGF5ZXJzLCBcImxheWVyc19pbWFnZXNcIik7XG5cbiAgICBpZiAodGhpcy5zaW11bGF0b3Ipe1xuICAgICAgY2FudmFzID0gYXdhaXQgdGhpcy5hcHBseVdpcE92ZXJsYXkoY2FudmFzKVxuICAgIH1cblxuICAgIHRoaXMubWVyZ2VkSW1nRGF0YVVSTCA9IGNhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XG5cbiAgICBtZXJnZWRJbWcuc3JjID0gdGhpcy5tZXJnZWRJbWdEYXRhVVJMO1xuXG4gICAgaWYgKCF0aGlzLnNpbXVsYXRvcikge1xuICAgICAgcmV2aWV3QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICByZXZpZXdCdXR0b24udGV4dENvbnRlbnQgPSBcIlJldmlldy4uLlwiO1xuICAgIH1cbiAgfVxuXG4gIGFwcGx5V2lwT3ZlcmxheShjYW52YXMpe1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblxuICAgICAgbGV0IHdpcENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgd2lwQ2FudmFzLndpZHRoID0gNTJcbiAgICAgIHdpcENhbnZhcy5oZWlnaHQgPSA1MlxuICAgICAgdmFyIGN0eCA9IHdpcENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcblxuICAgICAgICBjdHguZHJhd0ltYWdlKGNhbnZhcywgMiwgMilcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMClcbiAgICAgICAgcmVzb2x2ZSh3aXBDYW52YXMpXG5cbiAgICAgIH1cblxuICAgICAgaW1hZ2Uub25lcnJvciA9IChlKSA9PiB7XG4gICAgICAgIHJlamVjdChlKVxuICAgICAgfVxuXG4gICAgICBpbWFnZS5zcmMgPSAnYXNzZXRzL3dpcC5wbmcnXG5cbiAgICB9KVxuXG4gICAgICBcblxuICAgIFxuXG4gICAgXG5cbiAgfVxuXG4gIGFzeW5jIHNlbmQoZXZlbnQpIHtcbiAgICBjb25zdCBzZW5kQnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICBzZW5kQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBzZW5kQnV0dG9uLnRleHRDb250ZW50ID0gXCJXYWl0aW5nIGZvciBzaWduYXR1cmUuLi5cIjtcblxuICAgIGNvbnN0IHN1Z2dlc3RlZFBhcmFtcyA9IGF3YWl0IHRoaXMuYWxnb2RDbGllbnQuZ2V0VHJhbnNhY3Rpb25QYXJhbXMoKS5kbygpO1xuXG4gICAgLy9nZW5lcmF0ZSB0eFxuXG4gICAgY29uc3Qgbm90ZSA9IHtcbiAgICAgIGV2b2x2ZTogdGhpcy5zZWxlY3RlZEJhdGhlci5hc3NldElkLFxuICAgIH07XG5cbiAgICBjb25zdCB0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIGNvbnN0IGVuY29kZWROb3RlID0gdGV4dEVuY29kZXIuZW5jb2RlKEpTT04uc3RyaW5naWZ5KG5vdGUpKTtcblxuICAgIGlmICh0aGlzLnNlbGVjdGVkQ2FyZHMubGVuZ3RoID4gMTMpIHtcbiAgICAgIGFsZXJ0KFwiTm8gbW9yZSB0aGFuIDE0IGNhcmRzIGNhbiBiZSB1c2VkIGF0IG9uY2UuXCIpOyAvLzE2IG1pbnVzIGFzc2V0IGNvbmZpZyB0eCwgbWludXMgbm90aWZpY2F0aW9uIHR4LCBtaW51IGFzc2V0IHNlbmRcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgdHhucyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBzZWxlY3RlZENhcmQgb2YgdGhpcy5zZWxlY3RlZENhcmRzKSB7XG4gICAgICB0eG5zLnB1c2goXG4gICAgICAgIGFsZ29zZGsubWFrZUFzc2V0VHJhbnNmZXJUeG5XaXRoU3VnZ2VzdGVkUGFyYW1zRnJvbU9iamVjdCh7XG4gICAgICAgICAgZnJvbTogdGhpcy53YWxsZXRDb25uZWN0LndhbGxldEFkZHJlc3MsXG4gICAgICAgICAgdG86IHRoaXMuY2FyZHNDb2xsZWN0aW9uLmNvbGxlY3Rpb25zWzBdLmFkZHJlc3Nlc1swXSxcbiAgICAgICAgICBhbW91bnQ6IDEsXG4gICAgICAgICAgYXNzZXRJbmRleDogc2VsZWN0ZWRDYXJkLmFzc2V0SWQsXG4gICAgICAgICAgc3VnZ2VzdGVkUGFyYW1zOiBzdWdnZXN0ZWRQYXJhbXMsXG4gICAgICAgICAgbm90ZTogZW5jb2RlZE5vdGUsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vYXNzaWduIGdyb3VwXG4gICAgaWYgKHR4bnMubGVuZ3RoID4gMSkge1xuICAgICAgYWxnb3Nkay5hc3NpZ25Hcm91cElEKHR4bnMpO1xuICAgIH1cblxuICAgIGNvbnN0IHNpZ25lZFR4bnMgPSBhd2FpdCB0aGlzLndhbGxldENvbm5lY3Quc2lnblRyYW5zYWN0aW9ucyh0eG5zKTtcblxuICAgIC8vZGlzcGxheSB3YWl0IGFuaW1hdGlvblxuICAgIGNvbnN0IGN1cnJlbnRNb2RhbCA9IHNlbmRCdXR0b24uY3VycmVudE1vZGFsO1xuXG4gICAgY3VycmVudE1vZGFsLmlubmVySFRNTCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nIG1vZGFsLWRpYWxvZy1jZW50ZXJlZFwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuLWNsb3NlXCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5IFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIG1iLTNcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9ncmluZGVyLnBuZ1wiIHN0eWxlPVwid2lkdGg6IDEyOHB4OyBoZWlnaHQ6IGF1dG87XCI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBtYi0zXCI+XG4gICAgICAgICAgICBTZW5kaW5nIENhZmZlaW5lIENhcmQgdG8gdGhlIEdyaW5kZXIuLi5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAvL3NlbmQgdHJhbnNhY3Rpb25cbiAgICBsZXQgdHg7XG4gICAgdHJ5IHtcbiAgICAgIHR4ID0gYXdhaXQgdGhpcy5hbGdvZENsaWVudC5zZW5kUmF3VHJhbnNhY3Rpb24oc2lnbmVkVHhucykuZG8oKTtcblxuICAgICAgLy8gV2FpdCBmb3IgY29uZmlybWF0aW9uXG4gICAgICBsZXQgY29uZmlybWVkVHhuID0gYXdhaXQgYWxnb3Nkay53YWl0Rm9yQ29uZmlybWF0aW9uKFxuICAgICAgICB0aGlzLmFsZ29kQ2xpZW50LFxuICAgICAgICB0eC50eElkLFxuICAgICAgICA0XG4gICAgICApO1xuXG4gICAgICBjdXJyZW50TW9kYWwuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2cgbW9kYWwtZGlhbG9nLWNlbnRlcmVkXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4tY2xvc2VcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgbWItM1wiPlxuICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL2hlYXJ0LWN1cC5wbmdcIiB3aWR0aD1cIjYwXCI+PGJyPjxicj5cbiAgICAgICAgICBXZSBnb3QgeW91ciBjYXJkIGFuZCB5b3VyIGV2b2x1dGlvbiByZXF1ZXN0Ljxicj5cbiAgICAgICAgICBXZSdsbCBiZSBiYWNrIHRvIHlvdSB2ZXJ5IHNvb24uXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIj5DbG9zZTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAgIGN1cnJlbnRNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiaGlkZGVuLmJzLm1vZGFsXCIsIChldmVudCkgPT4ge1xuICAgICAgICAvL3JlbG9hZCB3aG9sZSBwYWdlIHRvIHVwZGF0ZSBob2xkaW5nc1xuICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY3VycmVudE1vZGFsLmlubmVySFRNTCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nIG1vZGFsLWRpYWxvZy1jZW50ZXJlZFwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuLWNsb3NlXCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIG1iLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCIgcm9sZT1cImFsZXJ0XCI+JHtlcnIubWVzc2FnZX0gPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIj5DbG9zZTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJHcmluZGVyIiwiQmFzZVBhZ2UiLCJjb25zdHJ1Y3RvciIsImFyZ3MiLCJzdXBlciIsImFyZ3VtZW50cyIsInRoaXMiLCJzaW11bGF0b3IiLCJsZW5ndGgiLCJ1aSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImJhdGhlcnNDb2xsZWN0aW9uIiwiY2FyZHNDb2xsZWN0aW9uIiwic2VsZWN0ZWRCYXRoZXIiLCJzZWxlY3RlZENhcmRzIiwibWVyZ2VkUHJvcGVydGllcyIsIm1lcmdlZEltZ0RhdGFVUkwiLCJjaG9vc2VDYXJkQnV0dG9uIiwicXVlcnlTZWxlY3RvciIsImxvYWQiLCJhc3luYyIsImxvYWRCYXRoZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJldmlldyIsImJpbmQiLCJxdWVyeVN0cmluZyIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiaGFzIiwiYmF0aGVyQXNzZXRJZCIsInBhcnNlSW50IiwiZ2V0IiwibmZ0IiwibmZ0cyIsImZpbHRlciIsImFzc2V0SWQiLCJkaXNwbGF5QmF0aGVyIiwiaG9sZGluZ3MiLCJkcm9wZG93bkRpdiIsImRyb3Bkb3duIiwicmVtb3ZlIiwibiIsIm1ldGFkYXRhIiwiZGlkU2VsZWN0QmF0aGVyIiwiYXBwZW5kIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImNsZWFyQ2FyZCIsIm5mdEluZGV4IiwiY3VycmVudFRhcmdldCIsImRhdGFzZXQiLCJpbmRleCIsInByb3BlcnRpZXMiLCJzcmMiLCJpbWFnZVVybCIsInZhbGlkYXRlIiwibG9hZENhcmRzIiwiZGlzYWJsZWQiLCJoaWRkZW4iLCJjaGlsZHJlbiIsIkFycmF5IiwiZnJvbSIsImVsZW1lbnQiLCJpZCIsImxvYWRBbGxDYXJkcyIsImRpc2FibGVkQXNzZXRJZHMiLCJtYWlubG9vcCIsImNvbnNvbGUiLCJsb2ciLCJyZXF1aXJlIiwicmVxdWlyZUtleSIsInB1c2giLCJzZWxlY3RlZENhcmQiLCJwcm9wZXJ0eSIsImVycm9yIiwiRXJyb3IiLCJuYW1lIiwiZGlkU2VsZWN0Q2FyZCIsImJvb3RzdHJhcCIsIkRyb3Bkb3duIiwic2xlZXAiLCJkZWxheVRpbWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJyZWplY3QiLCJ0ZXh0Q29udGVudCIsImRlZmF1bHQiLCJjb2xsZWN0aW9ucyIsImNhcmRDb2xsZWN0aW9uIiwiYyIsIm5mdENvbGxlY3Rpb24iLCJhbGdvSW5kZXhlciIsImkiLCJ0aGVuIiwiY2F0Y2giLCJlIiwiZGVmYXVsdENhcmQiLCJuZXdDYXJkRGl2IiwiY2xhc3NOYW1lIiwicmVtb3ZlQ2FyZCIsIm1hcCIsInJldmlld0J1dHRvbiIsInByZXZpZXciLCJtb2RhbCIsInRhYkluZGV4IiwiZHVwbGljYXRlTWVzc2FnZSIsImR1cGxpY2F0ZVNlbnNpdGl2ZUxheWVycyIsImNhcmQiLCJsYXllck5hbWUiLCJqb2luIiwic2VuZEJ1dHRvbiIsImN1cnJlbnRNb2RhbCIsInNlbmQiLCJNb2RhbCIsInNob3ciLCJtZXJnZWRJbWciLCJPYmplY3QiLCJhc3NpZ24iLCJrZXkiLCJjYW52YXMiLCJhcHBseVdpcE92ZXJsYXkiLCJ0b0RhdGFVUkwiLCJ3aXBDYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImN0eCIsImdldENvbnRleHQiLCJpbWFnZSIsIkltYWdlIiwib25sb2FkIiwiZHJhd0ltYWdlIiwib25lcnJvciIsInN1Z2dlc3RlZFBhcmFtcyIsImFsZ29kQ2xpZW50IiwiZ2V0VHJhbnNhY3Rpb25QYXJhbXMiLCJkbyIsIm5vdGUiLCJldm9sdmUiLCJlbmNvZGVkTm90ZSIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwiSlNPTiIsInN0cmluZ2lmeSIsImFsZXJ0IiwidHhucyIsIndhbGxldENvbm5lY3QiLCJ3YWxsZXRBZGRyZXNzIiwidG8iLCJhZGRyZXNzZXMiLCJhbW91bnQiLCJhc3NldEluZGV4Iiwic2lnbmVkVHhucyIsInNpZ25UcmFuc2FjdGlvbnMiLCJ0eCIsInNlbmRSYXdUcmFuc2FjdGlvbiIsInR4SWQiLCJyZWxvYWQiLCJlcnIiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==