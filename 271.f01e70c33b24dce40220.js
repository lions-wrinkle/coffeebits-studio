"use strict";(self.webpackChunkstudio=self.webpackChunkstudio||[]).push([[271,998,468,298],{6998:(t,e,a)=>{a.r(e),a.d(e,{BasePage:()=>s});class s{constructor(t,e,a,s){this.walletConnect=t,this.algodClient=a,this.algoIndexer=s,this.holdings=e}}},1271:(t,e,a)=>{a.r(e),a.d(e,{Home:()=>r});var s=a(6998),n=a(5298),i=a(5190),o=a(7304);class r extends s.BasePage{constructor(){super(...arguments),this.ui=document.createElement("div"),this.ui.innerHTML='\n        \x3c!--<h1>Welcome to the Studio</h1>--\x3e\n        <div class="text-center">\n        <p id="info-message"></p>\n        </div>\n        <div class="springboard d-flex flex-column flex-md-row w-100">\n\n            <div class="springboard-item springboard-main-item mb-3 me-md-2">\n                <a href="?grinder" class="d-block" style="background-image: url(\'assets/springbord-grinder.png\'); background-color: #d39e27;" data-page-link="grinder">\n                    <h3>Grinder</h3>\n                    <p>Use Caffeine Cards to modify your Bathers</p>\n                </a>\n            </div>\n\n            <div class="flex-fill d-flex flex-column">\n                <div class="flex-fill springboard-item mb-3 ms-md-2">\n                    <a href="?cards" class="d-block"\n                        style="background-image: url(\'assets/springboard-cards.png\'); background-color: #bb5f00;" data-page-link="cards">\n                        <h3>Caffeine<br>Cards</h3>\n                        <p>Browse all cards</p>\n                    </a>\n                </div>\n                <div class="flex-fill d-flex springboard-item mb-3 ms-md-2">\n                    <a href="?good-morning" class="d-block w-50 me-3"\n                        style="background-image: url(\'assets/springboard-gm.png\'); background-position: bottom right; background-size: 30%; background-color: #12c1b1;" data-page-link="good-morning">\n                        <h3>GM!</h3>\n                        <p>GM GIFs generator</p>\n                    </a>\n                    <a href="?longbois" class="d-block w-50"\n                        style="background-image: url(\'assets/springbord-longboi.png\'); background-color: #5b9c1a; background-position: bottom right; background-size: auto 80%;" data-page-link="longbois">\n                        <h3>Longbois</h3>\n                        <p>Longboi generator</p>\n                    </a>\n                </div>\n            </div>\n        </div>\n\n        <h3>Last grinds</h3>\n        <p class="dark-text">Don\'t miss new grinds by following <a href="https://twitter.com/coffeebits_bot" target="_blank">@coffeebits_bot</a></p>\n        <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 gy-4" id="last-grinds">\n\n        ';try{this.loadPacks()}catch(t){console.error(t)}this.loadLastGrinds()}async loadPacks(){const t=await(0,n.loadPacks)(this.holdings);t&&t.claimablePacks.length>0&&(this.ui.querySelector("#info-message").innerHTML=`<img\n      src="assets/pack-icon.png" height="34"><a href="?packs" data-page-link="packs" class="text-decoration-underline">You have ${t.claimablePacks.length} Caffeine Card${t.claimablePacks.length>1?"s":""} to claim!</a>`,window.enableNavigationLinks())}async loadLastGrinds(){const t=i.Z.filter((t=>"bathers"===t.name))[0].addresses[0];let e=(await this.algoIndexer.lookupAccountTransactions(t).txType("acfg").limit(48).do()).transactions;e.sort(((t,e)=>e["round-time"]-t["round-time"]));let a=[];for(const t of e)try{if(!t.note)continue;if("update"===JSON.parse(atob(t.note)).type){const e=t["asset-config-transaction"]["asset-id"];a.push(e)}}catch(t){console.error(t)}a=a.filter(((t,e)=>a.indexOf(t)===e)),a=a.slice(0,12);const s=this.ui.querySelector("#last-grinds");let n=new IntersectionObserver(this.loadVisibleNFTs.bind(this),{root:null,rootMargin:"0px",threshold:0});for(const t of a){const e=document.createElement("div");e.className="col",e.dataset.assetId=t,e.innerHTML='\n          <div class="list-item h-100 d-flex flex-column">\n              <div class="ratio ratio-1x1 placeholder-bather">\n                <img class="nft-img img-fluid" loading="lazy" hidden>\n              </div>\n              <div class="list-item-text flex-fill d-flex flex-column">\n                  <h4 class="nft-name">xxx</h4>\n                  <span class="dark-text nft-holder"></span>\n                  <div class="flex-fill d-flex justify-content-end align-items-end mt-2">\n                        <div class="dropdown"></div>\n                  </div>\n              </div>\n          </div>\n      ',s.append(e),n.observe(e)}}sleep(t){return new Promise((e=>setTimeout(e,t)))}loadVisibleNFTs(t,e){t.forEach((async t=>{if(!t.isIntersecting)return;const e=t.target;if(e.dataset.loading)return;const a=e.dataset.assetId;if(!a)return;e.dataset.loading=!0;const s=await this.algoIndexer.lookupAssetByID(a).do();if(s){const t=new o.Sm(a,s.asset);e.querySelector(".nft-name").textContent="#"+t.unitName.substring(4,8),e.querySelector(".dropdown").innerHTML=`\n          <a href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">\n          <img src="assets/more.png" class="more">\n          </a>\n          <ul class="dropdown-menu">\n              <li><a class="dropdown-item" href="https://www.nftexplorer.app/asset/${t.assetId}" target="_blank">NFTExplorer</a></li>\n              <li><a class="dropdown-item" href="https://www.randgallery.com/algo-collection/?address=${t.assetId}" target="_blank">RandGallery</a></li>\n              <li><a class="dropdown-item" href="https://algoxnft.com/asset/${t.assetId}" target="_blank">ALGOxNFT</a></li>\n              <li><a class="dropdown-item" href="https://shufl.app/detail/${t.assetId}" target="_blank">Shufl</a></li>\n          </ul>\n    `,await t.load(this.algoIndexer);const n=e.querySelector(".nft-img");n.src=t.imageUrl,n.hidden=!1,t.handleImageError(n);const i=await this.algoIndexer.lookupAssetBalances(a).do(),r=e.querySelector(".nft-holder");if(i)for(const t of i.balances)if(t.amount>0){r.textContent=t.address.substring(0,12)+"...";try{const e=await fetch(`https://api.nf.domains/nfd/address?address=${t.address}`);if(200===e.status){const t=await e.json();r.textContent=t[0].name}}catch(t){console.error(t)}}}}))}}},5298:(t,e,a)=>{a.r(e),a.d(e,{Packs:()=>c,loadPacks:()=>l});var s=a(6998),n=a(7304),i=a(4050),o=a(4393);const r="https://api.atomixwap.xyz";async function l(t){let e=await fetch(`${r}/caffeine-card-pack/get-all`);if(200===e.status){let a=await e.json();if(t){let e=[];const s=t.bathers.nfts.map((t=>t.assetId));for(const t of a.packs)s.includes(t[0])&&e.push(t);return{claimablePacks:e,escrowAddress:a.escrowAddress}}return a.packs}throw new Error(`Can't load packs. Error ${e.status}`)}class c extends s.BasePage{constructor(){super(...arguments),this.ui=document.createElement("div"),this.ui.innerHTML='\n    <h1>Caffeine Cards Packs</h1>\n    <p id="packs-status" class="dark-text text-center">Loading packs...</p>\n    ',this.claimablePacks,this.escrowAddress,this.fetchPacks()}sleep(t){return new Promise((e=>setTimeout(e,t)))}async fetchPacks(){const t=this.ui.querySelector("#packs-status");try{const e=await l(this.holdings);if(this.claimablePacks=e.claimablePacks,this.escrowAddress=e.escrowAddress,this.claimablePacks.length>0){let e="";this.claimablePacks.length>1&&(e="s"),t.textContent=`${this.claimablePacks.length} pack${e} to claim!`}else t.innerHTML='<img src="assets/pack0-0.png" style="width: 240px; opacity: 0.2;" class="mb-3"><br>\n        No pack to open.<br>\n        Make sure Bathers are not listed on marketplaces to see your packs.<br><br>\n        A Caffeine Card is given for every Bather bought in the <a href="https://instantshuffle.com/shuffle/yUSbzq61ZvqTIsSvLycS" target="_blank">Instant Shuffle.</a>\n        ';const a=document.createElement("div");a.className="row row-cols-2 row-cols-md-3 row-cols-lg-4 gy-4 mb-5 justify-content-center",this.ui.append(a);for(const t of this.claimablePacks){const e=document.createElement("div");e.className="col text-center ps-3 pe-3",a.append(e);const s=document.createElement("canvas");s.className="w-100 mb-0";const n=new d(s,t[1],this.algoIndexer);e.append(s),await n.load().then((()=>{const a=document.createElement("div");a.className="dark-text mt-0 pt-0 mb-2 hidden-pack-name",a.style.opacity="0",a.style["max-height"]="0",a.textContent=n.nft.name,e.append(a);const s=document.createElement("button");s.className="open-pack-button",s.textContent="Open",s.dataset.batherId=t[0],s.dataset.caffeineCardId=t[1],s.addEventListener("click",this.openPack.bind(this,n,a),!1),e.append(s)})).catch((t=>{console.log(t)})),this.sleep(300)}}catch(e){console.error(e),t.textContent=e.message}}disableAllButtons(t){this.ui.querySelectorAll(".open-pack-button").forEach((e=>{e===t||e.dataset.opened||(e.className="open-pack-button soft-disabled",e.disabled=!0)}))}enableAllButtons(t){this.ui.querySelectorAll(".open-pack-button").forEach((e=>{e===t||e.dataset.opened||(e.className="open-pack-button",e.disabled=!1)}))}async openPack(t,e,a){const s=a.currentTarget;this.disableAllButtons(s);const n=s.dataset.batherId,o=s.dataset.caffeineCardId;try{s.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>',s.disabled=!0;let a=await this.algodClient.getTransactionParams().do(),l=[i.makeAssetTransferTxnWithSuggestedParamsFromObject({from:this.walletConnect.walletAddress,to:this.walletConnect.walletAddress,amount:0,assetIndex:parseInt(o),suggestedParams:a}),i.makeAssetTransferTxnWithSuggestedParamsFromObject({from:this.escrowAddress,to:this.walletConnect.walletAddress,amount:1,assetIndex:parseInt(o),suggestedParams:a})];i.assignGroupID(l);const c=await this.walletConnect.signTransactions(l),d={batherId:n,txn:btoa(String.fromCharCode.apply(null,c[0])),suggestedParams:a};s.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n      Opening...',s.disabled=!0;const h=await fetch(r+"/caffeine-card-pack/claim/",{method:"POST",body:JSON.stringify(d),headers:{Accept:"application/json","Content-Type":"application/json"}});if(200!==h.status){let t;try{t=await h.json()}catch(t){}throw t&&t.error?new Error(t.error):new Error(`Error ${h.status}`)}s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">\n        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>\n      </svg>\n        Opened',s.disabled=!0,s.dataset.opened=!0,t.animate(),e.style.opacity="1",e.style["max-height"]="500px",this.enableAllButtons(s)}catch(t){console.error(t),alert(t.message),s.textContent="Open",s.disabled=!1,this.enableAllButtons(s)}}}class d{constructor(t,e,a){this.caffeineCardId=e,this.algoIndexer=a,this.width=660,this.height=960,this.imageWidth=960,this.numAnimationImage=4,this.canvas=t,this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.context.translate(-(this.imageWidth-this.width)/2,0),this.nft,this.cardImage,this.cardMask,this.animationImages}async load(){await this.loadAllImage()}static loadImage(t){return new Promise(((e,a)=>{const s=new Image;s.onload=()=>{e(s)},s.onerror=a,s.src=t}))}async loadAllImage(){this.animationImages=[];const t=this.caffeineCardId%4,e=await d.loadImage(`assets/pack${t}-0.png`);this.animationImages.push(e),this.drawPack(),this.cardMask=await d.loadImage("assets/card-mask.png");const a=await this.algoIndexer.lookupAssetByID(this.caffeineCardId).do();this.nft=new n.Sm(this.caffeineCardId,a.asset),await this.nft.load(this.algoIndexer);try{this.cardImage=await d.loadImage(this.nft.imageUrl)}catch(t){console.log("Error loading image from primary, trying secondary");try{this.cardImage=await d.loadImage(this.nft.imageUrlAlternate)}catch(t){this.cardImage=await d.loadImage("assets/empty-card.png")}}for(let e=1;e<=this.numAnimationImage;e++){const a=await d.loadImage(`assets/pack${t}-${e}.png`);this.animationImages.push(a)}}async drawPack(){this.context.drawImage(this.animationImages[0],0,0,this.imageWidth,this.height)}static easeInOutQuad(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}async animate(){let t=.15,e=1;const a=setInterval((()=>{if(this.context.clearRect(0,0,this.imageWidth,this.height),this.context.drawImage(this.cardMask,0,0,this.imageWidth,this.height),this.context.globalCompositeOperation="source-in",this.context.drawImage(this.cardImage,0,0,this.imageWidth,this.height),this.context.globalCompositeOperation="source-over",this.context.drawImage(this.animationImages[e],0,0,this.imageWidth,this.height),e===this.numAnimationImage){clearInterval(a),o.sparkles(this.canvas),t=.05;const e=.8;let s=0;const n=setInterval((()=>{const a=d.easeInOutQuad(s/e)*this.height;this.context.clearRect(0,0,this.imageWidth,this.height),this.context.drawImage(this.cardMask,0,0,this.imageWidth,this.height),this.context.globalCompositeOperation="source-in",this.context.drawImage(this.cardImage,0,0,this.imageWidth,this.height),this.context.globalCompositeOperation="source-over",this.context.drawImage(this.animationImages[this.numAnimationImage],0,a,this.imageWidth,this.height),s+=t,s>=e&&clearInterval(n)}),1e3*t)}e++}),1e3*t)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxXQUNMbEssS0FBS2lLLFFBR1BxQyxHQUFlUixFQUVYUSxHQUFlRCxHQUNqQkQsY0FBY0csRUFDaEIsR0FDaUIsSUFBaEJULEVBQ0wsQ0FFQUMsR0FBYyxHQUNHLElBQWhCRCxFQUNMLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkaW8vLi9zcmMvcGFnZXMvYmFzZS5qcyIsIndlYnBhY2s6Ly9zdHVkaW8vLi9zcmMvcGFnZXMvaG9tZS5qcyIsIndlYnBhY2s6Ly9zdHVkaW8vLi9zcmMvcGFnZXMvcGFja3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5leHBvcnQgY2xhc3MgQmFzZVBhZ2Uge1xuXG4gICAgY29uc3RydWN0b3Iod2FsbGV0Q29ubmVjdCwgaG9sZGluZ3MsIGFsZ29kQ2xpZW50LCBhbGdvSW5kZXhlcil7XG5cbiAgICAgICAgdGhpcy53YWxsZXRDb25uZWN0ID0gd2FsbGV0Q29ubmVjdDtcbiAgICAgICAgdGhpcy5hbGdvZENsaWVudCA9IGFsZ29kQ2xpZW50O1xuICAgICAgICB0aGlzLmFsZ29JbmRleGVyID0gYWxnb0luZGV4ZXI7XG4gICAgICAgIHRoaXMuaG9sZGluZ3MgPSBob2xkaW5ncztcblxuICAgICAgICBcblxuICAgIH1cblxufSIsImltcG9ydCB7IEJhc2VQYWdlIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgbG9hZFBhY2tzIH0gZnJvbSBcIi4vcGFja3MuanNcIjtcbmltcG9ydCBjb2xsZWN0aW9uIGZyb20gXCIuLi9jb2xsZWN0aW9ucy5qc1wiO1xuaW1wb3J0IHsgTkZUIH0gZnJvbSBcImFsZ28tbmZ0LXV0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBIb21lIGV4dGVuZHMgQmFzZVBhZ2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuXG4gICAgdGhpcy51aSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy51aS5pbm5lckhUTUwgPSBgXG4gICAgICAgIDwhLS08aDE+V2VsY29tZSB0byB0aGUgU3R1ZGlvPC9oMT4tLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyXCI+XG4gICAgICAgIDxwIGlkPVwiaW5mby1tZXNzYWdlXCI+PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNwcmluZ2JvYXJkIGQtZmxleCBmbGV4LWNvbHVtbiBmbGV4LW1kLXJvdyB3LTEwMFwiPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3ByaW5nYm9hcmQtaXRlbSBzcHJpbmdib2FyZC1tYWluLWl0ZW0gbWItMyBtZS1tZC0yXCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIj9ncmluZGVyXCIgY2xhc3M9XCJkLWJsb2NrXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2Fzc2V0cy9zcHJpbmdib3JkLWdyaW5kZXIucG5nJyk7IGJhY2tncm91bmQtY29sb3I6ICNkMzllMjc7XCIgZGF0YS1wYWdlLWxpbms9XCJncmluZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMz5HcmluZGVyPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPHA+VXNlIENhZmZlaW5lIENhcmRzIHRvIG1vZGlmeSB5b3VyIEJhdGhlcnM8L3A+XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWZpbGwgZC1mbGV4IGZsZXgtY29sdW1uXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtZmlsbCBzcHJpbmdib2FyZC1pdGVtIG1iLTMgbXMtbWQtMlwiPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiP2NhcmRzXCIgY2xhc3M9XCJkLWJsb2NrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdhc3NldHMvc3ByaW5nYm9hcmQtY2FyZHMucG5nJyk7IGJhY2tncm91bmQtY29sb3I6ICNiYjVmMDA7XCIgZGF0YS1wYWdlLWxpbms9XCJjYXJkc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzPkNhZmZlaW5lPGJyPkNhcmRzPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPkJyb3dzZSBhbGwgY2FyZHM8L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC1maWxsIGQtZmxleCBzcHJpbmdib2FyZC1pdGVtIG1iLTMgbXMtbWQtMlwiPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiP2dvb2QtbW9ybmluZ1wiIGNsYXNzPVwiZC1ibG9jayB3LTUwIG1lLTNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2Fzc2V0cy9zcHJpbmdib2FyZC1nbS5wbmcnKTsgYmFja2dyb3VuZC1wb3NpdGlvbjogYm90dG9tIHJpZ2h0OyBiYWNrZ3JvdW5kLXNpemU6IDMwJTsgYmFja2dyb3VuZC1jb2xvcjogIzEyYzFiMTtcIiBkYXRhLXBhZ2UtbGluaz1cImdvb2QtbW9ybmluZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzPkdNITwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5HTSBHSUZzIGdlbmVyYXRvcjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiP2xvbmdib2lzXCIgY2xhc3M9XCJkLWJsb2NrIHctNTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2Fzc2V0cy9zcHJpbmdib3JkLWxvbmdib2kucG5nJyk7IGJhY2tncm91bmQtY29sb3I6ICM1YjljMWE7IGJhY2tncm91bmQtcG9zaXRpb246IGJvdHRvbSByaWdodDsgYmFja2dyb3VuZC1zaXplOiBhdXRvIDgwJTtcIiBkYXRhLXBhZ2UtbGluaz1cImxvbmdib2lzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+TG9uZ2JvaXM8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+TG9uZ2JvaSBnZW5lcmF0b3I8L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8aDM+TGFzdCBncmluZHM8L2gzPlxuICAgICAgICA8cCBjbGFzcz1cImRhcmstdGV4dFwiPkRvbid0IG1pc3MgbmV3IGdyaW5kcyBieSBmb2xsb3dpbmcgPGEgaHJlZj1cImh0dHBzOi8vdHdpdHRlci5jb20vY29mZmVlYml0c19ib3RcIiB0YXJnZXQ9XCJfYmxhbmtcIj5AY29mZmVlYml0c19ib3Q8L2E+PC9wPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93IHJvdy1jb2xzLTIgcm93LWNvbHMtbWQtMyByb3ctY29scy1sZy00IGd5LTRcIiBpZD1cImxhc3QtZ3JpbmRzXCI+XG5cbiAgICAgICAgYDtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvYWRQYWNrcygpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH1cblxuICAgIHRoaXMubG9hZExhc3RHcmluZHMoKTtcbiAgfVxuXG4gIGFzeW5jIGxvYWRQYWNrcygpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBsb2FkUGFja3ModGhpcy5ob2xkaW5ncyk7XG5cbiAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5jbGFpbWFibGVQYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpbmZvTWVzc2FnZVNwYW4gPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjaW5mby1tZXNzYWdlXCIpO1xuICAgICAgaW5mb01lc3NhZ2VTcGFuLmlubmVySFRNTCA9IGA8aW1nXG4gICAgICBzcmM9XCJhc3NldHMvcGFjay1pY29uLnBuZ1wiIGhlaWdodD1cIjM0XCI+PGEgaHJlZj1cIj9wYWNrc1wiIGRhdGEtcGFnZS1saW5rPVwicGFja3NcIiBjbGFzcz1cInRleHQtZGVjb3JhdGlvbi11bmRlcmxpbmVcIj5Zb3UgaGF2ZSAke3Jlc3VsdC5jbGFpbWFibGVQYWNrcy5sZW5ndGh9IENhZmZlaW5lIENhcmQke3Jlc3VsdC5jbGFpbWFibGVQYWNrcy5sZW5ndGggPiAxID8gJ3MnIDogJyd9IHRvIGNsYWltITwvYT5gO1xuXG4gICAgICB3aW5kb3cuZW5hYmxlTmF2aWdhdGlvbkxpbmtzKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZExhc3RHcmluZHMoKSB7XG4gICAgY29uc3QgYmF0aGVyc0NvbGxlY3Rpb25JbmZvID0gY29sbGVjdGlvbi5maWx0ZXIoXG4gICAgICAoYykgPT4gYy5uYW1lID09PSBcImJhdGhlcnNcIlxuICAgICk7XG5cbiAgICBjb25zdCBiYXRoZXJzQ3JlYXRvckFkZHJlc3MgPSBiYXRoZXJzQ29sbGVjdGlvbkluZm9bMF0uYWRkcmVzc2VzWzBdO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5hbGdvSW5kZXhlclxuICAgICAgLmxvb2t1cEFjY291bnRUcmFuc2FjdGlvbnMoYmF0aGVyc0NyZWF0b3JBZGRyZXNzKVxuICAgICAgLnR4VHlwZShcImFjZmdcIilcbiAgICAgIC5saW1pdCg0OClcbiAgICAgIC5kbygpO1xuXG4gICAgLy9vcmRlciBieSBkYXRlXG4gICAgbGV0IHRyYW5zYWN0aW9ucyA9IHJlc3VsdC50cmFuc2FjdGlvbnM7XG4gICAgdHJhbnNhY3Rpb25zLnNvcnQoKGEsIGIpID0+IGJbXCJyb3VuZC10aW1lXCJdIC0gYVtcInJvdW5kLXRpbWVcIl0pO1xuXG4gICAgbGV0IGFzc2V0cyA9IFtdO1xuXG4gICAgY29uc3QgbWF4QXNzZXRzID0gMTI7XG5cbiAgICBmb3IgKGNvbnN0IHR4IG9mIHRyYW5zYWN0aW9ucykge1xuICAgICAgdHJ5IHtcblxuICAgICAgICBpZiAoIXR4Lm5vdGUpe1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgbm90ZSA9IEpTT04ucGFyc2UoYXRvYih0eC5ub3RlKSk7XG5cbiAgICAgICAgaWYgKG5vdGUudHlwZSA9PT0gXCJ1cGRhdGVcIikge1xuICAgICAgICAgIGNvbnN0IGFzc2V0SWQgPSB0eFtcImFzc2V0LWNvbmZpZy10cmFuc2FjdGlvblwiXVtcImFzc2V0LWlkXCJdO1xuXG4gICAgICAgICAgYXNzZXRzLnB1c2goYXNzZXRJZCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9yZW1vdmUgZG91Ymxlc1xuICAgIGFzc2V0cyA9IGFzc2V0cy5maWx0ZXIoKGl0ZW0sIGluZGV4KSA9PiBhc3NldHMuaW5kZXhPZihpdGVtKSA9PT0gaW5kZXgpO1xuXG4gICAgLy9rZWVwIG9ubHkgdGhlIGRlZmluZWQgbWF4IGFzc2V0c1xuICAgIGFzc2V0cyA9IGFzc2V0cy5zbGljZSgwLCBtYXhBc3NldHMpO1xuXG4gICAgLy9jcmVhdGUgaHRtbCBlbGVtZW50c1xuICAgIGNvbnN0IGxpc3REaXYgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjbGFzdC1ncmluZHNcIik7XG5cbiAgICAvL2xvYWQgb25seSB3aGVuIGVsZW1lbnQgaXMgdmlzaWJsZVxuICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgcm9vdDogbnVsbCwgLy9icm93c2VyIHZpZXdwb3J0XG4gICAgICByb290TWFyZ2luOiBcIjBweFwiLFxuICAgICAgdGhyZXNob2xkOiAwLjAsXG4gICAgfTtcblxuICAgIGxldCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIHRoaXMubG9hZFZpc2libGVORlRzLmJpbmQodGhpcyksXG4gICAgICBvcHRpb25zXG4gICAgKTtcblxuICAgIGZvciAoY29uc3QgYXNzZXQgb2YgYXNzZXRzKSB7XG4gICAgICBjb25zdCBuZnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgbmZ0RGl2LmNsYXNzTmFtZSA9IFwiY29sXCI7XG4gICAgICBuZnREaXYuZGF0YXNldC5hc3NldElkID0gYXNzZXQ7XG5cbiAgICAgIG5mdERpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImxpc3QtaXRlbSBoLTEwMCBkLWZsZXggZmxleC1jb2x1bW5cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJhdGlvIHJhdGlvLTF4MSBwbGFjZWhvbGRlci1iYXRoZXJcIj5cbiAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwibmZ0LWltZyBpbWctZmx1aWRcIiBsb2FkaW5nPVwibGF6eVwiIGhpZGRlbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LWl0ZW0tdGV4dCBmbGV4LWZpbGwgZC1mbGV4IGZsZXgtY29sdW1uXCI+XG4gICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJuZnQtbmFtZVwiPnh4eDwvaDQ+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRhcmstdGV4dCBuZnQtaG9sZGVyXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtZmlsbCBkLWZsZXgganVzdGlmeS1jb250ZW50LWVuZCBhbGlnbi1pdGVtcy1lbmQgbXQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyb3Bkb3duXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuXG4gICAgICBsaXN0RGl2LmFwcGVuZChuZnREaXYpO1xuXG4gICAgICBvYnNlcnZlci5vYnNlcnZlKG5mdERpdik7XG4gICAgfVxuICB9XG5cbiAgc2xlZXAoZGVsYXlUaW1lKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5VGltZSkpO1xuICB9XG5cbiAgbG9hZFZpc2libGVORlRzKGVudHJpZXMsIG9ic2VydmVyKSB7XG4gICAgZW50cmllcy5mb3JFYWNoKGFzeW5jIChlbnRyeSkgPT4ge1xuICAgICAgaWYgKCFlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5mdERpdiA9IGVudHJ5LnRhcmdldDtcblxuICAgICAgaWYgKG5mdERpdi5kYXRhc2V0LmxvYWRpbmcpIHtcbiAgICAgICAgLy9sb2FkaW5nIGhhdmUgYWxyZWFkeSBzdGFydGVkXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYXNzZXRJZCA9IG5mdERpdi5kYXRhc2V0LmFzc2V0SWQ7XG5cbiAgICAgIGlmICghYXNzZXRJZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG5mdERpdi5kYXRhc2V0LmxvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAvL2xvYWQgbmZ0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmFsZ29JbmRleGVyLmxvb2t1cEFzc2V0QnlJRChhc3NldElkKS5kbygpO1xuXG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IG5mdCA9IG5ldyBORlQoYXNzZXRJZCwgcmVzdWx0LmFzc2V0KTtcblxuICAgICAgICBuZnREaXYucXVlcnlTZWxlY3RvcihcIi5uZnQtbmFtZVwiKS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgXCIjXCIgKyBuZnQudW5pdE5hbWUuc3Vic3RyaW5nKDQsIDgpO1xuXG4gICAgICAgIC8vYWRkIGRyb3Bkb3duIHdpdGggb3B0aW9uc1xuICAgICAgICBjb25zdCBkcm9wZG93bkRpdiA9IG5mdERpdi5xdWVyeVNlbGVjdG9yKFwiLmRyb3Bkb3duXCIpO1xuXG4gICAgICAgIGRyb3Bkb3duRGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8YSBocmVmPVwiI1wiIHJvbGU9XCJidXR0b25cIiBkYXRhLWJzLXRvZ2dsZT1cImRyb3Bkb3duXCIgYXJpYS1leHBhbmRlZD1cImZhbHNlXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvbW9yZS5wbmdcIiBjbGFzcz1cIm1vcmVcIj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPlxuICAgICAgICAgICAgICA8bGk+PGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgaHJlZj1cImh0dHBzOi8vd3d3Lm5mdGV4cGxvcmVyLmFwcC9hc3NldC8ke25mdC5hc3NldElkfVwiIHRhcmdldD1cIl9ibGFua1wiPk5GVEV4cGxvcmVyPC9hPjwvbGk+XG4gICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiaHR0cHM6Ly93d3cucmFuZGdhbGxlcnkuY29tL2FsZ28tY29sbGVjdGlvbi8/YWRkcmVzcz0ke25mdC5hc3NldElkfVwiIHRhcmdldD1cIl9ibGFua1wiPlJhbmRHYWxsZXJ5PC9hPjwvbGk+XG4gICAgICAgICAgICAgIDxsaT48YSBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBocmVmPVwiaHR0cHM6Ly9hbGdveG5mdC5jb20vYXNzZXQvJHtuZnQuYXNzZXRJZH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj5BTEdPeE5GVDwvYT48L2xpPlxuICAgICAgICAgICAgICA8bGk+PGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgaHJlZj1cImh0dHBzOi8vc2h1ZmwuYXBwL2RldGFpbC8ke25mdC5hc3NldElkfVwiIHRhcmdldD1cIl9ibGFua1wiPlNodWZsPC9hPjwvbGk+XG4gICAgICAgICAgPC91bD5cbiAgICBgO1xuXG4gICAgICAgIGF3YWl0IG5mdC5sb2FkKHRoaXMuYWxnb0luZGV4ZXIpO1xuXG4gICAgICAgIGNvbnN0IGltZyA9IG5mdERpdi5xdWVyeVNlbGVjdG9yKFwiLm5mdC1pbWdcIik7XG4gICAgICAgIGltZy5zcmMgPSBuZnQuaW1hZ2VVcmw7XG4gICAgICAgIGltZy5oaWRkZW4gPSBmYWxzZTtcblxuICAgICAgICBuZnQuaGFuZGxlSW1hZ2VFcnJvcihpbWcpO1xuXG4gICAgICAgIC8vbG9hZCBob2xkZXJcbiAgICAgICAgY29uc3QgcmVzdWx0SG9sZGVyID0gYXdhaXQgdGhpcy5hbGdvSW5kZXhlclxuICAgICAgICAgIC5sb29rdXBBc3NldEJhbGFuY2VzKGFzc2V0SWQpXG4gICAgICAgICAgLmRvKCk7XG5cbiAgICAgICAgY29uc3QgaG9sZGVyU3BhbiA9IG5mdERpdi5xdWVyeVNlbGVjdG9yKFwiLm5mdC1ob2xkZXJcIik7XG5cbiAgICAgICAgaWYgKHJlc3VsdEhvbGRlcikge1xuICAgICAgICAgIGZvciAoY29uc3QgYmFsYW5jZSBvZiByZXN1bHRIb2xkZXIuYmFsYW5jZXMpIHtcbiAgICAgICAgICAgIGlmIChiYWxhbmNlLmFtb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgaG9sZGVyU3Bhbi50ZXh0Q29udGVudCA9IGJhbGFuY2UuYWRkcmVzcy5zdWJzdHJpbmcoMCwgMTIpICsgXCIuLi5cIjtcblxuICAgICAgICAgICAgICAvL2xvYWQgbmZkXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgICAgICAgICAgIGBodHRwczovL2FwaS5uZi5kb21haW5zL25mZC9hZGRyZXNzP2FkZHJlc3M9JHtiYWxhbmNlLmFkZHJlc3N9YFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5mZFJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICAgICAgICAgICAgaG9sZGVyU3Bhbi50ZXh0Q29udGVudCA9IG5mZFJlc3VsdFswXS5uYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEJhc2VQYWdlIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgTkZUQ29sbGVjdGlvbiB9IGZyb20gXCJhbGdvLW5mdC11dGlsc1wiO1xuaW1wb3J0IGFsZ29zZGsgZnJvbSBcImFsZ29zZGtcIjtcbmltcG9ydCB7IE5GVCB9IGZyb20gXCJhbGdvLW5mdC11dGlsc1wiO1xuaW1wb3J0IHBhcnR5IGZyb20gXCJwYXJ0eS1qc1wiO1xuXG5jb25zdCBQQUNLU19BUElfVVJMID0gXCJodHRwczovL2FwaS5hdG9taXh3YXAueHl6XCI7XG4vL2NvbnN0IFBBQ0tTX0FQSV9VUkwgPSBcImh0dHBzOi8vbG9jYWxob3N0XCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkUGFja3MoaG9sZGluZ3MpIHtcbiAgbGV0IHJlc3VsdCA9IGF3YWl0IGZldGNoKGAke1BBQ0tTX0FQSV9VUkx9L2NhZmZlaW5lLWNhcmQtcGFjay9nZXQtYWxsYCk7XG5cbiAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IDIwMCkge1xuICAgIGxldCBqc29uID0gYXdhaXQgcmVzdWx0Lmpzb24oKTtcblxuICAgIFxuXG4gICAgaWYgKGhvbGRpbmdzKSB7XG5cbiAgICAgIGxldCBjbGFpbWFibGVQYWNrcyA9IFtdO1xuXG4gICAgICAvL2NvbXBhcmUgd2l0aCBob2xkaW5nc1xuICAgICAgY29uc3QgYmF0aGVyc0lkcyA9IGhvbGRpbmdzLmJhdGhlcnMubmZ0cy5tYXAoKG5mdCkgPT4gbmZ0LmFzc2V0SWQpO1xuXG4gICAgICBmb3IgKGNvbnN0IHBhY2sgb2YganNvbi5wYWNrcykge1xuICAgICAgICBpZiAoYmF0aGVyc0lkcy5pbmNsdWRlcyhwYWNrWzBdKSkge1xuICAgICAgICAgIGNsYWltYWJsZVBhY2tzLnB1c2gocGFjayk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2xhaW1hYmxlUGFja3M6IGNsYWltYWJsZVBhY2tzLFxuICAgICAgICBlc2Nyb3dBZGRyZXNzOiBqc29uLmVzY3Jvd0FkZHJlc3MsXG4gICAgICB9O1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBqc29uLnBhY2tzO1xuICAgIH1cblxuICAgIFxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2FuXFwndCBsb2FkIHBhY2tzLiBFcnJvciAke3Jlc3VsdC5zdGF0dXN9YCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBhY2tzIGV4dGVuZHMgQmFzZVBhZ2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuXG4gICAgdGhpcy51aSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy51aS5pbm5lckhUTUwgPSBgXG4gICAgPGgxPkNhZmZlaW5lIENhcmRzIFBhY2tzPC9oMT5cbiAgICA8cCBpZD1cInBhY2tzLXN0YXR1c1wiIGNsYXNzPVwiZGFyay10ZXh0IHRleHQtY2VudGVyXCI+TG9hZGluZyBwYWNrcy4uLjwvcD5cbiAgICBgO1xuXG4gICAgdGhpcy5jbGFpbWFibGVQYWNrcztcbiAgICB0aGlzLmVzY3Jvd0FkZHJlc3M7XG5cbiAgICB0aGlzLmZldGNoUGFja3MoKTtcbiAgfVxuXG4gIHNsZWVwKGRlbGF5VGltZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheVRpbWUpKTtcbiAgfVxuXG4gIGFzeW5jIGZldGNoUGFja3MoKSB7XG4gICAgY29uc3QgcGFja1N0YXR1c1AgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3IoXCIjcGFja3Mtc3RhdHVzXCIpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxvYWRQYWNrcyh0aGlzLmhvbGRpbmdzKTtcblxuICAgICAgdGhpcy5jbGFpbWFibGVQYWNrcyA9IHJlc3VsdC5jbGFpbWFibGVQYWNrcztcbiAgICAgIHRoaXMuZXNjcm93QWRkcmVzcyA9IHJlc3VsdC5lc2Nyb3dBZGRyZXNzO1xuXG4gICAgICBpZiAodGhpcy5jbGFpbWFibGVQYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxldCBwbHVyYWwgPSBcIlwiO1xuICAgICAgICBpZiAodGhpcy5jbGFpbWFibGVQYWNrcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgcGx1cmFsID0gXCJzXCI7XG4gICAgICAgIH1cbiAgICAgICAgcGFja1N0YXR1c1AudGV4dENvbnRlbnQgPSBgJHt0aGlzLmNsYWltYWJsZVBhY2tzLmxlbmd0aH0gcGFjayR7cGx1cmFsfSB0byBjbGFpbSFgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFja1N0YXR1c1AuaW5uZXJIVE1MID0gYDxpbWcgc3JjPVwiYXNzZXRzL3BhY2swLTAucG5nXCIgc3R5bGU9XCJ3aWR0aDogMjQwcHg7IG9wYWNpdHk6IDAuMjtcIiBjbGFzcz1cIm1iLTNcIj48YnI+XG4gICAgICAgIE5vIHBhY2sgdG8gb3Blbi48YnI+XG4gICAgICAgIE1ha2Ugc3VyZSBCYXRoZXJzIGFyZSBub3QgbGlzdGVkIG9uIG1hcmtldHBsYWNlcyB0byBzZWUgeW91ciBwYWNrcy48YnI+PGJyPlxuICAgICAgICBBIENhZmZlaW5lIENhcmQgaXMgZ2l2ZW4gZm9yIGV2ZXJ5IEJhdGhlciBib3VnaHQgaW4gdGhlIDxhIGhyZWY9XCJodHRwczovL2luc3RhbnRzaHVmZmxlLmNvbS9zaHVmZmxlL3lVU2J6cTYxWnZxVElzU3ZMeWNTXCIgdGFyZ2V0PVwiX2JsYW5rXCI+SW5zdGFudCBTaHVmZmxlLjwvYT5cbiAgICAgICAgYDtcbiAgICAgIH1cblxuICAgICAgLy9kaXNwbGF5IHBhY2sgbGlzdFxuICAgICAgY29uc3QgcGFja3NEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgcGFja3NEaXYuY2xhc3NOYW1lID1cbiAgICAgICAgXCJyb3cgcm93LWNvbHMtMiByb3ctY29scy1tZC0zIHJvdy1jb2xzLWxnLTQgZ3ktNCBtYi01IGp1c3RpZnktY29udGVudC1jZW50ZXJcIjtcbiAgICAgIHRoaXMudWkuYXBwZW5kKHBhY2tzRGl2KTtcblxuICAgICAgZm9yIChjb25zdCBwYWNrIG9mIHRoaXMuY2xhaW1hYmxlUGFja3MpIHtcbiAgICAgICAgY29uc3QgcGFja0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHBhY2tEaXYuY2xhc3NOYW1lID0gXCJjb2wgdGV4dC1jZW50ZXIgcHMtMyBwZS0zXCI7XG4gICAgICAgIHBhY2tzRGl2LmFwcGVuZChwYWNrRGl2KTtcblxuICAgICAgICAvKmNvbnN0IGdyYXBoaWNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBncmFwaGljRGl2LmNsYXNzTmFtZSA9ICcnO1xuICAgICAgICBncmFwaGljRGl2LmlubmVySFRNTCA9IGA8aW1nIHNyYz1cImFzc2V0cy9wYWNrMC5wbmdcIiBjbGFzcz1cInctMTAwIG1iLTJcIj5gO1xuICAgICAgICBwYWNrRGl2LmFwcGVuZChncmFwaGljRGl2KTsqL1xuXG4gICAgICAgIGNvbnN0IHBhY2tDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICBwYWNrQ2FudmFzLmNsYXNzTmFtZSA9IFwidy0xMDAgbWItMFwiO1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IFBhY2tDYW52YXNDb250cm9sbGVyKFxuICAgICAgICAgIHBhY2tDYW52YXMsXG4gICAgICAgICAgcGFja1sxXSxcbiAgICAgICAgICB0aGlzLmFsZ29JbmRleGVyXG4gICAgICAgICk7XG4gICAgICAgIHBhY2tEaXYuYXBwZW5kKHBhY2tDYW52YXMpO1xuXG4gICAgICAgIGF3YWl0IGNvbnRyb2xsZXJcbiAgICAgICAgICAubG9hZCgpXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGlkZGVuTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBoaWRkZW5OYW1lLmNsYXNzTmFtZSA9IFwiZGFyay10ZXh0IG10LTAgcHQtMCBtYi0yIGhpZGRlbi1wYWNrLW5hbWVcIjtcbiAgICAgICAgICAgIGhpZGRlbk5hbWUuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgICAgICAgICAgaGlkZGVuTmFtZS5zdHlsZVtcIm1heC1oZWlnaHRcIl0gPSBcIjBcIjtcbiAgICAgICAgICAgIC8vaGlkZGVuTmFtZS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgaGlkZGVuTmFtZS50ZXh0Q29udGVudCA9IGNvbnRyb2xsZXIubmZ0Lm5hbWU7XG4gICAgICAgICAgICBwYWNrRGl2LmFwcGVuZChoaWRkZW5OYW1lKTtcblxuICAgICAgICAgICAgY29uc3Qgb3BlbkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICBvcGVuQnV0dG9uLmNsYXNzTmFtZSA9IFwib3Blbi1wYWNrLWJ1dHRvblwiO1xuICAgICAgICAgICAgb3BlbkJ1dHRvbi50ZXh0Q29udGVudCA9IFwiT3BlblwiO1xuICAgICAgICAgICAgb3BlbkJ1dHRvbi5kYXRhc2V0LmJhdGhlcklkID0gcGFja1swXTtcbiAgICAgICAgICAgIG9wZW5CdXR0b24uZGF0YXNldC5jYWZmZWluZUNhcmRJZCA9IHBhY2tbMV07XG4gICAgICAgICAgICBvcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgdGhpcy5vcGVuUGFjay5iaW5kKHRoaXMsIGNvbnRyb2xsZXIsIGhpZGRlbk5hbWUpLFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHBhY2tEaXYuYXBwZW5kKG9wZW5CdXR0b24pO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zbGVlcCgzMDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuXG4gICAgICBwYWNrU3RhdHVzUC50ZXh0Q29udGVudCA9IGVyci5tZXNzYWdlO1xuICAgICAgLy9hbGVydChlcnIubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgZGlzYWJsZUFsbEJ1dHRvbnMoZXhjZXB0KSB7XG4gICAgY29uc3QgYnV0dG9ucyA9IHRoaXMudWkucXVlcnlTZWxlY3RvckFsbChcIi5vcGVuLXBhY2stYnV0dG9uXCIpO1xuXG4gICAgYnV0dG9ucy5mb3JFYWNoKChiKSA9PiB7XG4gICAgICBpZiAoYiAhPT0gZXhjZXB0ICYmICFiLmRhdGFzZXQub3BlbmVkKSB7XG4gICAgICAgIGIuY2xhc3NOYW1lID0gXCJvcGVuLXBhY2stYnV0dG9uIHNvZnQtZGlzYWJsZWRcIjtcbiAgICAgICAgYi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVBbGxCdXR0b25zKGV4Y2VwdCkge1xuICAgIGNvbnN0IGJ1dHRvbnMgPSB0aGlzLnVpLnF1ZXJ5U2VsZWN0b3JBbGwoXCIub3Blbi1wYWNrLWJ1dHRvblwiKTtcblxuICAgIGJ1dHRvbnMuZm9yRWFjaCgoYikgPT4ge1xuICAgICAgaWYgKGIgIT09IGV4Y2VwdCAmJiAhYi5kYXRhc2V0Lm9wZW5lZCkge1xuICAgICAgICBiLmNsYXNzTmFtZSA9IFwib3Blbi1wYWNrLWJ1dHRvblwiO1xuICAgICAgICBiLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBvcGVuUGFjayhwYWNrQ2FudmFzQ29udHJvbGxlciwgaGlkZGVuTmFtZSwgZXZlbnQpIHtcbiAgICBjb25zdCBjYWxsaW5nQnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldDtcblxuICAgIHRoaXMuZGlzYWJsZUFsbEJ1dHRvbnMoY2FsbGluZ0J1dHRvbik7XG5cbiAgICBjb25zdCBiYXRoZXJJZCA9IGNhbGxpbmdCdXR0b24uZGF0YXNldC5iYXRoZXJJZDtcbiAgICBjb25zdCBjYWZmZWluZUNhcmRJZCA9IGNhbGxpbmdCdXR0b24uZGF0YXNldC5jYWZmZWluZUNhcmRJZDtcblxuICAgIHRyeSB7XG4gICAgICBjYWxsaW5nQnV0dG9uLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLXNtXCIgcm9sZT1cInN0YXR1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj5gO1xuICAgICAgY2FsbGluZ0J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgIGxldCBzdWdnZXN0ZWRQYXJhbXMgPSBhd2FpdCB0aGlzLmFsZ29kQ2xpZW50LmdldFRyYW5zYWN0aW9uUGFyYW1zKCkuZG8oKTtcblxuICAgICAgLy9wcmVwYXJlIG9wdGluIHR4blxuICAgICAgbGV0IG9wdGluVHhuID0gYWxnb3Nkay5tYWtlQXNzZXRUcmFuc2ZlclR4bldpdGhTdWdnZXN0ZWRQYXJhbXNGcm9tT2JqZWN0KHtcbiAgICAgICAgZnJvbTogdGhpcy53YWxsZXRDb25uZWN0LndhbGxldEFkZHJlc3MsXG4gICAgICAgIHRvOiB0aGlzLndhbGxldENvbm5lY3Qud2FsbGV0QWRkcmVzcyxcbiAgICAgICAgYW1vdW50OiAwLFxuICAgICAgICBhc3NldEluZGV4OiBwYXJzZUludChjYWZmZWluZUNhcmRJZCksXG4gICAgICAgIHN1Z2dlc3RlZFBhcmFtczogc3VnZ2VzdGVkUGFyYW1zLFxuICAgICAgfSk7XG5cbiAgICAgIC8vcHJlcGFyZSB0cmFuc2ZlciB0eG5cbiAgICAgIGxldCB0cmFuc2ZlclR4biA9XG4gICAgICAgIGFsZ29zZGsubWFrZUFzc2V0VHJhbnNmZXJUeG5XaXRoU3VnZ2VzdGVkUGFyYW1zRnJvbU9iamVjdCh7XG4gICAgICAgICAgZnJvbTogdGhpcy5lc2Nyb3dBZGRyZXNzLFxuICAgICAgICAgIHRvOiB0aGlzLndhbGxldENvbm5lY3Qud2FsbGV0QWRkcmVzcyxcbiAgICAgICAgICBhbW91bnQ6IDEsXG4gICAgICAgICAgYXNzZXRJbmRleDogcGFyc2VJbnQoY2FmZmVpbmVDYXJkSWQpLFxuICAgICAgICAgIHN1Z2dlc3RlZFBhcmFtczogc3VnZ2VzdGVkUGFyYW1zLFxuICAgICAgICB9KTtcblxuICAgICAgbGV0IGFsbFR4bnMgPSBbb3B0aW5UeG4sIHRyYW5zZmVyVHhuXTtcbiAgICAgIGFsZ29zZGsuYXNzaWduR3JvdXBJRChhbGxUeG5zKTtcblxuICAgICAgY29uc3Qgc2lnbmVkVHhucyA9IGF3YWl0IHRoaXMud2FsbGV0Q29ubmVjdC5zaWduVHJhbnNhY3Rpb25zKGFsbFR4bnMpO1xuXG4gICAgICBjb25zdCBzaWduZWRUeG5Kc29uID0ge1xuICAgICAgICBiYXRoZXJJZDogYmF0aGVySWQsXG4gICAgICAgIHR4bjogYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIHNpZ25lZFR4bnNbMF0pKSxcbiAgICAgICAgc3VnZ2VzdGVkUGFyYW1zOiBzdWdnZXN0ZWRQYXJhbXMsXG4gICAgICB9O1xuXG4gICAgICBjYWxsaW5nQnV0dG9uLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLXNtXCIgcm9sZT1cInN0YXR1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj5cbiAgICAgIE9wZW5pbmcuLi5gO1xuICAgICAgY2FsbGluZ0J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgIC8vY2FsbCBhcGlcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIFBBQ0tTX0FQSV9VUkwgKyBcIi9jYWZmZWluZS1jYXJkLXBhY2svY2xhaW0vXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNpZ25lZFR4bkpzb24pLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgLy9jb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIGNhbGxpbmdCdXR0b24uaW5uZXJIVE1MID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBjbGFzcz1cImJpIGJpLWNoZWNrLWNpcmNsZS1maWxsXCIgdmlld0JveD1cIjAgMCAxNiAxNlwiPlxuICAgICAgICA8cGF0aCBkPVwiTTE2IDhBOCA4IDAgMSAxIDAgOGE4IDggMCAwIDEgMTYgMHptLTMuOTctMy4wM2EuNzUuNzUgMCAwIDAtMS4wOC4wMjJMNy40NzcgOS40MTcgNS4zODQgNy4zMjNhLjc1Ljc1IDAgMCAwLTEuMDYgMS4wNkw2Ljk3IDExLjAzYS43NS43NSAwIDAgMCAxLjA3OS0uMDJsMy45OTItNC45OWEuNzUuNzUgMCAwIDAtLjAxLTEuMDV6XCIvPlxuICAgICAgPC9zdmc+XG4gICAgICAgIE9wZW5lZGA7XG4gICAgICAgIGNhbGxpbmdCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBjYWxsaW5nQnV0dG9uLmRhdGFzZXQub3BlbmVkID0gdHJ1ZTtcblxuICAgICAgICAvL2FuaW1hdGUgcGFjayBvcGVuaW5nXG4gICAgICAgIHBhY2tDYW52YXNDb250cm9sbGVyLmFuaW1hdGUoKTtcblxuICAgICAgICBoaWRkZW5OYW1lLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbiAgICAgICAgaGlkZGVuTmFtZS5zdHlsZVtcIm1heC1oZWlnaHRcIl0gPSBcIjUwMHB4XCI7XG5cbiAgICAgICAgdGhpcy5lbmFibGVBbGxCdXR0b25zKGNhbGxpbmdCdXR0b24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGRhdGE7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHt9XG5cbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5lcnJvcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICBhbGVydChlcnIubWVzc2FnZSk7XG5cbiAgICAgIGNhbGxpbmdCdXR0b24udGV4dENvbnRlbnQgPSBcIk9wZW5cIjtcbiAgICAgIGNhbGxpbmdCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblxuICAgICAgdGhpcy5lbmFibGVBbGxCdXR0b25zKGNhbGxpbmdCdXR0b24pO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBQYWNrQ2FudmFzQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKGNhbnZhcywgY2FmZmVpbmVDYXJkSWQsIGFsZ29JbmRleGVyKSB7XG4gICAgdGhpcy5jYWZmZWluZUNhcmRJZCA9IGNhZmZlaW5lQ2FyZElkO1xuICAgIHRoaXMuYWxnb0luZGV4ZXIgPSBhbGdvSW5kZXhlcjtcblxuICAgIHRoaXMud2lkdGggPSA2NjA7XG4gICAgdGhpcy5oZWlnaHQgPSA5NjA7XG4gICAgdGhpcy5pbWFnZVdpZHRoID0gOTYwO1xuXG4gICAgdGhpcy5udW1BbmltYXRpb25JbWFnZSA9IDQ7XG5cbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cbiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgdGhpcy5jb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgLy90aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gJ3JlZCc7XG4gICAgLy90aGlzLmNvbnRleHQuZmlsbFJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgdGhpcy5jb250ZXh0LnRyYW5zbGF0ZSgtKHRoaXMuaW1hZ2VXaWR0aCAtIHRoaXMud2lkdGgpIC8gMiwgMCk7XG5cbiAgICAvL2xvYWQgYW5pbWF0aW9uIGltYWdlc1xuICAgIC8vbG9hZCBjYWZmZWluZSBjYXJkIGltYWdlXG5cbiAgICB0aGlzLm5mdDtcblxuICAgIHRoaXMuY2FyZEltYWdlO1xuICAgIHRoaXMuY2FyZE1hc2s7XG4gICAgdGhpcy5hbmltYXRpb25JbWFnZXM7XG4gIH1cblxuICBhc3luYyBsb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZEFsbEltYWdlKCk7XG4gIH1cblxuICBzdGF0aWMgbG9hZEltYWdlKHBhdGgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcblxuICAgICAgLy9pbWFnZS5jcm9zc09yaWdpbiA9ICdBbm9ueW1vdXMnO1xuXG4gICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoaW1hZ2UpO1xuICAgICAgfTtcblxuICAgICAgaW1hZ2Uub25lcnJvciA9IHJlamVjdDtcblxuICAgICAgaW1hZ2Uuc3JjID0gcGF0aDtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGxvYWRBbGxJbWFnZSgpIHtcbiAgICB0aGlzLmFuaW1hdGlvbkltYWdlcyA9IFtdO1xuXG4gICAgLy9jaG9vc2UgYSBjb2xvciByYW5kb21seSBkZXBlbmRpbmcgb24gY2FyZCBhc3NldCBpZFxuICAgIGNvbnN0IGNvbG9ySW5kZXggPSB0aGlzLmNhZmZlaW5lQ2FyZElkICUgNDtcbiAgICAvL2NvbnN0IGNvbG9ySW5kZXggPSAwO1xuXG4gICAgLy9sb2FkIGZpcnN0IGltYWdlIGFuZCBkaXNwbGF5IGl0IGFzIHNvb24gYXMgcG9zc2libGVcbiAgICBjb25zdCBpbml0aWFsSW1hZ2UgPSBhd2FpdCBQYWNrQ2FudmFzQ29udHJvbGxlci5sb2FkSW1hZ2UoXG4gICAgICBgYXNzZXRzL3BhY2ske2NvbG9ySW5kZXh9LTAucG5nYFxuICAgICk7XG4gICAgdGhpcy5hbmltYXRpb25JbWFnZXMucHVzaChpbml0aWFsSW1hZ2UpO1xuICAgIHRoaXMuZHJhd1BhY2soKTtcblxuICAgIC8vbG9hZCBtYXNrXG4gICAgdGhpcy5jYXJkTWFzayA9IGF3YWl0IFBhY2tDYW52YXNDb250cm9sbGVyLmxvYWRJbWFnZShcbiAgICAgIGBhc3NldHMvY2FyZC1tYXNrLnBuZ2BcbiAgICApO1xuXG4gICAgLy9sb2FkIG5mdCBpbWFnZVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYWxnb0luZGV4ZXJcbiAgICAgIC5sb29rdXBBc3NldEJ5SUQodGhpcy5jYWZmZWluZUNhcmRJZClcbiAgICAgIC5kbygpO1xuICAgIHRoaXMubmZ0ID0gbmV3IE5GVCh0aGlzLmNhZmZlaW5lQ2FyZElkLCByZXN1bHRbXCJhc3NldFwiXSk7XG4gICAgYXdhaXQgdGhpcy5uZnQubG9hZCh0aGlzLmFsZ29JbmRleGVyKTtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLmNhcmRJbWFnZSA9IGF3YWl0IFBhY2tDYW52YXNDb250cm9sbGVyLmxvYWRJbWFnZSh0aGlzLm5mdC5pbWFnZVVybCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhgRXJyb3IgbG9hZGluZyBpbWFnZSBmcm9tIHByaW1hcnksIHRyeWluZyBzZWNvbmRhcnlgKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuY2FyZEltYWdlID0gYXdhaXQgUGFja0NhbnZhc0NvbnRyb2xsZXIubG9hZEltYWdlKFxuICAgICAgICAgIHRoaXMubmZ0LmltYWdlVXJsQWx0ZXJuYXRlXG4gICAgICAgICk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhpcy5jYXJkSW1hZ2UgPSBhd2FpdCBQYWNrQ2FudmFzQ29udHJvbGxlci5sb2FkSW1hZ2UoXG4gICAgICAgICAgXCJhc3NldHMvZW1wdHktY2FyZC5wbmdcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vbG9hZCBhbmltYXRpb24gaW1hZ2VzXG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0aGlzLm51bUFuaW1hdGlvbkltYWdlOyBpKyspIHtcbiAgICAgIGNvbnN0IGFuaW1hdGlvbkltYWdlID0gYXdhaXQgUGFja0NhbnZhc0NvbnRyb2xsZXIubG9hZEltYWdlKFxuICAgICAgICBgYXNzZXRzL3BhY2ske2NvbG9ySW5kZXh9LSR7aX0ucG5nYFxuICAgICAgKTtcbiAgICAgIHRoaXMuYW5pbWF0aW9uSW1hZ2VzLnB1c2goYW5pbWF0aW9uSW1hZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRyYXdQYWNrKCkge1xuICAgIC8vbG9hZCBpbWFnZVxuICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICB0aGlzLmFuaW1hdGlvbkltYWdlc1swXSxcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgdGhpcy5pbWFnZVdpZHRoLFxuICAgICAgdGhpcy5oZWlnaHRcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGVhc2VJbk91dFF1YWQoeCkge1xuICAgIHJldHVybiB4IDwgMC41ID8gMiAqIHggKiB4IDogMSAtIE1hdGgucG93KC0yICogeCArIDIsIDIpIC8gMjtcbiAgfVxuXG4gIGFzeW5jIGFuaW1hdGUoKSB7XG4gICAgbGV0IGZyYW1lRHVyYXRpb24gPSAwLjE1O1xuXG4gICAgbGV0IGN1cnJlbnRGcmFtZSA9IDE7XG5cbiAgICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgLy9jbGVhciBjb250ZXh0XG4gICAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuaW1hZ2VXaWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgICAvL2RyYXcgbWFza1xuICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLmNhcmRNYXNrLCAwLCAwLCB0aGlzLmltYWdlV2lkdGgsIHRoaXMuaGVpZ2h0KTtcblxuICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLWluXCI7XG5cbiAgICAgIC8vZHJhdyBjYXJkXG4gICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICB0aGlzLmNhcmRJbWFnZSxcbiAgICAgICAgMCxcbiAgICAgICAgMCxcbiAgICAgICAgdGhpcy5pbWFnZVdpZHRoLFxuICAgICAgICB0aGlzLmhlaWdodFxuICAgICAgKTtcblxuICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcblxuICAgICAgLy9kcmF3IHBhY2sgYW5pbWF0aW9uXG4gICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICB0aGlzLmFuaW1hdGlvbkltYWdlc1tjdXJyZW50RnJhbWVdLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgICB0aGlzLmltYWdlV2lkdGgsXG4gICAgICAgIHRoaXMuaGVpZ2h0XG4gICAgICApO1xuXG4gICAgICBpZiAoY3VycmVudEZyYW1lID09PSB0aGlzLm51bUFuaW1hdGlvbkltYWdlKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XG5cbiAgICAgICAgcGFydHkuc3BhcmtsZXModGhpcy5jYW52YXMpO1xuXG4gICAgICAgIC8vc3RhcnQgc2xpZGUgYW5pbWF0aW9uXG4gICAgICAgIGZyYW1lRHVyYXRpb24gPSAwLjA1O1xuICAgICAgICBjb25zdCBhbmltYXRpb25EdXJhdGlvbiA9IDAuODtcbiAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gMDtcblxuICAgICAgICBjb25zdCBpbnRlcnZhbElkMiA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICBjb25zdCB5T2Zmc2V0ID1cbiAgICAgICAgICAgIFBhY2tDYW52YXNDb250cm9sbGVyLmVhc2VJbk91dFF1YWQoXG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lIC8gYW5pbWF0aW9uRHVyYXRpb25cbiAgICAgICAgICAgICkgKiB0aGlzLmhlaWdodDtcblxuICAgICAgICAgIC8vY2xlYXIgY29udGV4dFxuICAgICAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5pbWFnZVdpZHRoLCB0aGlzLmhlaWdodCk7XG5cbiAgICAgICAgICAvL2RyYXcgbWFza1xuICAgICAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICB0aGlzLmNhcmRNYXNrLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICB0aGlzLmltYWdlV2lkdGgsXG4gICAgICAgICAgICB0aGlzLmhlaWdodFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2UtaW5cIjtcblxuICAgICAgICAgIC8vZHJhdyBjYXJkXG4gICAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgICAgIHRoaXMuY2FyZEltYWdlLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICB0aGlzLmltYWdlV2lkdGgsXG4gICAgICAgICAgICB0aGlzLmhlaWdodFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2Utb3ZlclwiO1xuXG4gICAgICAgICAgLy9kcmF3IHBhY2sgYW5pbWF0aW9uXG4gICAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uSW1hZ2VzW3RoaXMubnVtQW5pbWF0aW9uSW1hZ2VdLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIHlPZmZzZXQsXG4gICAgICAgICAgICB0aGlzLmltYWdlV2lkdGgsXG4gICAgICAgICAgICB0aGlzLmhlaWdodFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjdXJyZW50VGltZSArPSBmcmFtZUR1cmF0aW9uO1xuXG4gICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID49IGFuaW1hdGlvbkR1cmF0aW9uKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZyYW1lRHVyYXRpb24gKiAxMDAwKTtcbiAgICAgIH1cblxuICAgICAgY3VycmVudEZyYW1lKys7XG4gICAgfSwgZnJhbWVEdXJhdGlvbiAqIDEwMDApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZVBhZ2UiLCJjb25zdHJ1Y3RvciIsIndhbGxldENvbm5lY3QiLCJob2xkaW5ncyIsImFsZ29kQ2xpZW50IiwiYWxnb0luZGV4ZXIiLCJ0aGlzIiwiSG9tZSIsInN1cGVyIiwiYXJndW1lbnRzIiwidWkiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJsb2FkUGFja3MiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJsb2FkTGFzdEdyaW5kcyIsImFzeW5jIiwicmVzdWx0IiwiY2xhaW1hYmxlUGFja3MiLCJsZW5ndGgiLCJxdWVyeVNlbGVjdG9yIiwid2luZG93IiwiZW5hYmxlTmF2aWdhdGlvbkxpbmtzIiwiYmF0aGVyc0NyZWF0b3JBZGRyZXNzIiwiYyIsIm5hbWUiLCJhZGRyZXNzZXMiLCJ0cmFuc2FjdGlvbnMiLCJsb29rdXBBY2NvdW50VHJhbnNhY3Rpb25zIiwidHhUeXBlIiwibGltaXQiLCJkbyIsInNvcnQiLCJhIiwiYiIsImFzc2V0cyIsInR4Iiwibm90ZSIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJ0eXBlIiwiYXNzZXRJZCIsInB1c2giLCJmaWx0ZXIiLCJpdGVtIiwiaW5kZXgiLCJpbmRleE9mIiwic2xpY2UiLCJsaXN0RGl2Iiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImxvYWRWaXNpYmxlTkZUcyIsImJpbmQiLCJyb290Iiwicm9vdE1hcmdpbiIsInRocmVzaG9sZCIsImFzc2V0IiwibmZ0RGl2IiwiY2xhc3NOYW1lIiwiZGF0YXNldCIsImFwcGVuZCIsIm9ic2VydmUiLCJzbGVlcCIsImRlbGF5VGltZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImVudHJpZXMiLCJmb3JFYWNoIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsInRhcmdldCIsImxvYWRpbmciLCJsb29rdXBBc3NldEJ5SUQiLCJuZnQiLCJ0ZXh0Q29udGVudCIsInVuaXROYW1lIiwic3Vic3RyaW5nIiwibG9hZCIsImltZyIsInNyYyIsImltYWdlVXJsIiwiaGlkZGVuIiwiaGFuZGxlSW1hZ2VFcnJvciIsInJlc3VsdEhvbGRlciIsImxvb2t1cEFzc2V0QmFsYW5jZXMiLCJob2xkZXJTcGFuIiwiYmFsYW5jZSIsImJhbGFuY2VzIiwiYW1vdW50IiwiYWRkcmVzcyIsInJlc3BvbnNlIiwiZmV0Y2giLCJzdGF0dXMiLCJuZmRSZXN1bHQiLCJqc29uIiwiUEFDS1NfQVBJX1VSTCIsImJhdGhlcnNJZHMiLCJiYXRoZXJzIiwibmZ0cyIsIm1hcCIsInBhY2siLCJwYWNrcyIsImluY2x1ZGVzIiwiZXNjcm93QWRkcmVzcyIsIkVycm9yIiwiUGFja3MiLCJmZXRjaFBhY2tzIiwicGFja1N0YXR1c1AiLCJwbHVyYWwiLCJwYWNrc0RpdiIsInBhY2tEaXYiLCJwYWNrQ2FudmFzIiwiY29udHJvbGxlciIsIlBhY2tDYW52YXNDb250cm9sbGVyIiwidGhlbiIsImhpZGRlbk5hbWUiLCJzdHlsZSIsIm9wYWNpdHkiLCJvcGVuQnV0dG9uIiwiYmF0aGVySWQiLCJjYWZmZWluZUNhcmRJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvcGVuUGFjayIsImNhdGNoIiwibG9nIiwibWVzc2FnZSIsImRpc2FibGVBbGxCdXR0b25zIiwiZXhjZXB0IiwicXVlcnlTZWxlY3RvckFsbCIsIm9wZW5lZCIsImRpc2FibGVkIiwiZW5hYmxlQWxsQnV0dG9ucyIsInBhY2tDYW52YXNDb250cm9sbGVyIiwiZXZlbnQiLCJjYWxsaW5nQnV0dG9uIiwiY3VycmVudFRhcmdldCIsInN1Z2dlc3RlZFBhcmFtcyIsImdldFRyYW5zYWN0aW9uUGFyYW1zIiwiYWxsVHhucyIsImZyb20iLCJ3YWxsZXRBZGRyZXNzIiwidG8iLCJhc3NldEluZGV4IiwicGFyc2VJbnQiLCJzaWduZWRUeG5zIiwic2lnblRyYW5zYWN0aW9ucyIsInNpZ25lZFR4bkpzb24iLCJ0eG4iLCJidG9hIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiYXBwbHkiLCJtZXRob2QiLCJib2R5Iiwic3RyaW5naWZ5IiwiaGVhZGVycyIsIkFjY2VwdCIsImRhdGEiLCJhbmltYXRlIiwiYWxlcnQiLCJjYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImltYWdlV2lkdGgiLCJudW1BbmltYXRpb25JbWFnZSIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwidHJhbnNsYXRlIiwiY2FyZEltYWdlIiwiY2FyZE1hc2siLCJhbmltYXRpb25JbWFnZXMiLCJsb2FkQWxsSW1hZ2UiLCJzdGF0aWMiLCJwYXRoIiwicmVqZWN0IiwiaW1hZ2UiLCJJbWFnZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJjb2xvckluZGV4IiwiaW5pdGlhbEltYWdlIiwibG9hZEltYWdlIiwiZHJhd1BhY2siLCJpbWFnZVVybEFsdGVybmF0ZSIsImkiLCJhbmltYXRpb25JbWFnZSIsImRyYXdJbWFnZSIsIngiLCJNYXRoIiwicG93IiwiZnJhbWVEdXJhdGlvbiIsImN1cnJlbnRGcmFtZSIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsImNsZWFyUmVjdCIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsImNsZWFySW50ZXJ2YWwiLCJhbmltYXRpb25EdXJhdGlvbiIsImN1cnJlbnRUaW1lIiwiaW50ZXJ2YWxJZDIiLCJ5T2Zmc2V0IiwiZWFzZUluT3V0UXVhZCJdLCJzb3VyY2VSb290IjoiIn0=